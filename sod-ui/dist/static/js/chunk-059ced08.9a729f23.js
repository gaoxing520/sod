(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-059ced08"],{"8d4f":function(e,t,n){"use strict";n.d(t,"q",(function(){return i})),n.d(t,"m",(function(){return d})),n.d(t,"I",(function(){return o})),n.d(t,"r",(function(){return u})),n.d(t,"G",(function(){return l})),n.d(t,"o",(function(){return s})),n.d(t,"p",(function(){return c})),n.d(t,"v",(function(){return m})),n.d(t,"E",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"J",(function(){return p})),n.d(t,"K",(function(){return h})),n.d(t,"n",(function(){return g})),n.d(t,"i",(function(){return x})),n.d(t,"g",(function(){return y})),n.d(t,"B",(function(){return v})),n.d(t,"y",(function(){return O})),n.d(t,"x",(function(){return j})),n.d(t,"j",(function(){return I})),n.d(t,"C",(function(){return C})),n.d(t,"u",(function(){return T})),n.d(t,"s",(function(){return _})),n.d(t,"L",(function(){return F})),n.d(t,"b",(function(){return D})),n.d(t,"w",(function(){return w})),n.d(t,"k",(function(){return S})),n.d(t,"F",(function(){return k})),n.d(t,"l",(function(){return B})),n.d(t,"d",(function(){return $})),n.d(t,"f",(function(){return N})),n.d(t,"e",(function(){return E})),n.d(t,"a",(function(){return L})),n.d(t,"h",(function(){return z})),n.d(t,"H",(function(){return R})),n.d(t,"A",(function(){return A})),n.d(t,"z",(function(){return J})),n.d(t,"t",(function(){return K})),n.d(t,"D",(function(){return M})),n.d(t,"M",(function(){return q}));var a=n("b775"),r="http://10.40.79.18:8005";function i(e){return Object(a["a"])({url:r+"/dm/dataTable/gcl",method:"get",params:e})}function d(e){return Object(a["a"])({url:r+"/dm/tableColumn/findByTableId",method:"get",params:e})}function o(e){return Object(a["a"])({url:r+"/dm/tableColumn/delIds",method:"delete",params:e})}function u(e){return Object(a["a"])({url:r+"/dm/sharding/getByTableId",method:"get",params:e})}function l(e){return Object(a["a"])({url:r+"/dm/sharding/saves",method:"post",data:e})}function s(e){return Object(a["a"])({url:r+"/dm/foreignKey/findByClassLogicId",method:"get",params:e})}function c(e){return Object(a["a"])({url:r+"/dm/foreignKey/save",method:"post",data:e})}function m(e){return Object(a["a"])({url:r+"/dm/dataclassnorm/get",method:"get",params:e})}function f(e){return Object(a["a"])({url:r+"/dm/dataclassnorm/save",method:"post",data:e})}function b(e){return Object(a["a"])({url:r+"/dm/dataTable/save",method:"post",data:e})}function p(e){return Object(a["a"])({url:r+"/dm/tableColumn/save",method:"post",data:e})}function h(e){return Object(a["a"])({url:r+"/dm/tableColumn/saveList",method:"post",data:e})}function g(e){return Object(a["a"])({url:r+"/dm/tableIndex/findByTableId",method:"get",params:e})}function x(e){return Object(a["a"])({url:r+"/dm/tableIndex/del",method:"delete",data:e})}function y(e){return Object(a["a"])({url:r+"/dm/datastatistics/list",method:"get",params:e})}function v(e){return Object(a["a"])({url:r+"/dm/dataTable/sample",method:"post",data:e})}function O(e){return Object(a["a"])({url:r+"/dm/gridarea/save",method:"post",data:e})}function j(e){return Object(a["a"])({url:r+"/dm/gridarea/list",method:"get",params:e})}function I(e){return Object(a["a"])({url:r+"/dm/dataserverbaseinfo/findByDataCLassId",method:"get",params:e})}function C(e){return Object(a["a"])({url:r+"/dm/dataserverbaseinfo/save",method:"post",data:e})}function T(e){return Object(a["a"])({url:r+"/dm/dataTable/getDictByType",method:"get",params:e})}function _(e){return Object(a["a"])({url:r+"/dm/tableColumn/get",method:"get",params:e})}function F(e){return Object(a["a"])({url:r+"/dm/tableIndex/save",method:"post",data:e})}function D(e){return Object(a["a"])({url:r+"/dictionary/define/all",method:"get"})}function w(e){return Object(a["a"])({url:r+"/dm/gridarea/delByIds",method:"delete",params:e})}function S(e){return Object(a["a"])({url:r+"/dm/gridarea/findByDataServiceId",method:"get",params:e})}function k(e){return Object(a["a"])({url:r+"/system/gribParameterDefine/queryAll",method:"get",params:e})}function B(e){return Object(a["a"])({url:r+"/system/serviceCodeDefine/findByDbFcstEle",method:"get",params:e})}function $(e){return Object(a["a"])({url:r+"/dm/dataserverconfig/save",method:"post",data:e})}function N(e){return Object(a["a"])({url:r+"/dm/dataserverconfig/list",method:"get",params:e})}function E(e){return Object(a["a"])({url:r+"/dm/dataserverconfig/get",method:"get",params:e})}function L(e){return Object(a["a"])({url:r+"/dm/dataserverconfig/addList",method:"post",data:e})}function z(e){return Object(a["a"])({url:r+"/dm/dataserverconfig/delByIds",method:"delete",params:e})}function R(e){return Object(a["a"])({url:r+"/dm/tableColumn/syncSCode",method:"post",data:e})}function A(e){return Object(a["a"])({url:r+"/dm/tableColumn/queryCmccElements",method:"get",params:e})}function J(e){return Object(a["a"])({url:r+"/managefield/findData",method:"get",params:e})}function K(e){return Object(a["a"])({url:r+"/dm/classbaseinfo/getDataClassBaseInfo",method:"get",params:e})}function M(e){return Object(a["a"])({url:r+"/dm/classbaseinfo/saveDataClassBaseInfo",method:"get",params:e})}function q(e){return Object(a["a"])({url:r+"/dm/dataClass/updateIsAllLine",method:"get",params:e})}},d31a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("el-button-group",{staticStyle:{padding:"8px"}},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addIndex}},[e._v("新增")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:e.editIndex}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.deleteIndex}},[e._v("删除")])],1),e._v(" "),n("el-table",{ref:"selectionTable",attrs:{data:e.indexItem,border:""},on:{"selection-change":function(t){return e.indexItemSel=t},"row-click":e.handleClickTableRow}},[n("el-table-column",{attrs:{type:"index"}}),e._v(" "),n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"索引名称",prop:"indexName"}}),e._v(" "),n("el-table-column",{attrs:{label:"索引列",prop:"indexColumn"}}),e._v(" "),n("el-table-column",{attrs:{label:"索引类型",prop:"indexType"}})],1),e._v(" "),n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"65%",title:e.indexTitle,visible:e.dialogStatus.indexDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"indexDialog",t)}}},[n("div",[n("el-form",{ref:"indexForm",attrs:{model:e.indexForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"索引名称"}},[n("el-input",{attrs:{size:"small"},model:{value:e.indexForm.indexName,callback:function(t){e.$set(e.indexForm,"indexName",t)},expression:"indexForm.indexName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"索引类型"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择索引类型"},model:{value:e.indexForm.indexType,callback:function(t){e.$set(e.indexForm,"indexType",t)},expression:"indexForm.indexType"}},e._l(e.indexTypeOptions,(function(e){return n("el-option",{key:e.dictValue,attrs:{label:e.dictValue+"["+e.dictLabel+"]",value:e.dictValue}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"索引字段"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"",placeholder:"请选择索引字段"},model:{value:e.indexForm.indexColumn,callback:function(t){e.$set(e.indexForm,"indexColumn",t)},expression:"indexForm.indexColumn"}},e._l(e.columnData,(function(e){return n("el-option",{key:e.dbEleCode,attrs:{label:e.dbEleCode+"["+e.eleName+"]",value:e.dbEleCode}})})),1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.trueIndex}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)])],1)},r=[],i=(n("96cf"),n("3b8d")),d=(n("28a5"),n("8d4f")),o={props:{tableInfo:Object},data:function(){return{indexForm:{indexName:"TRAF_WEA_CHN_REP_TAB_UK",indexColumn:[]},indexItem:[],indexItemSel:[],columnData:[],indexTypeOptions:[],dialogStatus:{indexDialog:!1},indexTitle:"新增索引"}},methods:{handleClickTableRow:function(e,t,n){this.$refs.selectionTable.toggleRowSelection(e)},cancel:function(){this.$refs["indexForm"].resetFields(),this.dialogStatus.indexDialog=!1},getIndexTable:function(){var e=this;Object(d["n"])({tableId:this.tableInfo.id}).then((function(t){200==t.code?e.indexItem=t.data:e.$message({message:t.msg,type:"error"})}))},addIndex:function(){this.tableInfo.id?(this.indexTitle="新增索引",this.indexForm.indexColumn=[],this.getDictByTypeMethods("table_index_type"),this.dialogStatus.indexDialog=!0):this.$message({type:"error",message:"表不存在"})},editIndex:function(){1!=this.indexItemSel.length?this.$message({message:"请选择一条数据！",type:"warning"}):(this.getDictByTypeMethods("table_index_type"),this.indexTitle="编辑索引",this.indexForm=JSON.parse(JSON.stringify(this.indexItemSel[0])),this.indexForm.indexColumn=this.indexForm.indexColumn.split(","),this.dialogStatus.indexDialog=!0)},getDictByTypeMethods:function(e){var t=this;Object(d["u"])({dictType:e}).then((function(e){200==e.code&&(t.indexTypeOptions=e.data)}))},trueIndex:function(){var e=this;this.indexForm.tableId=this.tableInfo.id,this.indexForm.indexColumn=this.indexForm.indexColumn.join(","),console.log(this.indexForm),Object(d["L"])(this.indexForm).then((function(t){200==t.code?(e.$message({message:"操作成功",type:"success"}),e.getIndexTable(),e.$refs["indexForm"].resetFields(),e.dialogStatus.indexDialog=!1):e.$message({type:"error",message:"操作失败"})}))},deleteIndex:function(){var e=this;1!=this.indexItemSel.length?this.$message({message:"请选择一条数据！",type:"warning"}):Object(d["i"])({id:this.indexItemSel[0].id}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功"}),e.getIndexTable()):e.$message({message:t.msg,type:"error"})}))}},mounted:function(){},watch:{tableInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.indexItem=this.tableInfo.tableIndexList,this.columnData=this.tableInfo.columns;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},u=o,l=n("2877"),s=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=s.exports}}]);