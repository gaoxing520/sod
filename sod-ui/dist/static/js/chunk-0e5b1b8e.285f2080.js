(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e5b1b8e"],{"4e1f":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return c}));var l=a("b775"),r="http://10.40.79.18:8005";function o(e){return Object(l["a"])({url:r+"/system/gribParameterDefine/list",method:"get",params:e})}function i(e){return Object(l["a"])({url:r+"/system/gribParameterDefine/save",method:"post",data:e})}function s(e){return Object(l["a"])({url:r+"/system/gribParameterDefine/edit",method:"put",data:e})}function n(e){return Object(l["a"])({url:r+"/system/gribParameterDefine/deleteByIds/"+e,method:"delete"})}function c(){return Object(l["a"])({url:r+"/system/api/gridEleDecodeDefine/exportJSON",method:"post"})}},d8c0:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-button-group",{staticStyle:{padding:"8px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-claim",size:"small"},on:{click:function(t){e.dialogStatus.optConfig=!0}}},[e._v("选择")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-folder-add",size:"small"},on:{click:e.addConfig}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:e.editConfig}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:e.deleteConfig}},[e._v("删除")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,stripe:""},on:{"selection-change":function(t){return e.selData=t}}},[a("el-table-column",{attrs:{type:"index",index:e.table_index}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"处理编码",prop:"dataDpcId"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素存储短名",prop:"eleCodeShort"}}),e._v(" "),a("el-table-column",{attrs:{label:"学科",prop:"subjectId"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数种类",prop:"classify"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数编码",prop:"parameterId"}}),e._v(" "),a("el-table-column",{attrs:{label:"GRIB版本",prop:"gribVersion"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否为共有配置",prop:"publicConfig"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板编号",prop:"templateId"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.searchFun}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:"选择",visible:e.dialogStatus.optConfig,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"optConfig",t)}}},[a("div",[a("el-form",{attrs:{model:e.optSearchObj,inline:!0,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"短名"}},[a("el-input",{model:{value:e.optSearchObj.eleCodeShort,callback:function(t){e.$set(e.optSearchObj,"eleCodeShort",t)},expression:"optSearchObj.eleCodeShort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板ID"}},[a("el-input",{model:{value:e.optSearchObj.templateId,callback:function(t){e.$set(e.optSearchObj,"templateId",t)},expression:"optSearchObj.templateId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchOptConfig(1)}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{ref:"choseTable",attrs:{data:e.optData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"短名",prop:"eleCodeShort"}}),e._v(" "),a("el-table-column",{attrs:{label:"科目",prop:"subjectId"}}),e._v(" "),a("el-table-column",{attrs:{label:"分类",prop:"classify"}}),e._v(" "),a("el-table-column",{attrs:{label:"GRIB版本",prop:"gribVersion"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数ID",prop:"parameterId"}}),e._v(" "),a("el-table-column",{attrs:{label:"共有配置",prop:"publicConfig"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素描述",prop:"element_cn"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板ID",prop:"templateId"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.optDataTotal>0,expression:"optDataTotal>0"}],attrs:{total:e.optDataTotal,page:e.optSearchObj.pageNum,limit:e.optSearchObj.pageSize},on:{"update:page":function(t){return e.$set(e.optSearchObj,"pageNum",t)},"update:limit":function(t){return e.$set(e.optSearchObj,"pageSize",t)},pagination:e.searchOptConfig}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.canalc()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueHandle("table")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:e.dialogTitle,visible:e.dialogStatus.config,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"config",t)}}},[a("el-form",{ref:"formData",attrs:{size:"mini",model:e.formData,"label-width":"120px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"处理编码",prop:"dataDpcId"}},[a("el-input",{attrs:{size:"small",placeholder:"处理编码"},model:{value:e.formData.dataDpcId,callback:function(t){e.$set(e.formData,"dataDpcId",t)},expression:"formData.dataDpcId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"格点要素短名",prop:"eleCodeShort"}},[a("el-input",{attrs:{size:"small",placeholder:"格点要素短名"},model:{value:e.formData.eleCodeShort,callback:function(t){e.$set(e.formData,"eleCodeShort",t)},expression:"formData.eleCodeShort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学科",prop:"subjectId"}},[a("el-input",{attrs:{size:"small",placeholder:"学科",type:"number"},model:{value:e.formData.subjectId,callback:function(t){e.$set(e.formData,"subjectId",t)},expression:"formData.subjectId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分类",prop:"classify"}},[a("el-input",{attrs:{size:"small",placeholder:"分类",type:"number"},model:{value:e.formData.classify,callback:function(t){e.$set(e.formData,"classify",t)},expression:"formData.classify"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数ID",prop:"parameterId"}},[a("el-input",{attrs:{size:"small",placeholder:"参数ID"},model:{value:e.formData.parameterId,callback:function(t){e.$set(e.formData,"parameterId",t)},expression:"formData.parameterId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"GRIB版本",prop:"gribVersion"}},[a("el-input",{attrs:{size:"small",placeholder:"GRIB版本",type:"number"},model:{value:e.formData.gribVersion,callback:function(t){e.$set(e.formData,"gribVersion",t)},expression:"formData.gribVersion"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模板编号",prop:"templateId"}},[a("el-input",{attrs:{size:"small",placeholder:"模板编号"},model:{value:e.formData.templateId,callback:function(t){e.$set(e.formData,"templateId",t)},expression:"formData.templateId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否共有配置"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"Y","inactive-value":"N"},model:{value:e.formData.publicConfig,callback:function(t){e.$set(e.formData,"publicConfig",t)},expression:"formData.publicConfig"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueHandle("formData")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.canalc()}}},[e._v("取 消")])],1)],1)],1)},r=[],o=(a("ac6a"),a("b775")),i="http://10.40.79.18:8005";function s(e){return Object(o["a"])({url:i+"/dm/griddecoding/list",method:"get",params:e})}function n(e){return Object(o["a"])({url:i+"/dm/griddecoding/save",method:"post",data:e})}function c(e){return Object(o["a"])({url:i+"/dm/griddecoding/saveList",method:"post",data:e})}function u(e){return Object(o["a"])({url:i+"/dm/griddecoding/get",method:"get",params:e})}function p(e){return Object(o["a"])({url:i+"/dm/griddecoding/delByIds",method:"delete",params:e})}var m=a("4e1f"),d={name:"DecodingConfigManage",props:{rowData:Object},components:{},data:function(){return{tableData:[],total:0,dialogStatus:{optConfig:!1,config:!1},queryParams:{pageNum:1,pageSize:10},optData:[],optSearchObj:{pageNum:1,pageSize:10,eleCodeShort:"",templateId:""},optDataTotal:0,selData:[],formData:{},multipleSelection:[],dialogTitle:"新增解码配置信息",rules:{dataDpcId:[{required:!0,message:"请输入处理编码",trigger:"blur"}],eleCodeShort:[{required:!0,message:"请输入格点要素短名",trigger:"blur"}],subjectId:[{required:!0,message:"请输入学科",trigger:"blur"}],classify:[{required:!0,message:"分类",trigger:"blur"}],parameterId:[{required:!0,message:"请输入参数ID",trigger:"blur"}],templateId:[{required:!0,message:"请输入模板编号",trigger:"blur"}],gribVersion:[{required:!0,message:"请输入GRIB版本",trigger:"blur"}]}}},methods:{table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},handleSelectionChange:function(e){this.multipleSelection=e},searchFun:function(){var e=this;this.queryParams.dataServiceId=this.rowData.DATA_CLASS_ID,console.log(this.queryParams),s(this.queryParams).then((function(t){e.tableData=t.data.pageData,e.total=t.data.totalCount}))},searchOptConfig:function(e){var t=this;e&&1==e&&(this.optSearchObj.pageNum=1),Object(m["c"])(this.optSearchObj).then((function(e){t.optData=e.data.pageData,t.optDataTotal=e.data.totalCount,t.loading=!1}))},addConfig:function(){this.formData={},this.dialogTitle="新增解码配置信息",this.dialogStatus.config=!0},editConfig:function(){var e=this;1==this.selData.length?(this.dialogTitle="编辑解码配置信息",u({id:this.selData[0].id}).then((function(t){e.formData=t.data,e.dialogStatus.config=!0}))):this.$message({message:"请选择一条数据！",type:"warning"})},deleteConfig:function(){var e=this;if(0!=this.selData.length){var t=[];this.selData.forEach((function(e){t.push(e.id)})),p({ids:t.join(",")}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功"}),e.canalc()):e.$message({type:"error",message:t.msg})}))}else this.$message({message:"请选择一条数据！",type:"warning"})},canalc:function(){this.formData={},this.multipleSelection=[],this.dialogStatus.optConfig=!1,this.dialogStatus.config=!1,this.searchFun()},trueHandle:function(e){var t=this;"formData"==e?this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.formData.dataServiceId=t.rowData.DATA_CLASS_ID,n(t.formData).then((function(e){200==e.code?(t.$message({message:"操作成功！",type:"success"}),t.canalc()):t.$message({message:e.msg,type:"error"})}))})):0==this.multipleSelection.length?this.$message({type:"info",message:"请选择一条数据"}):(this.multipleSelection.forEach((function(e){e.dataServiceId=t.rowData.DATA_CLASS_ID,e.dataDpcId=t.rowData.DATA_CLASS_ID})),this.add(this.multipleSelection))},add:function(e){var t=this;c({gridDecodingList:e}).then((function(e){200==e.code?(t.$message({message:"操作成功！",type:"success"}),t.canalc()):t.$message({message:e.msg,type:"error"})}))}},mounted:function(){this.searchFun(),this.searchOptConfig(1)}},f=d,g=a("2877"),b=Object(g["a"])(f,l,r,!1,null,"44406227",null);t["default"]=b.exports}}]);