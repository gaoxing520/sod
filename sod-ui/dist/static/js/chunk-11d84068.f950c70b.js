(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11d84068"],{"587a":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"dailySyncDialog"},[a("el-table",{attrs:{data:e.tableData,"highlight-current-row":"",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index","min-width":"15",label:" "}}),e._v(" "),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"spendTime",label:"总耗时（毫秒）","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"counts",label:"处理记录总数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"insertCount",label:"成功插入数","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateCount",label:"成功更新数","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discardCount",label:"舍弃数","min-width":"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"error",label:"日志信息","min-width":"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"error",label:"详情","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.error,placement:"top"}},[a("el-button",{attrs:{size:"small"}},[e._v("错误信息")])],1)]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.dataTotal>0,expression:"dataTotal>0"}],attrs:{total:e.dataTotal,page:e.searchObj.pageNum,limit:e.searchObj.pageSize},on:{"update:page":function(t){return e.$set(e.searchObj,"pageNum",t)},"update:limit":function(t){return e.$set(e.searchObj,"pageSize",t)},pagination:e.searchFun}})],1)},i=[],n=a("9589"),r={name:"dailySyncDialog",props:{handletaskId:{type:String}},data:function(){return{tableData:[],dataTotal:0,searchObj:{pageNum:1,pageSize:10,taskId:""}}},created:function(){this.searchFun()},methods:{searchFun:function(){var e=this;this.searchObj.taskId=this.handletaskId,Object(n["e"])(this.searchObj).then((function(t){e.tableData=t.data.pageData,e.total=t.data.totalCount,e.loading=!1}))},viewCell:function(){}}},s=r,o=a("2877"),c=Object(o["a"])(s,l,i,!1,null,null,null);t["default"]=c.exports},"9c68":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryParams",staticClass:"searchBox",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"关键字查询"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.selectInfo,callback:function(t){e.$set(e.queryParams,"selectInfo",t)},expression:"queryParams.selectInfo"}},e._l(e.selectInfoSelect,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{model:{value:e.queryParams.searchValue,callback:function(t){e.$set(e.queryParams,"searchValue",t)},expression:"queryParams.searchValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行状态"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.queryParams.runState,callback:function(t){e.$set(e.queryParams,"runState",t)},expression:"queryParams.runState"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.runStateSelect,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:e.superClick}},[a("i",{staticClass:"el-icon-share"}),e._v("高级搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",{staticClass:"handleTableBox",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.addSync}},[e._v("添加")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"}},[e._v("批量启停")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"success",icon:"el-icon-download",size:"small"},on:{click:e.handleExport}},[e._v("导出")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"}},[e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"row-key":"id"},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"index","min-width":"15",label:" "}}),e._v(" "),a("el-table-column",{attrs:{type:"selection","min-width":"15"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskName",width:"200px",label:"任务名称","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"dataSourceId",width:"120px",label:"数据来源标识"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"dataFlowDirectionId",width:"120px",label:"数据流向标识"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"sourceDatabaseId",width:"120px",label:"源库"}}),e._v(" "),a("el-table-column",{attrs:{prop:"execIp",width:"120px",label:"执行主机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"execPort",width:"120px",label:"执行端口"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.updateTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"runState",label:"运行状态",formatter:e.getStatus}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return["error"==t.row.runState?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-video-play"}},[e._v("启动")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-video-pause"}},[e._v("停止")]),e._v(" "),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["schedule:backup:edit"],expression:"['schedule:backup:edit']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row,"edit")}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["schedule:sync:deleteSync"],expression:"['schedule:sync:deleteSync']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return e.handleUpdate(t.row,"detail")}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-reading"},on:{click:function(a){return e.viewDaiy(t.row)}}},[e._v("查看日志")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"日志列表",visible:e.dailyDataDialog,width:"90%"},on:{"update:visible":function(t){e.dailyDataDialog=t}}},[e.dailyDataDialog?a("dailySync",{attrs:{handletaskId:e.handletaskId}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.handleDialog,width:"80%"},on:{"update:visible":function(t){e.handleDialog=t}}},[e.handleDialog?a("handleSync",{ref:"myHandleServer",attrs:{handleObj:e.handleObj},on:{resetQuery:e.resetQuery}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"筛选",visible:e.dialogSuperSearch,"before-close":e.closeSuperSearch},on:{"update:visible":function(t){e.dialogSuperSearch=t}}},[e.dialogSuperSearch?a("super-search",{ref:"supersearchinfo",attrs:{superObj:e.superObj},on:{getList:e.getList}}):e._e()],1)],1)},i=[],n=(a("a481"),a("28a5"),a("ac6a"),a("9589")),r=a("587a"),s=a("3979"),o=a("7d2a"),c={components:{dailySync:r["default"],handleSync:s["default"],SuperSearch:o["a"]},data:function(){return{dailyDataDialog:!1,handletaskId:"",loading:!0,queryParams:{pageNum:1,pageSize:10,selectInfo:"taskName",searchValue:"",runState:"",params:{orderBy:{updateTime:"desc"}}},selectInfoSelect:[{value:"taskName",label:"任务名称"},{value:"sourceDBId",label:"源库"},{value:"dataSourceId",label:"数据来源标识"},{value:"flowDir",label:"数据流向标识"}],runStateSelect:[{value:"01",label:"运行中"},{value:"02",label:"运行出错"},{value:"03",label:"未启动"},{value:"04",label:"停止中"}],total:0,tableData:[],dialogTitle:"",handleDialog:!1,dialogSuperSearch:!1,superObj:{}}},created:function(){this.getList()},methods:{sortChange:function(e,t,a){var l={};"ascending"==e.order?l.updateTime="asc":l.updateTime="desc",this.queryParams.params.orderBy=l,this.handleQuery()},handleExport:function(){var e=this;Object(n["b"])(this.queryParams).then((function(t){e.downloadfileCommon(t)}))},table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},handleQuery:function(){this.getList()},getList:function(e){var t=this;if(this.selectInfoSelect.forEach((function(e){e.value==t.queryParams.selectInfo&&(t.queryParams[e.value]=t.queryParams.searchValue)})),e&&e.domains){for(var a=e.domains,l={},i=0;i<a.length;i++)l[a[i].select]=a[i].value;Object.assign(this.queryParams,l)}console.log(this.queryParams),this.loading=!0,Object(n["h"])(this.queryParams).then((function(e){t.tableData=e.data.pageData,t.total=e.data.totalCount,t.loading=!1}))},resetQuery:function(){this.queryParams={pageNum:1,pageSize:10,selectInfo:"taskName",searchValue:"",runState:""},this.handleDialog=!1,this.dailyDataDialog=!1,this.getList()},superClick:function(){this.superObj={},this.superObj.pageName="数据同步",this.dialogSuperSearch=!0},getStatus:function(e){var t=e.runState.split("|"),a="";return"true"==t[0]?a="运行中":"false"==t[0]?""==t[1]?a="停止中":(a="<span>运行出错</span>",t[1]=t[1].replace(/[\r\n]/g,"")):"error"==t[0]&&(a="未启动"),a},handleAdd:function(){this.handleDialog=!0},viewDaiy:function(e){this.handletaskId=e.id,this.dailyDataDialog=!0},addSync:function(){this.dialogTitle="新增",this.handleDialog=!0,this.handleObj={}},closeSuperSearch:function(){this.resetQuery(),this.dialogSuperSearch=!1},handleDelete:function(e){var t=this,a=e.id;this.$confirm('是否确认删除任务编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(n["a"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleUpdate:function(e,t){var a=this,l=e.id;this.dialogTitle="edit"==t?"修改":"查看详情",Object(n["d"])(l).then((function(e){a.handleDialog=!0,a.handleObj=e.data,a.handleObj.ipAndPort=a.handleObj.execIp+":"+a.handleObj.execPort,a.handleObj.targetTable=a.handleObj.targetRelation[0].targetTableId,a.handleObj.handleType=t,console.log(a.handleObj)}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,l,i,!1,null,null,null);t["default"]=p.exports}}]);