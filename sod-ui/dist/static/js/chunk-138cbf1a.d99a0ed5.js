(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-138cbf1a","chunk-28f558e8","chunk-84a024a0","chunk-4b3d6976"],{"28cf":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"handleClearDialog"},[a("el-form",{ref:"ruleForm",attrs:{model:e.msgFormDialog,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"物理库",prop:"databaseId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择物理库"},on:{change:function(t){return e.selectByDatabaseIds(t,"")}},model:{value:e.msgFormDialog.databaseId,callback:function(t){e.$set(e.msgFormDialog,"databaseId",t)},expression:"msgFormDialog.databaseId"}},e._l(e.databaseOptions,(function(e){return a("el-option",{key:e.KEY,attrs:{label:e.VALUE,value:e.KEY}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资料名称",prop:"dataClassId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择资料"},on:{change:e.selectTable},model:{value:e.msgFormDialog.dataClassId,callback:function(t){e.$set(e.msgFormDialog,"dataClassId",t)},expression:"msgFormDialog.dataClassId"}},e._l(e.dataClassIdOptions,(function(e){return a("el-option",{key:e.KEY,attrs:{label:e.VALUE,value:e.KEY}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"清除条件",prop:"conditions"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择清除条件",filterable:""},model:{value:e.msgFormDialog.conditions,callback:function(t){e.$set(e.msgFormDialog,"conditions",t)},expression:"msgFormDialog.conditions"}},e._l(e.conditionsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.msgFormDialog.tableName,callback:function(t){e.$set(e.msgFormDialog,"tableName",t)},expression:"msgFormDialog.tableName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"四级编码",prop:"ddataId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.msgFormDialog.ddataId,callback:function(t){e.$set(e.msgFormDialog,"ddataId",t)},expression:"msgFormDialog.ddataId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"清除限制频率",prop:"clearLimit"}},[a("el-input",{attrs:{placeholder:"请输入清除限制频率单位为秒"},model:{value:e.msgFormDialog.clearLimit,callback:function(t){e.$set(e.msgFormDialog,"clearLimit",t)},expression:"msgFormDialog.clearLimit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"执行策略",prop:"jobCron"}},[a("el-input",{staticStyle:{width:"174px"},attrs:{placeholder:"请输入执行策略"},model:{value:e.msgFormDialog.jobCron,callback:function(t){e.$set(e.msgFormDialog,"jobCron",t)},expression:"msgFormDialog.jobCron"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.cronDialogVisible=!0}}},[e._v("执行策略")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否告警",prop:"isAlarm"}},[a("el-radio-group",{model:{value:e.msgFormDialog.isAlarm,callback:function(t){e.$set(e.msgFormDialog,"isAlarm",t)},expression:"msgFormDialog.isAlarm"}},e._l(e.alarmOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"超时时间",prop:"executorTimeout"}},[a("el-input",{attrs:{placeholder:"请输入超时时间单位为分钟"},model:{value:e.msgFormDialog.executorTimeout,callback:function(t){e.$set(e.msgFormDialog,"executorTimeout",t)},expression:"msgFormDialog.executorTimeout"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.msgFormDialog.jobDesc,callback:function(t){e.$set(e.msgFormDialog,"jobDesc",t)},expression:"msgFormDialog.jobDesc"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelDialog("ruleForm")}}},[e._v("取 消")])],1),e._v(" "),e.cronDialogVisible?a("Cron",{attrs:{"append-to-body":"",cronDialogVisible:e.cronDialogVisible},on:{closeCron:e.closeCron,setCron:e.setCron}}):e._e()],1)},r=[],l=(a("96cf"),a("3b8d")),i=a("3d09"),s=a("3ea7"),n={name:"handleClearDialog",props:{handleObj:{type:Object}},components:{Cron:i["a"]},data:function(){return{alarmOptions:[],databaseOptions:[],dataClassIdOptions:[],conditionsOptions:[],msgFormDialog:{databaseId:"",dataClassId:"",conditions:"",tableName:"",ddataId:"",clearLimit:"",jobCron:"",isAlarm:"",executorTimeout:"",jobDesc:""},rules:{databaseId:[{required:!0,message:"物理库不能为空",trigger:"blur"}],dataClassId:[{required:!0,message:"资料名称不能为空",trigger:"blur"}],jobCron:[{required:!0,message:"执行策略不能为空",trigger:"blur"}],executorTimeout:[{required:!0,message:"超时时间不能为空",trigger:"blur"}],clearLimit:[{required:!0,message:"限制条数不能为空",trigger:"blur"}]},cronDialogVisible:!1}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getDicts("job_is_alarm").then((function(e){t.alarmOptions=e.data})),e.next=3,Object(s["e"])().then((function(e){t.databaseOptions=e.data}));case 3:return e.next=5,this.getDicts("database_clear_where").then((function(e){t.conditionsOptions=e.data}));case 5:if("资料存储策略"!=this.handleObj.pageName&&"存储结构概览"!=this.handleObj.pageName){e.next=11;break}return this.msgFormDialog.databaseId=this.handleObj.databaseId,e.next=9,this.selectByDatabaseIds(this.handleObj.databaseId,this.handleObj.dataClassId);case 9:return e.next=11,this.selectTable(this.handleObj.dataClassId);case 11:if(!this.handleObj.id){e.next=14;break}return e.next=14,Object(s["h"])(this.handleObj.id).then((function(e){t.selectByDatabaseIds(e.data.databaseId,e.data.dataClassId),t.msgFormDialog=e.data}));case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{selectTable:function(e){this.msgFormDialog.tableName="",this.findTable(this.msgFormDialog.databaseId,this.msgFormDialog.dataClassId)},findTable:function(e,t){var a=this;Object(s["g"])(e,t).then((function(e){a.msgFormDialog.ddataId=e.data.ddataId,a.msgFormDialog.tableName=e.data.tableName,a.msgFormDialog.vTableName=e.data.vTableName}))},selectByDatabaseIds:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["f"])(t,a).then((function(e){o.dataClassIdOptions=e.data,o.msgFormDialog.dataClassId=a}));case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),trueDialog:function(e){var t=this;this.msgFormDialog.triggerStatus=1,console.log(this.msgFormDialog),this.$refs[e].validate((function(e){e&&(void 0!=t.msgFormDialog.id?Object(s["l"])(t.msgFormDialog).then((function(e){200===e.code?(t.msgSuccess("修改成功"),t.$emit("cancelHandle")):t.msgError(e.msg)})):Object(s["a"])(t.msgFormDialog).then((function(e){200===e.code?(t.msgSuccess("新增成功"),t.$emit("cancelHandle")):t.msgError(e.msg)})))}))},cancelDialog:function(e){this.$emit("cancelHandle")},setCron:function(e){this.msgFormDialog.jobCron=e,this.cronDialogVisible=!1},closeCron:function(){this.cronDialogVisible=!1}}},c=n,d=(a("ff1d"),a("2877")),u=Object(d["a"])(c,o,r,!1,null,null,null);t["default"]=u.exports},"3ea7":function(e,t,a){"use strict";a.d(t,"i",(function(){return l})),a.d(t,"h",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"l",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"j",(function(){return g})),a.d(t,"k",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return h}));var o=a("b775"),r="http://10.40.79.18:8005";function l(e){return Object(o["a"])({url:r+"/schedule/clear/list",method:"get",params:e})}function i(e){return Object(o["a"])({url:r+"/schedule/clear/"+e,method:"get"})}function s(e){return Object(o["a"])({url:r+"/schedule/clear",method:"post",data:e})}function n(e){return Object(o["a"])({url:r+"/schedule/clear",method:"put",data:e})}function c(e){return Object(o["a"])({url:r+"/schedule/clear/"+e,method:"delete"})}function d(){return Object(o["a"])({url:r+"/schedule/clear/findDatabase",method:"get"})}function u(e,t){return Object(o["a"])({url:r+"/schedule/clear/findDataClassId",method:"get",params:{databaseId:e,dataClassId:t}})}function m(e,t){return Object(o["a"])({url:r+"/schedule/job/getByDatabaseIdAndClassId",method:"get",async:!0,params:{databaseId:e,dataClassId:t}})}function g(e){return Object(o["a"])({url:r+"/schedule/job/startById",method:"get",params:{id:e}})}function b(e){return Object(o["a"])({url:r+"/schedule/job/stop",method:"get",params:{id:e}})}function p(e){return Object(o["a"])({url:r+"/schedule/job/execute",method:"get",params:{id:e}})}function h(e){return Object(o["a"])({url:r+"/schedule/clear/export",method:"get",params:e,responseType:"arraybuffer"})}},"41d3":function(e,t,a){},"4b9f":function(e,t,a){"use strict";a.d(t,"i",(function(){return l})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"l",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"j",(function(){return g})),a.d(t,"k",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return h}));var o=a("b775"),r="http://10.40.79.18:8005";function l(e){return Object(o["a"])({url:r+"/schedule/backup/list",method:"get",params:e})}function i(e){return Object(o["a"])({url:r+"/schedule/backup/"+e,method:"get"})}function s(e){return Object(o["a"])({url:r+"/schedule/backup",method:"post",data:e})}function n(e){return Object(o["a"])({url:r+"/schedule/backup",method:"put",data:e})}function c(e){return Object(o["a"])({url:r+"/schedule/backup/"+e,method:"delete"})}function d(){return Object(o["a"])({url:r+"/schedule/backup/findDatabase",method:"get"})}function u(e,t){return Object(o["a"])({url:r+"/schedule/backup/findDataClassId",method:"get",params:{databaseId:e,dataClassId:t}})}function m(e,t){return Object(o["a"])({url:r+"/schedule/job/getByDatabaseIdAndClassId",method:"get",async:!0,params:{databaseId:e,dataClassId:t}})}function g(e){return Object(o["a"])({url:r+"/schedule/job/startById",method:"get",params:{id:e}})}function b(e){return Object(o["a"])({url:r+"/schedule/job/stop",method:"get",params:{id:e}})}function p(e){return Object(o["a"])({url:r+"/schedule/job/execute",method:"get",params:{id:e}})}function h(e){return Object(o["a"])({url:r+"/schedule/backup/export",method:"get",params:e,responseType:"arraybuffer"})}},"553d":function(e,t,a){"use strict";var o=a("70cc"),r=a.n(o);r.a},"70cc":function(e,t,a){},"70e3":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"handleMoveDialog"},[a("el-form",{ref:"ruleForm",attrs:{model:e.msgFormDialog,rules:e.rules,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"物理库",prop:"databaseId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择物理库"},on:{change:function(t){return e.selectByDatabaseIds(t,"")}},model:{value:e.msgFormDialog.databaseId,callback:function(t){e.$set(e.msgFormDialog,"databaseId",t)},expression:"msgFormDialog.databaseId"}},e._l(e.databaseOptions,(function(e){return a("el-option",{key:e.KEY,attrs:{label:e.VALUE,value:e.KEY}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资料名称",prop:"dataClassId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择资料"},on:{change:e.selectTable},model:{value:e.msgFormDialog.dataClassId,callback:function(t){e.$set(e.msgFormDialog,"dataClassId",t)},expression:"msgFormDialog.dataClassId"}},e._l(e.dataClassIdOptions,(function(e){return a("el-option",{key:e.KEY,attrs:{label:e.VALUE,value:e.KEY}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"迁移条件",prop:"conditions"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择迁移条件",filterable:""},model:{value:e.msgFormDialog.conditions,callback:function(t){e.$set(e.msgFormDialog,"conditions",t)},expression:"msgFormDialog.conditions"}},e._l(e.conditionsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"迁移源目录",prop:"sourceDirectory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.msgFormDialog.sourceDirectory,callback:function(t){e.$set(e.msgFormDialog,"sourceDirectory",t)},expression:"msgFormDialog.sourceDirectory"}},e._l(e.sourceDirectoryOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"迁移目标目录",prop:"targetDirectory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.msgFormDialog.targetDirectory,callback:function(t){e.$set(e.msgFormDialog,"targetDirectory",t)},expression:"msgFormDialog.targetDirectory"}},e._l(e.targetDirectoryOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.msgFormDialog.tableName,callback:function(t){e.$set(e.msgFormDialog,"tableName",t)},expression:"msgFormDialog.tableName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"四级编码",prop:"ddataId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.msgFormDialog.ddataId,callback:function(t){e.$set(e.msgFormDialog,"ddataId",t)},expression:"msgFormDialog.ddataId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"迁移限制频率",prop:"moveLimit"}},[a("el-input",{attrs:{placeholder:"请输入迁移限制频率单位为秒"},model:{value:e.msgFormDialog.moveLimit,callback:function(t){e.$set(e.msgFormDialog,"moveLimit",t)},expression:"msgFormDialog.moveLimit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"超时时间",prop:"executorTimeout"}},[a("el-input",{attrs:{placeholder:"请输入超时时间单位为分钟"},model:{value:e.msgFormDialog.executorTimeout,callback:function(t){e.$set(e.msgFormDialog,"executorTimeout",t)},expression:"msgFormDialog.executorTimeout"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否告警",prop:"isAlarm"}},[a("el-radio-group",{model:{value:e.msgFormDialog.isAlarm,callback:function(t){e.$set(e.msgFormDialog,"isAlarm",t)},expression:"msgFormDialog.isAlarm"}},e._l(e.alarmOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否清除",prop:"isClear"}},[a("el-radio-group",{model:{value:e.msgFormDialog.isClear,callback:function(t){e.$set(e.msgFormDialog,"isClear",t)},expression:"msgFormDialog.isClear"}},e._l(e.isClearOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"执行策略",prop:"jobCron"}},[a("el-input",{attrs:{placeholder:"请输入执行策略"},model:{value:e.msgFormDialog.jobCron,callback:function(t){e.$set(e.msgFormDialog,"jobCron",t)},expression:"msgFormDialog.jobCron"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.cronDialogVisible=!0}}},[e._v("执行策略")])],1),e._v(" "),a("el-col",{attrs:{span:24}},["0"!=e.msgFormDialog.isClear?a("el-form-item",{attrs:{label:"二级nas清除条件",prop:"clearConditions"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择二级nas清除条件",filterable:""},model:{value:e.msgFormDialog.clearConditions,callback:function(t){e.$set(e.msgFormDialog,"clearConditions",t)},expression:"msgFormDialog.clearConditions"}},e._l(e.clearConditionsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.msgFormDialog.jobDesc,callback:function(t){e.$set(e.msgFormDialog,"jobDesc",t)},expression:"msgFormDialog.jobDesc"}})],1)],1)],1)],1),e._v(" "),"数据注册审核"!=e.handleObj.pageName?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelDialog("ruleForm")}}},[e._v("取 消")])],1):e._e(),e._v(" "),e.cronDialogVisible?a("Cron",{attrs:{"append-to-body":"",cronDialogVisible:e.cronDialogVisible},on:{closeCron:e.closeCron,setCron:e.setCron}}):e._e()],1)},r=[],l=(a("96cf"),a("3b8d")),i=a("3d09"),s=a("f651"),n={name:"handleMoveDialog",props:{handleObj:{type:Object}},components:{Cron:i["a"]},data:function(){return{targetDirectoryOptions:[],sourceDirectoryOptions:[],isClearOptions:[],alarmOptions:[],databaseOptions:[],dataClassIdOptions:[],conditionsOptions:[],clearConditionsOptions:[],msgFormDialog:{databaseId:"",dataClassId:"",conditions:"",tableName:"",ddataId:"",clearLimit:"",jobCron:"",isAlarm:"",executorTimeout:"",jobDesc:""},rules:{databaseId:[{required:!0,message:"物理库不能为空",trigger:"blur"}],dataClassId:[{required:!0,message:"资料名称不能为空",trigger:"blur"}],jobCron:[{required:!0,message:"执行策略不能为空",trigger:"blur"}],executorTimeout:[{required:!0,message:"超时时间不能为空",trigger:"blur"}],moveLimit:[{required:!0,message:"限制条数不能为空",trigger:"blur"}],sourceDirectory:[{required:!0,message:"迁移源目录不能为空",trigger:"blur"}],targetDirectory:[{required:!0,message:"迁移目标目录不能为空",trigger:"blur"}]},cronDialogVisible:!1}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getDicts("job_is_alarm").then((function(e){t.alarmOptions=e.data})),e.next=3,Object(s["e"])().then((function(e){t.databaseOptions=e.data}));case 3:return e.next=5,this.getDicts("move_is_clear").then((function(e){t.isClearOptions=e.data}));case 5:return e.next=7,this.getDicts("move_source_directory").then((function(e){t.sourceDirectoryOptions=e.data}));case 7:return e.next=9,this.getDicts("move_target_directory").then((function(e){t.targetDirectoryOptions=e.data}));case 9:return e.next=11,this.getDicts("database_move_1_where").then((function(e){t.conditionsOptions=e.data}));case 11:return e.next=13,this.getDicts("database_move_2_where").then((function(e){t.clearConditionsOptions=e.data}));case 13:if("资料存储策略"!=this.handleObj.pageName&&"存储结构概览"!=this.handleObj.pageName&&"数据注册审核"!=this.handleObj.pageName){e.next=19;break}return this.msgFormDialog.databaseId=this.handleObj.databaseId,e.next=17,this.selectByDatabaseIds(this.handleObj.databaseId,this.handleObj.dataClassId);case 17:return e.next=19,this.selectTable(this.handleObj.dataClassId);case 19:if(!this.handleObj.id){e.next=22;break}return e.next=22,Object(s["h"])(this.handleObj.id).then((function(e){t.selectByDatabaseIds(e.data.databaseId,e.data.dataClassId),t.msgFormDialog=e.data}));case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{selectTable:function(e){this.msgFormDialog.tableName="",this.findTable(this.msgFormDialog.databaseId,this.msgFormDialog.dataClassId)},findTable:function(e,t){var a=this;Object(s["g"])(e,t).then((function(e){console.log(e),a.msgFormDialog.ddataId=e.data.ddataId,a.msgFormDialog.tableName=e.data.tableName,a.msgFormDialog.vTableName=e.data.vTableName}))},selectByDatabaseIds:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["f"])(t,a).then((function(e){o.dataClassIdOptions=e.data,o.msgFormDialog.dataClassId=a}));case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),trueDialog:function(e){var t=this;this.msgFormDialog.triggerStatus=1,console.log(this.msgFormDialog),this.$refs[e].validate((function(e){e&&(void 0!=t.msgFormDialog.id?Object(s["l"])(t.msgFormDialog).then((function(e){200===e.code?(t.msgSuccess("修改成功"),t.$emit("cancelHandle")):t.msgError(e.msg)})):Object(s["a"])(t.msgFormDialog).then((function(e){200===e.code?(t.msgSuccess("新增成功"),t.$emit("cancelHandle")):t.msgError(e.msg)})))}))},cancelDialog:function(e){this.$emit("cancelHandle")},setCron:function(e){this.msgFormDialog.jobCron=e,this.cronDialogVisible=!1},closeCron:function(){this.cronDialogVisible=!1}}},c=n,d=(a("9188"),a("2877")),u=Object(d["a"])(c,o,r,!1,null,null,null);t["default"]=u.exports},9188:function(e,t,a){"use strict";var o=a("eba0"),r=a.n(o);r.a},"92fe":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container storePolicy"},[a("el-row",{attrs:{gutter:40}},[a("el-col",{staticClass:"elTreeAsideBox",attrs:{span:5,xs:24}},[a("el-input",{staticClass:"filterText",attrs:{size:"small",placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper elTreeScroll"}},[a("el-tree",{ref:"elTree",staticClass:"el-tree",attrs:{"highlight-current":e.highlight,"node-key":"id",data:e.treeData,props:e.defaultProps,"default-expanded-keys":e.expandedKeys,"filter-node-method":e.filterNode},on:{"node-click":e.sourceNodeClick}})],1)],1),e._v(" "),a("el-col",{staticClass:"rightContainer",attrs:{span:19,xs:24}},[a("div",{staticClass:"headName"},[e._v(e._s(e.checkNode.name))]),e._v(" "),a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},e._l(e.groupList,(function(t,o){return a("el-row",{key:o,staticClass:"cardBox",attrs:{gutter:18}},[a("p",{staticClass:"el-p"},[a("i",{staticClass:"el-icon-s-management"}),e._v("\n            "+e._s(t.databaseName)+"\n          ")]),e._v(" "),e._l(t.policyDtos,(function(o,r){return a("el-col",{key:r,attrs:{span:12}},[a("el-card",{staticClass:"box-cards"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(o.policyName))])]),e._v(" "),a("p",[e._v("\n                是否配置：\n                "),"已配置"==o.isConfiguration?a("span",{staticStyle:{color:"#67C23A"}},[e._v(e._s(o.isConfiguration))]):"未配置"==o.isConfiguration?a("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(o.isConfiguration))]):"不需配置"==o.isConfiguration?a("span",[e._v(e._s(o.isConfiguration))]):e._e()]),e._v(" "),"同步"==o.policyName?a("p",[e._v("源库："+e._s(o.sourceRepository))]):e._e(),e._v(" "),"同步"==o.policyName?a("p",[e._v("源表："+e._s(o.sourceTable))]):e._e(),e._v(" "),a("p",[e._v("任务状态："+e._s(o.triggerStatus))]),e._v(" "),"备份"==o.policyName?a("p",[e._v("备份观测时间："+e._s(o.ddateTime))]):e._e(),e._v(" "),"清除"==o.policyName||"迁移"==o.policyName?a("p",[e._v("清除观测时间："+e._s(o.ddateTime))]):e._e(),e._v(" "),"同步"!=o.policyName?a("p",[e._v("执行耗时："+e._s(o.elapsedTime))]):e._e(),e._v(" "),a("el-popover",{attrs:{placement:"bottom",trigger:"hover","popper-class":"cornBox"}},[a("div",[a("ul",{staticClass:"ulInfoBox",staticStyle:{color:"#67C23A"}},[a("span",[e._v("下五次执行时间：")]),e._v(" "),e._l(o.nextTime,(function(t,o){return a("li",{key:o},[a("p",{staticClass:"rowInfo"},[a("span",[e._v(e._s(t))])])])}))],2)]),e._v(" "),"同步"!=o.policyName?a("p",{staticClass:"cornText",attrs:{slot:"reference",type:"text"},slot:"reference"},[a("span",[e._v("执行策略：")]),e._v(" "),a("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(o.jobCron))])]):e._e()]),e._v(" "),a("p",[e._v("\n                操作：\n                "),"未配置"==o.isConfiguration?a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-plus",title:"添加"},on:{click:function(a){return e.addRow(t,o.policyName)}}}):e._e(),e._v(" "),"已配置"==o.isConfiguration?a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",title:"修改"},on:{click:function(t){return e.editRow(o,o.policyName)}}}):e._e(),e._v(" "),"已配置"==o.isConfiguration?a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.deleteJob(o,o.policyName)}}}):e._e(),e._v(" "),"已配置"==o.isConfiguration&&"停止"==o.triggerStatus?a("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-caret-right",title:"启动"},on:{click:function(a){return e.startJob(t,o.policyName)}}}):e._e(),e._v(" "),"同步"==o.policyName&&"已配置"==o.isConfiguration&&"运行中"==o.triggerStatus?a("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-video-play",title:"重启"}}):e._e(),e._v(" "),"已配置"==o.isConfiguration&&"运行中"==o.triggerStatus?a("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-video-pause",title:"停止"},on:{click:function(a){return e.stopJob(t,o.policyName)}}}):e._e()],1)],1)],1)}))],2)})),1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.backUpDialog,width:"800px"},on:{"update:visible":function(t){e.backUpDialog=t}}},[e.backUpDialog?a("handleBackUp",{attrs:{handleObj:e.handleObj},on:{cancelHandle:e.cancelHandle}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.clearDialog,width:"800px"},on:{"update:visible":function(t){e.clearDialog=t}}},[e.clearDialog?a("handleClear",{attrs:{handleObj:e.handleObj},on:{cancelHandle:e.cancelHandle}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.moveDialog,width:"800px"},on:{"update:visible":function(t){e.moveDialog=t}}},[e.moveDialog?a("handleMove",{attrs:{handleObj:e.handleObj},on:{cancelHandle:e.cancelHandle}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.SyncDialog,width:"80%"},on:{"update:visible":function(t){e.SyncDialog=t}}},[e.SyncDialog?a("handleSync",{ref:"myHandleServer",attrs:{handleObj:e.handleObj},on:{resetQuery:e.cancelHandle}}):e._e()],1)],1)},r=[],l=(a("7f7f"),a("96cf"),a("3b8d")),i=a("28cf"),s=a("ea7a"),n=a("70e3"),c=a("3979"),d=a("b775"),u="http://10.40.79.18:8005";function m(e){return Object(d["a"])({url:u+"/strategyPolicy/strategyTree",method:"get",params:e})}function g(e){return Object(d["a"])({url:u+"/strategyPolicy/findData",method:"get",params:e})}var b=a("4b9f"),p=a("3ea7"),h=a("f651"),f={components:{handleBackUp:s["default"],handleClear:i["default"],handleMove:n["default"],handleSync:c["default"]},data:function(){return{filterText:"",highlight:!0,treeData:[],groupList:[],defaultProps:{children:"children",label:"name"},checkNode:{},expandedKeys:[],myTreedata:[],checkedNodeArr:[],dialogTitle:"",TreeDialog:!1,handleTreeObj:{},tableData:[],total:0,queryParams:{key_col:"",pageNum:1,pageSize:10},clearDialog:!1,backUpDialog:!1,moveDialog:!1,handleObj:{},SyncDialog:!1}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTreeData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{filterText:function(e){this.$refs.elTree.filter(e)}},methods:{getTreeData:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m().then((function(e){e.success?t.treeData=e.data:t.$message({type:"error",message:e.msg})}));case 2:0!=this.treeData.length&&this.getDefaultNode(this.treeData[0]),this.$refs.elTree.setCurrentKey(this.checkNode.id),this.sourceNodeClick(this.checkNode);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDefaultNode:function(e){if(e.children){var t=e.children[0];this.getDefaultNode(t)}else this.checkNode=e;this.expandedKeys.push(e.id)},sourceNodeClick:function(e){console.log(e),this.checkNode=e,this.getfindData(e.id)},getfindData:function(e){var t=this;g({classId:e}).then((function(e){"200"==e.code?t.groupList=e.data:t.msgError(e.msg)}))},resetData:function(e){var t=this;if(t.myTreedata.push({label:e.label,id:e.id,disabled:e.disabled}),e.children)for(var a=e.children,o=0;o<a.length;o++)t.resetData(a[o])},addRow:function(e,t){console.log(e),this.handleObj={},this.handleObj=e,this.handleObj.pageName="资料存储策略","备份"==t?(this.dialogTitle="添加数据备份配置信息",this.backUpDialog=!0):"清除"==t?(this.dialogTitle="添加数据清除配置信息",this.clearDialog=!0):"迁移"==t?(this.dialogTitle="添加数据迁移配置信息",this.moveDialog=!0):"同步"==t&&(this.dialogTitle="添加同步配置信息",this.SyncDialog=!0)},editRow:function(e,t){console.log(e),this.handleObj={},this.handleObj.id=e.taskId,"备份"==t?(this.dialogTitle="编辑数据备份配置信息",this.backUpDialog=!0):"清除"==t?(this.dialogTitle="编辑数据移清除配置信息",this.clearDialog=!0):"迁移"==t?(this.dialogTitle="编辑数据迁移配置信息",this.moveDialog=!0):"同步"==t&&(this.dialogTitle="编辑数据同步配置信息",this.SyncDialog=!0)},startJob:function(){},deleteJob:function(e,t){var a=this;this.$confirm('是否确认删除任务编号为"'+e.taskId+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return"备份"==t?Object(b["b"])(e.taskId):"清除"==t?Object(p["b"])(e.taskId):"迁移"==t?Object(h["b"])(e.taskId):void 0})).then((function(){a.getList(),a.msgSuccess("删除成功")})).catch((function(){}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},cancelHandle:function(){this.backUpDialog=!1,this.clearDialog=!1,this.moveDialog=!1,this.getfindData(this.checkNode.id)}}},D=f,v=(a("553d"),a("2877")),_=Object(v["a"])(D,o,r,!1,null,null,null);t["default"]=_.exports},c288:function(e,t,a){},c5e7:function(e,t,a){"use strict";var o=a("c288"),r=a.n(o);r.a},ea7a:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"handleClearDialog"},[a("el-form",{ref:"ruleForm",attrs:{model:e.msgFormDialog,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"物理库",prop:"databaseId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择物理库"},on:{change:function(t){return e.selectByDatabaseIds(t,"")}},model:{value:e.msgFormDialog.databaseId,callback:function(t){e.$set(e.msgFormDialog,"databaseId",t)},expression:"msgFormDialog.databaseId"}},e._l(e.databaseOptions,(function(e){return a("el-option",{key:e.KEY,attrs:{label:e.VALUE,value:e.KEY}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资料名称",prop:"dataClassId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择资料"},on:{change:e.selectTable},model:{value:e.msgFormDialog.dataClassId,callback:function(t){e.$set(e.msgFormDialog,"dataClassId",t)},expression:"msgFormDialog.dataClassId"}},e._l(e.dataClassIdOptions,(function(e){return a("el-option",{key:e.KEY,attrs:{label:e.VALUE,value:e.KEY}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"近时备份条件",prop:"conditions"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择近时备份条件",filterable:""},model:{value:e.msgFormDialog.conditions,callback:function(t){e.$set(e.msgFormDialog,"conditions",t)},expression:"msgFormDialog.conditions"}},e._l(e.conditionsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"远时备份条件",prop:"secondConditions"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择远时备份条件",filterable:""},model:{value:e.msgFormDialog.secondConditions,callback:function(t){e.$set(e.msgFormDialog,"secondConditions",t)},expression:"msgFormDialog.secondConditions"}},e._l(e.secondConditionsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"存储目录",prop:"storageDirectory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.msgFormDialog.storageDirectory,callback:function(t){e.$set(e.msgFormDialog,"storageDirectory",t)},expression:"msgFormDialog.storageDirectory"}},e._l(e.storageDirectoryOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.msgFormDialog.tableName,callback:function(t){e.$set(e.msgFormDialog,"tableName",t)},expression:"msgFormDialog.tableName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"四级编码",prop:"ddataId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.msgFormDialog.ddataId,callback:function(t){e.$set(e.msgFormDialog,"ddataId",t)},expression:"msgFormDialog.ddataId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"执行策略",prop:"jobCron"}},[a("el-input",{attrs:{placeholder:"请输入执行策略"},model:{value:e.msgFormDialog.jobCron,callback:function(t){e.$set(e.msgFormDialog,"jobCron",t)},expression:"msgFormDialog.jobCron"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.cronDialogVisible=!0}}},[e._v("执行策略")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否告警",prop:"isAlarm"}},[a("el-radio-group",{model:{value:e.msgFormDialog.isAlarm,callback:function(t){e.$set(e.msgFormDialog,"isAlarm",t)},expression:"msgFormDialog.isAlarm"}},e._l(e.alarmOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"超时时间",prop:"executorTimeout"}},[a("el-input",{attrs:{placeholder:"请输入超时时间单位为分钟"},model:{value:e.msgFormDialog.executorTimeout,callback:function(t){e.$set(e.msgFormDialog,"executorTimeout",t)},expression:"msgFormDialog.executorTimeout"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"失败重试次数",prop:"executorFailRetryCount"}},[a("el-input",{attrs:{placeholder:"请输入失败重试次数"},model:{value:e.msgFormDialog.executorFailRetryCount,callback:function(t){e.$set(e.msgFormDialog,"executorFailRetryCount",t)},expression:"msgFormDialog.executorFailRetryCount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"重试间隔时间",prop:"retryInterval"}},[a("el-input",{attrs:{placeholder:"请输入重试间隔时间单位为分钟"},model:{value:e.msgFormDialog.retryInterval,callback:function(t){e.$set(e.msgFormDialog,"retryInterval",t)},expression:"msgFormDialog.retryInterval"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.msgFormDialog.jobDesc,callback:function(t){e.$set(e.msgFormDialog,"jobDesc",t)},expression:"msgFormDialog.jobDesc"}})],1)],1)],1)],1),e._v(" "),"数据注册审核"!=e.handleObj.pageName?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelDialog("ruleForm")}}},[e._v("取 消")])],1):e._e(),e._v(" "),e.cronDialogVisible?a("Cron",{attrs:{"append-to-body":"",cronDialogVisible:e.cronDialogVisible},on:{closeCron:e.closeCron,setCron:e.setCron}}):e._e()],1)},r=[],l=(a("96cf"),a("3b8d")),i=a("bd86"),s=a("3d09"),n=a("4b9f"),c={name:"handleClearDialog",props:{handleObj:{type:Object}},components:{Cron:s["a"]},data:function(){var e;return{alarmOptions:[],databaseOptions:[],dataClassIdOptions:[],storageDirectoryOptions:[],conditionsOptions:[],secondConditionsOptions:[],msgFormDialog:(e={ddataId:"",dataClassId:"",conditions:"",secondConditions:"",storageDirectory:"",tableName:""},Object(i["a"])(e,"ddataId",""),Object(i["a"])(e,"jobCron",""),Object(i["a"])(e,"isAlarm",""),Object(i["a"])(e,"executorTimeout",""),Object(i["a"])(e,"executorFailRetryCount",""),Object(i["a"])(e,"retryInterval",""),Object(i["a"])(e,"jobDesc",""),e),rules:{databaseId:[{required:!0,message:"物理库不能为空",trigger:"change"}],dataClassId:[{required:!0,message:"资料名称不能为空",trigger:"change"}],storageDirectory:[{required:!0,message:"存储目录不能为空",trigger:"change"}],jobCron:[{required:!0,message:"执行策略不能为空",trigger:"blur"}],executorTimeout:[{required:!0,message:"超时时间不能为空",trigger:"blur"}],executorFailRetryCount:[{required:!0,message:"重试次数不能为空",trigger:"blur"}],retryInterval:[{required:!0,message:"重试间隔时间不能为空",trigger:"blur"}]},cronDialogVisible:!1}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getDicts("job_is_alarm").then((function(e){t.alarmOptions=e.data})),e.next=3,Object(n["e"])().then((function(e){t.databaseOptions=e.data}));case 3:return e.next=5,this.getDicts("backup_storage_directory").then((function(e){t.storageDirectoryOptions=e.data}));case 5:return e.next=7,this.getDicts("database_backup_near_where").then((function(e){t.conditionsOptions=e.data}));case 7:return e.next=9,this.getDicts("database_backup_far_where").then((function(e){t.secondConditionsOptions=e.data}));case 9:if("资料存储策略"!=this.handleObj.pageName&&"存储结构概览"!=this.handleObj.pageName&&"数据注册审核"!=this.handleObj.pageName){e.next=15;break}return this.msgFormDialog=this.handleObj,e.next=13,this.selectByDatabaseIds(this.handleObj.databaseId,this.handleObj.dataClassId);case 13:return e.next=15,this.selectTable(this.handleObj.dataClassId);case 15:if(!this.handleObj.id){e.next=18;break}return e.next=18,Object(n["f"])(this.handleObj.id).then((function(e){t.selectByDatabaseIds(e.data.databaseId,e.data.dataClassId),t.msgFormDialog=e.data}));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{selectTable:function(e){this.msgFormDialog.tableName="",this.findTable(this.msgFormDialog.databaseId,this.msgFormDialog.dataClassId)},findTable:function(e,t){var a=this;Object(n["h"])(e,t).then((function(e){a.msgFormDialog.ddataId=e.data.ddataId,a.msgFormDialog.tableName=e.data.tableName}))},selectByDatabaseIds:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["g"])(t,a).then((function(e){o.dataClassIdOptions=e.data,o.msgFormDialog.dataClassId=a}));case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),trueDialog:function(e){var t=this;this.msgFormDialog.triggerStatus=1,console.log(this.msgFormDialog),this.$refs[e].validate((function(e){e&&(void 0!=t.msgFormDialog.id?Object(n["l"])(t.msgFormDialog).then((function(e){200===e.code?(t.msgSuccess("修改成功"),t.$emit("cancelHandle")):t.msgError(e.msg)})):Object(n["a"])(t.msgFormDialog).then((function(e){200===e.code?(t.msgSuccess("新增成功"),t.$emit("cancelHandle")):t.msgError(e.msg)})))}))},cancelDialog:function(e){this.$emit("cancelHandle")},setCron:function(e){this.msgFormDialog.jobCron=e,this.cronDialogVisible=!1},closeCron:function(){this.cronDialogVisible=!1}}},d=c,u=(a("c5e7"),a("2877")),m=Object(u["a"])(d,o,r,!1,null,null,null);t["default"]=m.exports},eba0:function(e,t,a){},f651:function(e,t,a){"use strict";a.d(t,"i",(function(){return l})),a.d(t,"h",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"l",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"j",(function(){return g})),a.d(t,"k",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return h}));var o=a("b775"),r="http://10.40.79.18:8005";function l(e){return Object(o["a"])({url:r+"/schedule/move/list",method:"get",params:e})}function i(e){return Object(o["a"])({url:r+"/schedule/move/"+e,method:"get"})}function s(e){return Object(o["a"])({url:r+"/schedule/move",method:"post",data:e})}function n(e){return Object(o["a"])({url:r+"/schedule/move",method:"put",data:e})}function c(e){return Object(o["a"])({url:r+"/schedule/move/"+e,method:"delete"})}function d(){return Object(o["a"])({url:r+"/schedule/move/findDatabase",method:"get"})}function u(e,t){return Object(o["a"])({url:r+"/schedule/move/findDataClassId",method:"get",params:{databaseId:e,dataClassId:t}})}function m(e,t){return Object(o["a"])({url:r+"/schedule/job/getByDatabaseIdAndClassId",method:"get",async:!0,params:{databaseId:e,dataClassId:t}})}function g(e){return Object(o["a"])({url:r+"/schedule/job/startById",method:"get",params:{id:e}})}function b(e){return Object(o["a"])({url:r+"/schedule/job/stop",method:"get",params:{id:e}})}function p(e){return Object(o["a"])({url:r+"/schedule/job/execute",method:"get",params:{id:e}})}function h(e){return Object(o["a"])({url:r+"/schedule/move/export",method:"get",params:e,responseType:"arraybuffer"})}},ff1d:function(e,t,a){"use strict";var o=a("41d3"),r=a.n(o);r.a}}]);