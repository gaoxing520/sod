(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19ee40b8"],{b930:function(t,e,a){},c5a0:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container sqlTemplateMangement"},[a("el-row",[t._l(t.sqlData,(function(e,l){return a("el-col",{key:l,staticClass:"colClass",attrs:{span:4,offset:0}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.databaseName))])]),t._v(" "),a("div",{staticStyle:{padding:"12px"}},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(a){return t.editSqlTemplate(e)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small",round:""},on:{click:function(a){return t.deleteSqlTemplate(e)}}},[t._v("删除")])],1)])],1)})),t._v(" "),a("el-col",{staticClass:"colClass addTemplate",attrs:{span:4}},[a("el-card",[a("div",{staticClass:"addBox",on:{click:function(e){return t.addSqlTemplate()}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("h4",{staticStyle:{"text-align":"center"}},[t._v("点击添加")])])])],1)],2),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"sqlTemDialog",attrs:{title:t.dialogTitle,width:"70%",visible:t.handleDailyVisible,"append-to-body":""},on:{"update:visible":function(e){t.handleDailyVisible=e},close:t.closeDialog}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"数据库厂商："}},[a("el-select",{attrs:{size:"small",disabled:"编辑模板"==t.dialogTitle},model:{value:t.handleSqlTemplate.databaseServer,callback:function(e){t.$set(t.handleSqlTemplate,"databaseServer",e)},expression:"handleSqlTemplate.databaseServer"}},t._l(t.databaseList,(function(t){return a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:""+t.dictValue}})})),1)],1)],1),t._v(" "),a("el-row",{staticClass:"rowBoxBtn"},[a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${tableName}")}}},[t._v("表名称")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${databaseName}")}}},[t._v("库名称")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${columnInfo}")}}},[t._v("字段信息")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${primaryColumn}")}}},[t._v("主键字段")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${tableDescription}")}}},[t._v("索引字段")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${indexColumn}")}}},[t._v("表描描述")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${DPartitionKey}")}}},[t._v("分库键")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"funButton",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.autoFillIn("${TPartitionKey}")}}},[t._v("分表键")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:15}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.handleSqlTemplate.template,expression:"handleSqlTemplate.template"}],staticClass:"textClass",attrs:{id:"addtextareaId"},domProps:{value:t.handleSqlTemplate.template},on:{input:function(e){e.target.composing||t.$set(t.handleSqlTemplate,"template",e.target.value)}}})])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"funButton",attrs:{type:"primary"},on:{click:function(e){return t.trueDialog()}}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"funButton",on:{click:function(e){return t.closeDialog()}}},[t._v("取消")])],1)],1)],1)},n=[],s=a("b775"),i="http://10.40.79.18:8005";function o(){return Object(s["a"])({url:i+"/sqlTemplate/findAll",method:"get"})}function r(t){return Object(s["a"])({url:i+"/sqlTemplate/add",method:"post",params:t})}function c(t){return Object(s["a"])({url:i+"/sqlTemplate/checkSqlTemplate",method:"get",params:t})}function u(t){return Object(s["a"])({url:i+"/sqlTemplate/del",method:"delete",params:t})}function d(t){return Object(s["a"])({url:i+"/sqlTemplate/edit",method:"put",params:t})}var m={data:function(){return{loading:!0,queryParams:{pageNum:1,pageSize:10,user_fcst_ele:""},sqlData:[{id:65,databaseServer:"xugu",databaseName:"虚谷数据库",template:"${tableName}"}],databaseList:[],dialogTitle:"新增模板",handleDailyVisible:!1,handleSqlTemplate:{databaseServer:"",template:""}}},created:function(){this.getSqlData(),this.getDBList()},methods:{getSqlData:function(){var t=this;o().then((function(e){t.sqlData=e.data}))},getDBList:function(){var t=this;this.getDicts("sys_database_type").then((function(e){t.databaseList=e.data}))},editSqlTemplate:function(t){this.dialogTitle="编辑模板",this.handleDailyVisible=!0,this.handleSqlTemplate=t},deleteSqlTemplate:function(t){var e=this;this.$confirm("您确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u({ids:t.id}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getSqlData()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addSqlTemplate:function(){this.dialogTitle="新增模板",this.handleDailyVisible=!0},autoFillIn:function(t){this.handleSqlTemplate.template+=t},trueDialog:function(){var t=this;"新增模板"==this.dialogTitle?c({databaseServer:this.handleSqlTemplate.databaseServer}).then((function(e){e.data.length>=1?t.$message({type:"warning",message:"此数据库已经添加，不可以重复添加"}):r(t.handleSqlTemplate).then((function(e){200===e.code&&(t.$message({type:"success",message:"新增成功"}),t.handleDailyVisible=!1,t.getSqlData())}))})):d(this.handleSqlTemplate).then((function(e){200===e.code&&(t.$message({type:"success",message:"编辑成功"}),t.handleDailyVisible=!1,t.getSqlData())}))},closeDialog:function(){this.handleDailyVisible=!1}}},p=m,f=(a("d92a"),a("2877")),h=Object(f["a"])(p,l,n,!1,null,null,null);e["default"]=h.exports},d92a:function(t,e,a){"use strict";var l=a("b930"),n=a.n(l);n.a}}]);