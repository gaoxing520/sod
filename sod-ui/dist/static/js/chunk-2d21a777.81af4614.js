(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a777"],{bc44:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("el-form",{ref:"queryForm",staticClass:"searchBox",attrs:{model:e.queryParams,inline:!0}},[t("el-form-item",{attrs:{label:"数据库ID:"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入数据库ID"},model:{value:e.queryParams.id,callback:function(a){e.$set(e.queryParams,"id",a)},expression:"queryParams.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"数据库名称:"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入数据库名称"},model:{value:e.queryParams.databaseName,callback:function(a){e.$set(e.queryParams,"databaseName",a)},expression:"queryParams.databaseName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")])],1)],1),e._v(" "),t("el-row",{staticClass:"handleTableBox",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(a){return e.showDialog("add")}}},[e._v("添加")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.showDialog("edit")}}},[e._v("编辑")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:e.deleteCell}},[e._v("删除")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticClass:"unChoseAll",attrs:{data:e.tableData,"row-key":"id","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{prop:"id",label:"数据库ID","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{prop:"databaseName",label:"数据库名称","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{prop:"databaseInstance",label:"数据库实例"}}),e._v(" "),t("el-table-column",{attrs:{prop:"databaseType",label:"数据库类型"}}),e._v(" "),t("el-table-column",{attrs:{prop:"databaseIp",label:"IP地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mainBakType",label:"主备类型",formatter:e.getMainBak}}),e._v(" "),t("el-table-column",{attrs:{prop:"databaseCapacity",label:"存储容量",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"display_control",label:"显示控制",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.userDisplayControl?t("span",[e._v("显示")]):e._e(),e._v(" "),2==a.row.userDisplayControl?t("span",[e._v("不显示")]):e._e(),e._v(" "),3==a.row.userDisplayControl?t("span",[e._v("前端不显示")]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"checkConn",label:"运行状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return["1"==a.row.checkConn?t("el-button",{attrs:{type:"text",size:"mini",icon:"fa fa-chain"}},[e._v("连接正常")]):e._e(),e._v(" "),"1"!=a.row.checkConn?t("el-button",{attrs:{type:"text",size:"mini",icon:"fa fa fa-chain-broken"},on:{click:function(t){return e.checkError(a.row)}}},[e._v("连接异常")]):e._e()]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(a){return e.$set(e.queryParams,"pageNum",a)},"update:limit":function(a){return e.$set(e.queryParams,"pageSize",a)},pagination:e.getList}}),e._v(" "),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.msgFormDialog},on:{"update:visible":function(a){e.msgFormDialog=a}}},[e.msgFormDialog?t("handleDataBase",{attrs:{handleMsgObj:e.handleMsgObj},on:{cancelDialog:e.cancelDialog}}):e._e()],1)],1)},l=[],o=(t("ac6a"),t("ca31")),n=t("f7b9"),i=(t("7f10"),{components:{handleDataBase:n["default"]},data:function(){return{loading:!0,queryParams:{pageNum:1,pageSize:10,id:"",databaseName:""},tableData:[],total:0,actionUrl:"",showFile:!1,importHeaders:{enctype:"multipart/form-data"},choserow:[],dialogTitle:"",msgFormDialog:!1,ruleForm:{},handleMsgObj:{}}},created:function(){this.getList()},methods:{handleExport:function(){var e=this;Object(o["f"])(this.queryParams).then((function(a){e.downloadfileCommon(a)}))},cancelDialog:function(){this.msgFormDialog=!1,this.handleQuery()},table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,console.log(this.queryParams),Object(o["d"])(this.queryParams).then((function(a){e.tableData=a.data.pageData,e.total=a.data.totalCount,e.loading=!1}))},showDialog:function(e){if("add"==e)this.dialogTitle="添加",this.handleMsgObj={},this.msgFormDialog=!0;else{if(1!=this.choserow.length)return void this.$message.error("请选择一条数据!");this.dialogTitle="编辑",this.handleMsgObj=this.choserow[0],this.msgFormDialog=!0}},beforeAvatarUpload:function(e){var a="application/json"===e.type;a||this.$message.error("导入文件只能是 JSON 格式!")},handleAvatarSuccess:function(e,a){0==e.returnCode?(this.$message({type:"success",message:"导入成功"}),this.getList()):this.$message({type:"error",message:"导入失败"}),this.$refs.upload.clearFiles()},deleteCell:function(){var e=this;this.choserow.length>0?this.$confirm("数据删除后将无法恢复,确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];e.choserow.forEach((function(e){a.push(e.id)})),Object(o["e"])({ids:a.join(",")}).then((function(a){200==a.code&&(e.$message({message:"删除成功",type:"success"}),e.handleQuery())}))})).catch((function(){})):this.$message.error("请选择需要删除的数据库！")},checkError:function(e){var a=this;Object(o["a"])({id:e.id}).then((function(e){1==e.data.checkConn?a.$message({message:"连接正常",type:"success"}):a.$message({message:"连接异常",type:"error"})}))},getMainBak:function(e){var a="1"==e.mainBakType?"主库":"备份库";return a},handleSelectionChange:function(e){this.choserow=e}}}),r=i,c=t("2877"),u=Object(c["a"])(r,s,l,!1,null,null,null);a["default"]=u.exports}}]);