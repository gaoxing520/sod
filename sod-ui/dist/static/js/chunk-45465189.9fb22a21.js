(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45465189"],{"1d38":function(e,t,a){"use strict";var l=a("c4d9"),s=a.n(l);s.a},c4d9:function(e,t,a){},d563:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"productList"},[a("el-row",{staticClass:"areaTop"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteProduct}},[e._v("删除")])],1),e._v(" "),a("el-row",{staticClass:"areaTop"},[a("el-col",{attrs:{span:20}},[a("el-select",{staticClass:"areaSelect",attrs:{placeholder:"请选择区域",size:"small"},model:{value:e.selectArea,callback:function(t){e.selectArea=t},expression:"selectArea"}},e._l(e.optionsArea,(function(e){return a("el-option",{key:e.value,attrs:{label:e.area_id.split("[")[0],value:e.area_id}})})),1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area_id",label:"区域代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.area_id.split("[")[0]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"db_fcst_ele",label:"格点要素存储代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ele_service_id",label:"要素服务代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level_type",label:"层次类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grib_version",label:"grib版本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"field_type",label:"场类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"genprocess_type",label:"加工过程类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ele_name_cn",label:"要素中文名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ele_hours",label:"资料时次"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_unit",label:"时效单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level_list",label:"层次列表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_list",label:"预报时效列表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grid_pixel",label:"空间分辨率"}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"productDialog",attrs:{width:"80%",title:e.dialogTitle,visible:e.productDialog,"append-to-body":""},on:{"update:visible":function(t){e.productDialog=t}}},[a("el-form",{ref:"formName",attrs:{size:"mini",rules:e.rules,model:e.msgFormDialog,"label-width":"140px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"区域代码",prop:"area_id"}},[a("el-select",{staticClass:"areaSelect",attrs:{placeholder:"请选择区域",size:"small"},model:{value:e.msgFormDialog.area_id,callback:function(t){e.$set(e.msgFormDialog,"area_id",t)},expression:"msgFormDialog.area_id"}},e._l(e.optionsArea,(function(e){return a("el-option",{key:e.value,attrs:{label:e.area_id.split("[")[0],value:e.area_id}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"格点要素存储代码",prop:"db_fcst_ele"}},[a("el-select",{attrs:{placeholder:"格点要素存储代码",size:"small"},model:{value:e.msgFormDialog.db_fcst_ele,callback:function(t){e.$set(e.msgFormDialog,"db_fcst_ele",t)},expression:"msgFormDialog.db_fcst_ele"}},e._l(e.optionsFcst,(function(e){return a("el-option",{key:e.value,attrs:{label:e.ele_code_short,value:e.ele_code_short}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素服务代码",prop:"ele_service_id"}},[a("el-input",{attrs:{placeholder:"要素服务代码"},model:{value:e.msgFormDialog.ele_service_id,callback:function(t){e.$set(e.msgFormDialog,"ele_service_id",t)},expression:"msgFormDialog.ele_service_id"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次类型",prop:"level_type"}},[a("el-input",{attrs:{placeholder:"层次类型"},model:{value:e.msgFormDialog.level_type,callback:function(t){e.$set(e.msgFormDialog,"level_type",t)},expression:"msgFormDialog.level_type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"grib版本",prop:"grib_version"}},[a("el-input",{attrs:{placeholder:"grib版本"},model:{value:e.msgFormDialog.grib_version,callback:function(t){e.$set(e.msgFormDialog,"grib_version",t)},expression:"msgFormDialog.grib_version"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"场类型",prop:"field_type"}},[a("el-input",{attrs:{placeholder:"场类型"},model:{value:e.msgFormDialog.field_type,callback:function(t){e.$set(e.msgFormDialog,"field_type",t)},expression:"msgFormDialog.field_type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"加工过程类型",prop:"genprocess_type"}},[a("el-input",{attrs:{placeholder:"加工过程类型"},model:{value:e.msgFormDialog.genprocess_type,callback:function(t){e.$set(e.msgFormDialog,"genprocess_type",t)},expression:"msgFormDialog.genprocess_type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素中文名",prop:"ele_name_cn"}},[a("el-input",{attrs:{placeholder:"要素中文名"},model:{value:e.msgFormDialog.ele_name_cn,callback:function(t){e.$set(e.msgFormDialog,"ele_name_cn",t)},expression:"msgFormDialog.ele_name_cn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资料时次",prop:"ele_hours"}},[a("el-input",{attrs:{placeholder:"资料时次"},model:{value:e.msgFormDialog.ele_hours,callback:function(t){e.$set(e.msgFormDialog,"ele_hours",t)},expression:"msgFormDialog.ele_hours"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时效单位",prop:"time_unit"}},[a("el-input",{attrs:{placeholder:"时效单位"},model:{value:e.msgFormDialog.time_unit,callback:function(t){e.$set(e.msgFormDialog,"time_unit",t)},expression:"msgFormDialog.time_unit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次列表",prop:"level_list"}},[a("el-input",{attrs:{placeholder:"层次列表"},model:{value:e.msgFormDialog.level_list,callback:function(t){e.$set(e.msgFormDialog,"level_list",t)},expression:"msgFormDialog.level_list"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预报时效列表",prop:"time_list"}},[a("el-input",{attrs:{placeholder:"预报时效列表"},model:{value:e.msgFormDialog.time_list,callback:function(t){e.$set(e.msgFormDialog,"time_list",t)},expression:"msgFormDialog.time_list"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"空间分辨率",prop:"grid_pixel"}},[a("el-input",{attrs:{placeholder:"空间分辨率"},model:{value:e.msgFormDialog.grid_pixel,callback:function(t){e.$set(e.msgFormDialog,"grid_pixel",t)},expression:"msgFormDialog.grid_pixel"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancleHandle("formName")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueHandle("formName")}}},[e._v("确 定")])],1)],1)],1)},s=[],r=(a("ac6a"),a("db72")),i={name:"productList",props:{rowData:Object},components:{},data:function(){return{tableData:[],dataTotal:0,optionsArea:[],optionsFcst:[],multipleSelection:[],selectArea:"",searchObj:{area_id:this.selectArea,data_class_id:this.rowData.data_class_id},dialogTitle:"新增数据服务信息",productDialog:!1,msgFormDialog:{data_class_id:this.rowData.data_class_id},rules:{area_id:[{required:!0,message:"请选择区域代码",trigger:"change"}],db_fcst_ele:[{required:!0,message:"请选择格点要素存储代码",trigger:"change"}],ele_service_id:[{required:!0,message:"请输入要素服务代码",trigger:"blur"}],level_type:[{required:!0,message:"请输入层次类型",trigger:"blur"}],grib_version:[{required:!0,message:"请输入grib版本",trigger:"blur"}],field_type:[{required:!0,message:"请输入场类型",trigger:"blur"}],genprocess_type:[{required:!0,message:"请输入加工过程类型",trigger:"blur"}],ele_name_cn:[{required:!0,message:"请输入要素中文名",trigger:"blur"}],ele_hours:[{required:!0,message:"请输入资料时次",trigger:"blur"}],time_unit:[{required:!0,message:"请输入时效单位",trigger:"blur"}],level_list:[{required:!0,message:"请输入层次列表",trigger:"blur"}],time_list:[{required:!0,message:"请输入预报时效列表",trigger:"blur"}],grid_pixel:[{required:!0,message:"请输入空间分辨率",trigger:"blur"}]}}},methods:{searchFun:function(){var e=this,t=this.$refs.pagination.paginateObj;this.searchObj=Object(r["a"])({},this.searchObj,{},t),this.axios.get(interfaceObj.TableStructure_getProductModeDef,{params:this.searchObj}).then((function(t){e.tableData=t.data.data,e.dataTotal=t.data.total}))},paginationChange:function(){this.searchFun()},handleSelectionChange:function(e){this.multipleSelection=e},getoptionsArea:function(){var e=this;this.axios.get(interfaceObj.TableStructure_getGridArea,{params:{data_class_id:this.rowData.data_class_id}}).then((function(t){e.optionsArea=t.data.data}))},getoptionsFcst:function(){var e=this;this.axios.get(interfaceObj.TableStructure_modeEleQueryAll).then((function(t){e.optionsFcst=t.data.data}))},add:function(){this.dialogTitle="新增数据服务信息",this.getoptionsFcst(),this.productDialog=!0},edit:function(){1!=this.multipleSelection.length?this.$message({type:"info",message:"请选择一条数据"}):(this.dialogTitle="编辑数据服务信息",this.msgFormDialog=this.multipleSelection[0],this.productDialog=!0)},deleteProduct:function(){var e=this,t=[];this.multipleSelection.forEach((function(e){t.push(e.mode_data_def_id)})),this.axios.get(interfaceObj.TableStructure_deleteProductList,{params:{mode_data_def_id:t.join(",")}}).then((function(t){0==t.data.returnCode?(e.$message({type:"success",message:"删除成功"}),e.searchFun()):e.$message({type:"error",message:t.data.returnMessage})}))},cancleHandle:function(e){this.$refs[e].resetFields(),this.productDialog=!1},trueHandle:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return console.log("error submit!!"),!1;"新增数据服务信息"==t.dialogTitle?(t.msgFormDialog.data_class_id=t.rowData.data_class_id,delete t.msgFormDialog.data_service_id,t.axios.post(interfaceObj.TableStructure_addProductList,t.msgFormDialog).then((function(a){0==a.data.returnCode?(t.$message({type:"success",message:"新增成功"}),t.searchFun(),t.$refs[e].resetFields(),t.productDialog=!1):t.$message({type:"error",message:a.data.returnMessage})}))):(t.msgFormDialog.data_class_id=t.msgFormDialog.data_service_id,delete t.msgFormDialog.data_service_id,t.axios.post(interfaceObj.TableStructure_updateProductList,t.msgFormDialog).then((function(a){0==a.data.returnCode?(t.$message({type:"success",message:"编辑成功"}),t.searchFun(),t.$refs[e].resetFields(),t.productDialog=!1):t.$message({type:"error",message:a.data.returnMessage})})))}))},forParent:function(){this.searchFun(),this.getoptionsArea()}}},o=i,n=(a("1d38"),a("2877")),c=Object(n["a"])(o,l,s,!1,null,null,null);t["default"]=c.exports}}]);