(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57a13107","chunk-dfb2b100"],{1734:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container sodDeploy"},[a("el-form",{ref:"modelForm",staticClass:"searchBox",attrs:{inline:!0,model:e.queryParams}},[a("el-form-item",{attrs:{label:"功能名称"}},[a("el-input",{attrs:{size:"small"},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能类型"}},[a("el-select",{attrs:{size:"small"},on:{change:e.statusChange},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},[a("el-option",{attrs:{label:"全部",value:"全部"}}),e._v(" "),a("el-option",{attrs:{label:"目录",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"菜单",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"按钮",value:"2"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchFun}},[e._v("查询")])],1)],1),e._v(" "),a("el-row",{staticClass:"handleTableBox",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addCell}},[e._v("新增")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:e.deleteCell}},[e._v("删除")])],1)],1),e._v(" "),a("el-table",{ref:"sodTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",index:e.table_index}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"功能名称",width:"120px","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName",label:"上级功能"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resKey",label:"功能KEY","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"resUrl",label:"功能URL",width:"300px","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"功能类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.type?a("span",[e._v("目录")]):e._e(),e._v(" "),"1"==t.row.type?a("span",[e._v("菜单")]):e._e(),e._v(" "),"2"==t.row.type?a("span",[e._v("按钮")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"优先级",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.editCell(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.handleDialog,width:"650px"},on:{"update:visible":function(t){e.handleDialog=t}}},[e.handleDialog?a("handleSod",{attrs:{handleObj:e.handleObj},on:{cancelHandle:e.cancelHandle}}):e._e()],1)],1)},r=[],s=(a("ac6a"),a("db72")),o=a("c908"),n={name:"sodDeploy",components:{handleSod:o["default"]},data:function(){return{queryParams:{name:"",type:"",sort:"name",order:"asc"},tableData:[],dataTotal:0,handleDialog:!1,dialogTitle:"新增",handleObj:{}}},created:function(){},mounted:function(){},methods:{table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},statusChange:function(){this.searchFun("1")},searchFun:function(e){var t=this;e&&(this.$refs.pagination.paginateObj.page=1);var a=this.$refs.pagination.paginateObj;this.queryParams=Object(s["a"])({},this.queryParams,{},a),this.axios.post(interfaceObj.resourcesManage_queryResources,this.queryParams).then((function(e){t.tableData=e.data.data,t.dataTotal=e.data.total}))},paginationChange:function(){this.searchFun()},addCell:function(){this.handleObj={},this.dialogTitle="新增",this.handleDialog=!0},editCell:function(e){this.dialogTitle="编辑",this.handleObj=e,this.handleDialog=!0},deleteCell:function(e){var t=this,a=this.$refs.sodTable.selection;if(console.log(a),a.length>0){var l=[];a.forEach((function(e){l.push(e.id)})),l.length>0&&l.length==a.length?this.$confirm("数据删除后将无法恢复，确认删除?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.post(interfaceObj.resourcesManage_deleteResources,{ids:l.join(",")}).then((function(e){0==e.data.returnCode?t.$message({type:"success",message:"删除成功"}):t.$message({type:"error",message:e.data.returnMessage}),t.searchFun("1")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})})):this.$message({type:"error",message:"超级管理员不能删除"})}else this.$message({type:"error",message:"请选择一条数据"})},cancelHandle:function(e){this.handleObj={},this.handleDialog=!1,this.searchFun()}}},i=n,u=(a("1f3a"),a("2877")),m=Object(u["a"])(i,l,r,!1,null,null,null);t["default"]=m.exports},"1f3a":function(e,t,a){"use strict";var l=a("d47f"),r=a.n(l);r.a},aa2c:function(e,t,a){},b927:function(e,t,a){"use strict";var l=a("aa2c"),r=a.n(l);r.a},c908:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"handleSodDialog"},[a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.msgFormDialog,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"上级功能",prop:"parentId"}},[a("el-select",{attrs:{size:"medium"},model:{value:e.msgFormDialog.parentId,callback:function(t){e.$set(e.msgFormDialog,"parentId",t)},expression:"msgFormDialog.parentId"}},e._l(e.queryParentNames,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"功能名称",prop:"name"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.msgFormDialog.name,callback:function(t){e.$set(e.msgFormDialog,"name",t)},expression:"msgFormDialog.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能KEY",prop:"resKey"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.msgFormDialog.resKey,callback:function(t){e.$set(e.msgFormDialog,"resKey",t)},expression:"msgFormDialog.resKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能URL",prop:"resUrl"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.msgFormDialog.resUrl,callback:function(t){e.$set(e.msgFormDialog,"resUrl",t)},expression:"msgFormDialog.resUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能类型",prop:"type"}},[a("el-radio-group",{model:{value:e.msgFormDialog.type,callback:function(t){e.$set(e.msgFormDialog,"type",t)},expression:"msgFormDialog.type"}},[a("el-radio",{attrs:{label:0}},[e._v("目录")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("菜单")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("按钮")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"优先级",prop:"level"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.msgFormDialog.level,callback:function(t){e.$set(e.msgFormDialog,"level",t)},expression:"msgFormDialog.level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",size:"medium"},model:{value:e.msgFormDialog.description,callback:function(t){e.$set(e.msgFormDialog,"description",t)},expression:"msgFormDialog.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelDialog("ruleForm")}}},[e._v("取 消")])],1)],1)},r=[],s=(a("c5f6"),{name:"handleSodDialog",props:{handleObj:{type:Object}},data:function(){return{msgFormDialog:{parentId:"",name:"",resKey:"",resUrl:"",type:0,level:"",description:""},queryParentNames:[],rules:{parentId:[{required:!0,message:"请选择上级功能",trigger:"change"}],name:[{required:!0,message:"请输入功能名称",trigger:"blur"}],resKey:[{required:!0,message:"请输入功能KEY",trigger:"blur"}],resUrl:[{required:!0,message:"请输入功能URL",trigger:"blur"}],type:[{required:!0,message:"请选择功能类型",trigger:"change"}],level:[{required:!0,message:"请输入优先级",trigger:"blur"}]}}},created:function(){},methods:{initDetail:function(){void 0==this.handleObj.id||(this.msgFormDialog=this.handleObj,this.msgFormDialog.type=Number(this.handleObj.type))},getParentNames:function(){var e=this;this.axios.post(interfaceObj.resourcesManage_queryParentName).then((function(t){e.queryParentNames=t.data.data}))},trueDialog:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;void 0==t.handleObj.id?t.axios.post(interfaceObj.resourcesManage_addResources,t.msgFormDialog).then((function(e){0==e.data.returnCode?t.$message({type:"success",message:"新增成功"}):t.$message({type:"error",message:"新增失败"}),t.$emit("cancelHandle")})):t.axios.post(interfaceObj.resourcesManage_updateResources1,t.msgFormDialog).then((function(e){0==e.data.returnCode?t.$message({type:"success",message:"编辑成功"}):t.$message({type:"error",message:"编辑失败"}),t.$emit("cancelHandle")}))}))},cancelDialog:function(e){this.$emit("cancelHandle")}}}),o=s,n=(a("b927"),a("2877")),i=Object(n["a"])(o,l,r,!1,null,null,null);t["default"]=i.exports},d47f:function(e,t,a){}}]);