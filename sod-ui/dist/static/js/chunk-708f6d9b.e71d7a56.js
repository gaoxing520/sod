(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-708f6d9b"],{1626:function(e,t,a){"use strict";var r=a("f0e5"),o=a.n(r);o.a},"97fe":function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"e",(function(){return g}));var r=a("b775"),o="http://10.40.79.18:8005";function l(e){return Object(r["a"])({url:o+"/comMetaData/page",method:"get",params:e})}function i(e){return Object(r["a"])({url:o+"/comMetaData/recordPage",method:"get",params:e})}function n(e){return Object(r["a"])({url:o+"/comMetaData/addConfig",method:"post",params:e})}function s(e){return Object(r["a"])({url:o+"/comMetaData/editConfig",method:"put",params:e})}function m(e){return Object(r["a"])({url:o+"/comMetaData/delConfig",method:"delete",params:e})}function c(e){return Object(r["a"])({url:o+"/comMetaData/delRecord",method:"delete",params:e})}function u(e){return Object(r["a"])({url:o+"/comMetaData/syncDataNow",method:"get",params:e})}function g(e){return Object(r["a"])({url:o+"/comMetaData/findCfgByPk",method:"get",params:e})}},"9f8d":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("b775"),o="http://10.40.79.18:8005";function l(){return Object(r["a"])({url:o+"/system/dict/data/dictType/sys_mmd_sync_table",method:"get"})}},db16:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"handleTaskCommonDialog"},[a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.msgFormDialog,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"taskName",label:"任务名称:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.msgFormDialog.taskName,callback:function(t){e.$set(e.msgFormDialog,"taskName",t)},expression:"msgFormDialog.taskName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"tableName",label:"表名:"}},[a("el-select",{attrs:{size:"small",filterable:""},model:{value:e.msgFormDialog.tableName,callback:function(t){e.$set(e.msgFormDialog,"tableName",t)},expression:"msgFormDialog.tableName"}},e._l(e.tableNames,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dictValue,value:e.dictValue}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"apiUrl",label:"接口url:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.msgFormDialog.apiUrl,callback:function(t){e.$set(e.msgFormDialog,"apiUrl",t)},expression:"msgFormDialog.apiUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"apiType",label:"同步类型:"}},[a("el-select",{attrs:{size:"small",filterable:""},model:{value:e.msgFormDialog.apiType,callback:function(t){e.$set(e.msgFormDialog,"apiType",t)},expression:"msgFormDialog.apiType"}},[a("el-option",{attrs:{label:"全量同步",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"增量同步",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"apiDataKey",label:"接口关键字:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.msgFormDialog.apiDataKey,callback:function(t){e.$set(e.msgFormDialog,"apiDataKey",t)},expression:"msgFormDialog.apiDataKey"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"primaryKey",label:"同步主键:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.msgFormDialog.primaryKey,callback:function(t){e.$set(e.msgFormDialog,"primaryKey",t)},expression:"msgFormDialog.primaryKey"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"jobCron",label:"执行策略:"}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.msgFormDialog.jobCron,callback:function(t){e.$set(e.msgFormDialog,"jobCron",t)},expression:"msgFormDialog.jobCron"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showStrategyDialog()}}},[e._v("配置策略")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelDialog("ruleForm")}}},[e._v("取 消")])],1),e._v(" "),e.cronDialogVisible?a("Cron",{attrs:{"append-to-body":"",cronDialogVisible:e.cronDialogVisible},on:{closeCron:e.closeCron,setCron:e.setCron}}):e._e()],1)},o=[],l=(a("96cf"),a("3b8d")),i=a("97fe"),n=a("9f8d"),s=a("3d09"),m={name:"handleTaskCommonDialog",components:{Cron:s["a"]},props:{handleObj:{type:Object}},data:function(){return{cronDialogVisible:!1,msgFormDialog:{taskName:"",tableName:"",apiUrl:"",apiType:"",apiDataKey:"",primaryKey:"",jobCron:""},tableNames:[],rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],tableName:[{required:!0,message:"选择表名",trigger:"change"}],apiUrl:[{required:!0,message:"请输入接口url",trigger:"blur"}],apiType:[{required:!0,message:"请选择同步类型",trigger:"change"}],apiDataKey:[{required:!0,message:"请输入接口关键字",trigger:"blur"}],jobCron:[{required:!0,message:"请输入执行策略",trigger:"blur"}]}}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.selectAllTaskName();case 2:if(!this.handleObj.id){e.next=5;break}return e.next=5,Object(i["e"])({id:this.handleObj.id}).then((function(e){200==e.code?t.msgFormDialog=e.data:t.$message({type:"error",message:"查询失败"})}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{trueDialog:function(e){var t=this;console.log(this.msgFormDialog),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.handleObj.id?Object(i["d"])(t.msgFormDialog).then((function(e){200==e.code?t.$message({type:"success",message:"编辑成功"}):t.$message({type:"error",message:"编辑失败"}),t.$emit("cancelHandle")})):Object(i["a"])(t.msgFormDialog).then((function(e){200==e.code?t.$message({type:"success",message:"新增成功"}):t.$message({type:"error",message:"新增失败"}),t.$emit("cancelHandle")}))}))},cancelDialog:function(e){this.$emit("cancelHandle")},selectAllTaskName:function(){var e=this;Object(n["a"])(this.queryParams).then((function(t){200==t.code&&(e.tableNames=t.data)}))},showStrategyDialog:function(){this.cronDialogVisible=!0},setCron:function(e){this.msgFormDialog.jobCron=e,this.cronDialogVisible=!1},closeCron:function(){this.cronDialogVisible=!1}}},c=m,u=(a("1626"),a("2877")),g=Object(u["a"])(c,r,o,!1,null,null,null);t["default"]=g.exports},f0e5:function(e,t,a){}}]);