(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b645fcc"],{6935:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"editDataUseDialog"},[a("div",{staticClass:"materialCon selScrollBar"},[a("el-table",{staticClass:"selScrollBar",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"数据用途选择",prop:"logicName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{checked:t.row.logicIschecked,label:t.row.logicName},on:{change:function(a){return e.clickLogicName(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"存储类型",prop:"logicStorageTypesEntityList"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{model:{value:t.row.typeIschecked,callback:function(a){e.$set(t.row,"typeIschecked",a)},expression:"scope.row.typeIschecked"}},e._l(t.row.logicStorageTypesEntityList,(function(r,o){return a("el-radio",{key:o,attrs:{label:r.storageName,disabled:!t.row.checkType},on:{change:function(a){return e.tableTypeChange(t.row,r.storageName)}}})})),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据库名称",prop:"logicDatabaseEntityList"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{model:{value:t.row.physicsNameIschecked,callback:function(a){e.$set(t.row,"physicsNameIschecked",a)},expression:"scope.row.physicsNameIschecked"}},e._l(t.row.logicDatabaseEntityList,(function(r,o){return a("el-radio",{key:o,attrs:{label:r.databaseName,disabled:!t.row.checkType},on:{change:function(a){return e.getSpecialLib(t.row,r.databaseId,r.databaseName)}}})})),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"专题库",prop:"specialArr"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small",disabled:!t.row.checkType},on:{change:function(a){return e.tableSpecialArrChange(t.row,t.row.selectModel)}},model:{value:t.row.selectModel,callback:function(a){e.$set(t.row,"selectModel",a)},expression:"scope.row.selectModel"}},[0!==t.row.specialArr.length?e._l(t.row.specialArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e.databaseName,value:e.id}})})):e._e()],2)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.makeSureSave("sourceForm")}}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:e.cancleSave}},[e._v("取消")])],1)])},o=[],n=(a("7514"),a("ac6a"),a("96cf"),a("3b8d")),c=a("ee9a"),s={props:{handleArry:{type:Array}},data:function(){return{tableData:[],choseRowsObj:{},aboutHandleSpecial:[]}},created:function(){console.log(this.handleArry),this.getTableData()},methods:{getTableData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["j"])().then((function(e){200==e.code?(t.tableData=e.data,t.tableData.forEach((function(e,a){t.$set(e,"selectModel",""),t.$set(e,"specialArr",[]),t.$set(e,"checkType",!1),t.$set(e,"typeIschecked",""),t.handleArry&&t.handleArry.length>0&&t.handleArry.forEach((function(a){var r={};e.logicFlag==a.logicFlag&&(t.$set(e,"logicIschecked",!0),r.logicFlag=e.logicFlag,t.clickLogicName(e,a),e.logicStorageTypesEntityList.forEach((function(r){r.storageType==a.storageType&&(t.$set(e,"typeIschecked",r.storageName),t.tableTypeChange(e,r.storageName))})),e.logicDatabaseEntityList.forEach(function(){var o=Object(n["a"])(regeneratorRuntime.mark((function o(n){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n.databaseName!=a.databasePName){o.next=6;break}return t.$set(e,"physicsNameIschecked",n.databaseName),o.next=4,t.getSpecialLib(e,n.databaseId,n.databaseName);case 4:t.$set(e,"selectModel",a.databaseName),t.aboutHandleSpecial.forEach((function(e){e.databaseName==a.databaseName&&(r.specialArr=[e],t.tableSpecialArrChange(r,e.id))}));case 6:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()))}))}))):t.$message({type:"error",message:e.msg})}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),clickLogicName:function(e,t){var a=this;e.checkType?this.tableData.find((function(t,r){if(t.logicFlag===e.logicFlag){var o=t.logicFlag;t.checkType=!1,delete a.choseRowsObj[o]}})):this.tableData.find((function(r,o){if(r.logicFlag===e.logicFlag){var n=r.logicFlag;r.checkType=!0,a.choseRowsObj[n]={},t&&t.id&&(console.log(t.id),a.choseRowsObj[n].id=t.id,a.choseRowsObj[n].version=t.version,a.choseRowsObj[n].createTime=t.createTime),a.choseRowsObj[n].logicFlag=e.logicFlag,a.choseRowsObj[n].logicName=e.logicName}}))},getSpecialLib:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a,r){var o,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.logicFlag,this.choseRowsObj[o].databasePName=r,e.next=4,Object(c["e"])({id:a}).then((function(e){200==e.code?(n.aboutHandleSpecial=e.data,t.specialArr=e.data):n.$message({type:"error",message:e.msg})})).catch((function(e){console.log("出错了，错误信息："+e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}(),tableTypeChange:function(e,t){var a={};a=e.logicStorageTypesEntityList.find((function(e){return e.storageName===t}));var r="";r=a.storageType;var o=e.logicFlag;this.choseRowsObj[o].storageName=t,this.choseRowsObj[o].storageType=r},tableSpecialArrChange:function(e,t){var a={};a=e.specialArr.find((function(e){return e.id===t}));var r="";r=a.databaseName;var o=e.logicFlag;this.choseRowsObj[o].databaseId=t,this.choseRowsObj[o].databaseName=r},makeSureSave:function(){var e=[],t=[];for(var a in this.choseRowsObj)e.push(a);if(e.length<0)this.$message.error("请选择一条数据");else{for(var r=0;r<e.length;r++){if(void 0==this.choseRowsObj[e[r]].storageType)return this.$message.error("请选择"+this.choseRowsObj[e[r]].logicName+"的存储类型"),!1;if(void 0==this.choseRowsObj[e[r]].databasePName)return this.$message.error("请选择"+this.choseRowsObj[e[r]].logicName+"的数据库"),!1;if(void 0==this.choseRowsObj[e[r]].databaseId)return this.$message.error("请选择"+this.choseRowsObj[e[r]].logicName+"的专题库"),!1;var o={};o=this.choseRowsObj[e[r]],t.push(o)}this.$emit("trueEditDataUseDialog",t)}},cancleSave:function(){this.$emit("closeEditUseDialog")}}},i=s,l=(a("fbbf"),a("2877")),u=Object(l["a"])(i,r,o,!1,null,null,null);t["default"]=u.exports},7514:function(e,t,a){"use strict";var r=a("5ca1"),o=a("0a49")(5),n="find",c=!0;n in[]&&Array(1)[n]((function(){c=!1})),r(r.P+r.F*c,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},ee9a:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"l",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"k",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"i",(function(){return g})),a.d(t,"e",(function(){return b})),a.d(t,"d",(function(){return p}));var r=a("b775"),o="http://10.40.79.18:8005";function n(e){return Object(r["a"])({url:o+"/dm/dataClass/getListBYIn",method:"get",params:e})}function c(e){return Object(r["a"])({url:o+"/dm/dataClass/getLogicByDdataId",method:"get",params:e})}function s(e){return Object(r["a"])({url:o+"/dm/dataTable/gcl",method:"get",params:e})}function i(e){return Object(r["a"])({url:o+"/dm/dataClass/delByClass",method:"delete",params:e})}function l(e){return Object(r["a"])({url:o+"/dm/dataClass/save",method:"post",data:e})}function u(e){return Object(r["a"])({url:o+"/dm/dataClass/findByClassId",method:"get",params:e})}function d(e){return Object(r["a"])({url:o+"/dm/logicDefine/getAllLd",method:"get",params:e})}function h(e){return Object(r["a"])({url:o+"/dm/dataTable/paste",method:"post",params:e})}function f(){return Object(r["a"])({url:o+"/dm/product/enable",method:"get"})}function g(e){return Object(r["a"])({url:o+"/dm/dataClass/getNewDataClassId",method:"get",params:e})}function b(e){return Object(r["a"])({url:o+"/dm/database/findByDatabaseDefineId",method:"get",params:e})}function p(){return Object(r["a"])({url:o+"/api/dbfile/downloadFile",method:"get",params:{name:"add-column"},responseType:"arraybuffer"})}},fbbf:function(e,t,a){"use strict";var r=a("fd36"),o=a.n(r);o.a},fd36:function(e,t,a){}}]);