(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a37c6fe2"],{1:function(e,t){},2:function(e,t){},3:function(e,t){},"5bd8":function(e,t,a){"use strict";var l=a("9083"),n=a.n(l);n.a},"8d4f":function(e,t,a){"use strict";a.d(t,"q",(function(){return o})),a.d(t,"m",(function(){return r})),a.d(t,"I",(function(){return s})),a.d(t,"r",(function(){return i})),a.d(t,"G",(function(){return c})),a.d(t,"o",(function(){return u})),a.d(t,"p",(function(){return d})),a.d(t,"v",(function(){return m})),a.d(t,"E",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"J",(function(){return b})),a.d(t,"K",(function(){return h})),a.d(t,"n",(function(){return g})),a.d(t,"i",(function(){return v})),a.d(t,"g",(function(){return _})),a.d(t,"B",(function(){return y})),a.d(t,"y",(function(){return C})),a.d(t,"x",(function(){return D})),a.d(t,"j",(function(){return w})),a.d(t,"C",(function(){return E})),a.d(t,"u",(function(){return x})),a.d(t,"s",(function(){return j})),a.d(t,"L",(function(){return O})),a.d(t,"b",(function(){return S})),a.d(t,"w",(function(){return k})),a.d(t,"k",(function(){return M})),a.d(t,"F",(function(){return $})),a.d(t,"l",(function(){return I})),a.d(t,"d",(function(){return N})),a.d(t,"f",(function(){return T})),a.d(t,"e",(function(){return z})),a.d(t,"a",(function(){return B})),a.d(t,"h",(function(){return L})),a.d(t,"H",(function(){return P})),a.d(t,"A",(function(){return K})),a.d(t,"z",(function(){return A})),a.d(t,"t",(function(){return U})),a.d(t,"D",(function(){return F})),a.d(t,"M",(function(){return V}));var l=a("b775"),n="http://10.40.79.18:8005";function o(e){return Object(l["a"])({url:n+"/dm/dataTable/gcl",method:"get",params:e})}function r(e){return Object(l["a"])({url:n+"/dm/tableColumn/findByTableId",method:"get",params:e})}function s(e){return Object(l["a"])({url:n+"/dm/tableColumn/delIds",method:"delete",params:e})}function i(e){return Object(l["a"])({url:n+"/dm/sharding/getByTableId",method:"get",params:e})}function c(e){return Object(l["a"])({url:n+"/dm/sharding/saves",method:"post",data:e})}function u(e){return Object(l["a"])({url:n+"/dm/foreignKey/findByClassLogicId",method:"get",params:e})}function d(e){return Object(l["a"])({url:n+"/dm/foreignKey/save",method:"post",data:e})}function m(e){return Object(l["a"])({url:n+"/dm/dataclassnorm/get",method:"get",params:e})}function p(e){return Object(l["a"])({url:n+"/dm/dataclassnorm/save",method:"post",data:e})}function f(e){return Object(l["a"])({url:n+"/dm/dataTable/save",method:"post",data:e})}function b(e){return Object(l["a"])({url:n+"/dm/tableColumn/save",method:"post",data:e})}function h(e){return Object(l["a"])({url:n+"/dm/tableColumn/saveList",method:"post",data:e})}function g(e){return Object(l["a"])({url:n+"/dm/tableIndex/findByTableId",method:"get",params:e})}function v(e){return Object(l["a"])({url:n+"/dm/tableIndex/del",method:"delete",data:e})}function _(e){return Object(l["a"])({url:n+"/dm/datastatistics/list",method:"get",params:e})}function y(e){return Object(l["a"])({url:n+"/dm/dataTable/sample",method:"post",data:e})}function C(e){return Object(l["a"])({url:n+"/dm/gridarea/save",method:"post",data:e})}function D(e){return Object(l["a"])({url:n+"/dm/gridarea/list",method:"get",params:e})}function w(e){return Object(l["a"])({url:n+"/dm/dataserverbaseinfo/findByDataCLassId",method:"get",params:e})}function E(e){return Object(l["a"])({url:n+"/dm/dataserverbaseinfo/save",method:"post",data:e})}function x(e){return Object(l["a"])({url:n+"/dm/dataTable/getDictByType",method:"get",params:e})}function j(e){return Object(l["a"])({url:n+"/dm/tableColumn/get",method:"get",params:e})}function O(e){return Object(l["a"])({url:n+"/dm/tableIndex/save",method:"post",data:e})}function S(e){return Object(l["a"])({url:n+"/dictionary/define/all",method:"get"})}function k(e){return Object(l["a"])({url:n+"/dm/gridarea/delByIds",method:"delete",params:e})}function M(e){return Object(l["a"])({url:n+"/dm/gridarea/findByDataServiceId",method:"get",params:e})}function $(e){return Object(l["a"])({url:n+"/system/gribParameterDefine/queryAll",method:"get",params:e})}function I(e){return Object(l["a"])({url:n+"/system/serviceCodeDefine/findByDbFcstEle",method:"get",params:e})}function N(e){return Object(l["a"])({url:n+"/dm/dataserverconfig/save",method:"post",data:e})}function T(e){return Object(l["a"])({url:n+"/dm/dataserverconfig/list",method:"get",params:e})}function z(e){return Object(l["a"])({url:n+"/dm/dataserverconfig/get",method:"get",params:e})}function B(e){return Object(l["a"])({url:n+"/dm/dataserverconfig/addList",method:"post",data:e})}function L(e){return Object(l["a"])({url:n+"/dm/dataserverconfig/delByIds",method:"delete",params:e})}function P(e){return Object(l["a"])({url:n+"/dm/tableColumn/syncSCode",method:"post",data:e})}function K(e){return Object(l["a"])({url:n+"/dm/tableColumn/queryCmccElements",method:"get",params:e})}function A(e){return Object(l["a"])({url:n+"/managefield/findData",method:"get",params:e})}function U(e){return Object(l["a"])({url:n+"/dm/classbaseinfo/getDataClassBaseInfo",method:"get",params:e})}function F(e){return Object(l["a"])({url:n+"/dm/classbaseinfo/saveDataClassBaseInfo",method:"get",params:e})}function V(e){return Object(l["a"])({url:n+"/dm/dataClass/updateIsAllLine",method:"get",params:e})}},9083:function(e,t,a){},ee9a:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"l",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"k",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"i",(function(){return f})),a.d(t,"e",(function(){return b})),a.d(t,"d",(function(){return h}));var l=a("b775"),n="http://10.40.79.18:8005";function o(e){return Object(l["a"])({url:n+"/dm/dataClass/getListBYIn",method:"get",params:e})}function r(e){return Object(l["a"])({url:n+"/dm/dataClass/getLogicByDdataId",method:"get",params:e})}function s(e){return Object(l["a"])({url:n+"/dm/dataTable/gcl",method:"get",params:e})}function i(e){return Object(l["a"])({url:n+"/dm/dataClass/delByClass",method:"delete",params:e})}function c(e){return Object(l["a"])({url:n+"/dm/dataClass/save",method:"post",data:e})}function u(e){return Object(l["a"])({url:n+"/dm/dataClass/findByClassId",method:"get",params:e})}function d(e){return Object(l["a"])({url:n+"/dm/logicDefine/getAllLd",method:"get",params:e})}function m(e){return Object(l["a"])({url:n+"/dm/dataTable/paste",method:"post",params:e})}function p(){return Object(l["a"])({url:n+"/dm/product/enable",method:"get"})}function f(e){return Object(l["a"])({url:n+"/dm/dataClass/getNewDataClassId",method:"get",params:e})}function b(e){return Object(l["a"])({url:n+"/dm/database/findByDatabaseDefineId",method:"get",params:e})}function h(){return Object(l["a"])({url:n+"/api/dbfile/downloadFile",method:"get",params:{name:"add-column"},responseType:"arraybuffer"})}},f330:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"columnTemplate"},[a("el-button-group",{staticStyle:{padding:"8px"}},[e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-c-scale-to-original"},on:{click:e.getColumnTables}},[e._v("复用字段")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.columnAdd}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:e.columnEdit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.columnDelete}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-copy"},on:{click:e.columnCopy}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-add"},on:{click:e.columnPaste}},[e._v("粘贴")]),e._v(" "),e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-order"},on:{click:e.columnControl}},[e._v("质控字段")]):e._e()],1),e._v(" "),a("el-button-group",{staticStyle:{float:"right",padding:"8px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-sort"},on:{click:e.handleSort}},[e._v("排序")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:function(t){return e.exportCode("code")}}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload2"},on:{click:e.importTelplate}},[e._v("导入")]),e._v(" "),e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-operation"},on:{click:e.syncServe}},[e._v("同步服务名称")]):e._e()],1),e._v(" "),a("el-table",{ref:"selectionTable",attrs:{data:e.columnData,border:"",height:"550"},on:{"selection-change":function(t){return e.selColumnData=t},"row-click":e.handleClickTableRow}},[a("el-table-column",{attrs:{type:"index",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),e.tableStructureManageContral?a("el-table-column",{attrs:{label:"公共元数据字段",prop:"dbEleCode",width:"200px","show-overflow-tooltip":!0}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"字段编码",prop:"celementCode",width:"200px","show-overflow-tooltip":!0}}),e._v(" "),e.tableStructureManageContral?a("el-table-column",{attrs:{label:"服务代码",prop:"userEleCode",width:"200px","show-overflow-tooltip":!0}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"中文简称",prop:"eleName","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"数据类型",prop:"type",width:"100px","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"数据精度",prop:"accuracy",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素单位",prop:"unitCn",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可空",prop:"isNull",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isNull?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否可改",prop:"isUpdate",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isUpdate?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否显示",prop:"isShow",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isShow?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否主键",prop:"isPrimaryKey",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isNull?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"中文描述",prop:"nameCn",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否管理字段",prop:"isManager",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isManager?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否修改数据库",prop:"updateDatabase",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.updateDatabase?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"默认值",prop:"defaultValue",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",prop:"serialNumber",width:"100px"}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:"公共元数据",visible:e.dialogStatus.publicMatedataDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"publicMatedataDialog",t)}}},[a("div",[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activePublicName,callback:function(t){e.activePublicName=t},expression:"activePublicName"}},[a("el-tab-pane",{attrs:{label:"公共元数据字段",name:"first"}},[a("div",{staticClass:"tableSearch"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"数据元代码"}},[a("el-input",{attrs:{placeholder:"数据源代码",size:"small"},model:{value:e.searchMatedata.c_datatype,callback:function(t){e.$set(e.searchMatedata,"c_datatype",t)},expression:"searchMatedata.c_datatype"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文名称"}},[a("el-input",{attrs:{placeholder:"中文名称",size:"small"},model:{value:e.searchMatedata.c_datum_level,callback:function(t){e.$set(e.searchMatedata,"c_datum_level",t)},expression:"searchMatedata.c_datum_level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务名称"}},[a("el-input",{attrs:{placeholder:"服务名称",size:"small"},model:{value:e.searchMatedata.c_datumtype,callback:function(t){e.$set(e.searchMatedata,"c_datumtype",t)},expression:"searchMatedata.c_datumtype"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.searchFun("matedata")}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.pubData.matedata,border:"",height:"320"},on:{"selection-change":e.handleSelectionMatedata}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据元代码",prop:"celementCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"中文名称",prop:"c_element_namech"}}),e._v(" "),a("el-table-column",{attrs:{label:"英文名称",prop:"c_element_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据类型",prop:"c_datatype",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"计量单位",prop:"c_element_unit",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据精度",prop:"c_element_pre",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"特征值",prop:"c_charactervalue"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"c_status",width:"60px"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素说明",prop:"c_notes",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"服务名称",prop:"c_short_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否质控",prop:"c_is_control",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:t.row.switch,callback:function(a){e.$set(t.row,"switch",a)},expression:"scope.row.switch"}})]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"管理字段",name:"second"}},[a("div",{staticClass:"tableSearch"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"字段分组"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchMmdata.groupId,callback:function(t){e.$set(e.searchMmdata,"groupId",t)},expression:"searchMmdata.groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.AllManageGroup,(function(e){return a("el-option",{key:e.value,attrs:{label:e.groupId,value:e.groupId}})}))],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"字段名称"}},[a("el-input",{attrs:{placeholder:"字段名称",size:"small"},model:{value:e.searchMmdata.dbEleCode,callback:function(t){e.$set(e.searchMmdata,"dbEleCode",t)},expression:"searchMmdata.dbEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"中文名称"}},[a("el-input",{attrs:{placeholder:"中文名称",size:"small"},model:{value:e.searchMmdata.dbEleName,callback:function(t){e.$set(e.searchMmdata,"dbEleName",t)},expression:"searchMmdata.dbEleName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务名称"}},[a("el-input",{attrs:{placeholder:"服务名称",size:"small"},model:{value:e.searchMmdata.userEleCode,callback:function(t){e.$set(e.searchMmdata,"userEleCode",t)},expression:"searchMmdata.userEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btnmm",attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.searchFun("mmdata")}}},[e._v("搜索")])],1)],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.pubData.mmdata,border:"",height:"320"},on:{"selection-change":e.handleSelectionMmdata}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"字段名称",prop:"dbEleCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"服务名称",prop:"userEleCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"中文名称",prop:"dbEleName"}}),e._v(" "),a("el-table-column",{attrs:{label:"字段短名",prop:"eleName"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{label:"字段精度",prop:"data_precision",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可为空",prop:"isNull",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isNull?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否可更新",prop:"isUpdate",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isUpdate?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.truePublic}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStatus.publicMatedataDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:e.codeTitle,visible:e.dialogStatus.columnDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"columnDialog",t)}}},[a("el-form",{ref:"formCodeName",attrs:{size:"mini",rules:e.rules,model:e.columnEditData,"label-width":"140px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公共元数据字段",prop:"dbEleCode"}},[a("el-input",{attrs:{placeholder:"公共元数据字段",size:"small"},model:{value:e.columnEditData.dbEleCode,callback:function(t){e.$set(e.columnEditData,"dbEleCode",t)},expression:"columnEditData.dbEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"字段名称",prop:"celementCode"}},[a("el-input",{attrs:{placeholder:"字段名称",size:"small"},model:{value:e.columnEditData.celementCode,callback:function(t){e.$set(e.columnEditData,"celementCode",t)},expression:"columnEditData.celementCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"服务名称",prop:"userEleCode"}},[a("el-input",{attrs:{placeholder:"服务名称",size:"small"},model:{value:e.columnEditData.userEleCode,callback:function(t){e.$set(e.columnEditData,"userEleCode",t)},expression:"columnEditData.userEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中文简称",prop:"eleName"}},[a("el-input",{attrs:{placeholder:"中文简称",size:"small"},model:{value:e.columnEditData.eleName,callback:function(t){e.$set(e.columnEditData,"eleName",t)},expression:"columnEditData.eleName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据类型"},model:{value:e.columnEditData.type,callback:function(t){e.$set(e.columnEditData,"type",t)},expression:"columnEditData.type"}},e._l(e.dataTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素单位",prop:"unitCn"}},[a("el-input",{attrs:{placeholder:"要素单位",size:"small"},model:{value:e.columnEditData.unitCn,callback:function(t){e.$set(e.columnEditData,"unitCn",t)},expression:"columnEditData.unitCn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"数据精度"}},[a("el-input",{attrs:{placeholder:"数据精度",size:"small"},model:{value:e.columnEditData.accuracy,callback:function(t){e.$set(e.columnEditData,"accuracy",t)},expression:"columnEditData.accuracy"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否可空"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isNull,callback:function(t){e.$set(e.columnEditData,"isNull",t)},expression:"columnEditData.isNull"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否可改"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isUpdate,callback:function(t){e.$set(e.columnEditData,"isUpdate",t)},expression:"columnEditData.isUpdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isShow,callback:function(t){e.$set(e.columnEditData,"isShow",t)},expression:"columnEditData.isShow"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否主键"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isPrimaryKey,callback:function(t){e.$set(e.columnEditData,"isPrimaryKey",t)},expression:"columnEditData.isPrimaryKey"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否管理字段"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isManager,callback:function(t){e.$set(e.columnEditData,"isManager",t)},expression:"columnEditData.isManager"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"默认值"}},[a("el-input",{attrs:{placeholder:"默认值",size:"small"},model:{value:e.columnEditData.defaultValue,callback:function(t){e.$set(e.columnEditData,"defaultValue",t)},expression:"columnEditData.defaultValue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中文描述"}},[a("el-input",{attrs:{placeholder:"中文描述",size:"small"},model:{value:e.columnEditData.nameCn,callback:function(t){e.$set(e.columnEditData,"nameCn",t)},expression:"columnEditData.nameCn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序号",prop:"serialNumber"}},[a("el-input",{attrs:{placeholder:"序号",size:"small"},model:{value:e.columnEditData.serialNumber,callback:function(t){e.$set(e.columnEditData,"serialNumber",t)},expression:"columnEditData.serialNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"clear"})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueCode("formCodeName")}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancleCode("formCodeName")}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:"字段排序",visible:e.dialogStatus.codeSortDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"codeSortDialog",t)}}},[a("div",{staticClass:"dragBox"},[a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[a("el-alert",{attrs:{title:"请拖动字段实现排序",type:"success",closable:!1}}),e._v(" "),a("draggable",e._b({staticClass:"list-group",attrs:{tag:"ul"},on:{start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}},model:{value:e.dragList,callback:function(t){e.dragList=t},expression:"dragList"}},"draggable",e.dragOptions,!1),[a("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.dragList,(function(t){return a("li",{key:t.celementCode,staticClass:"list-group-item"},[a("i",{class:t.fixed?"fa fa-anchor":"glyphicon glyphicon-pushpin",attrs:{"aria-hidden":"true"},on:{click:function(e){t.fixed=!t.fixed}}}),e._v(" "),a("el-row",{staticClass:"sortRow"},[a("el-col",{attrs:{span:4}},[a("span",[e._v(e._s("序号:")+e._s(t.serialNumber))])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("span",[e._v(e._s("字段名称:")+e._s(t.celementCode))])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("span",[e._v(e._s("中文简称:")+e._s(t.eleName))])])],1)],1)})),0)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.trueSort}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStatus.codeSortDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"exportCodeDialog",attrs:{width:"30%",title:"操作",visible:e.exportInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.exportInnerVisible=t}}},[a("el-row",{attrs:{"v-if":e.exportInnerVisible}},[a("el-col",{attrs:{span:12}},[a("input-excel",{on:{getResult:e.getMyExcelData}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")])],1)],1)],1)],1)},n=[],o=(a("a481"),a("96cf"),a("3b8d")),r=(a("ac6a"),a("a8b3")),s=a("7ca0"),i=a("310e"),c=a.n(i),u=a("8d4f"),d=a("ee9a"),m=a("f6cd"),p=a("4b67"),f={props:{tableInfo:Object,tableType:String,rowData:Object},components:{draggable:c.a,inputExcel:r["a"]},data:function(){var e=function(e,t,a){var l="";"dbEleCode"==e.field?l="公共元数据字段":"celementCode"==e.field&&(l="字段名称"),""===t?a(new Error("请输入"+l)):Object(p["c"])(t)?a():a(new Error(l+"不允许输入小写字母和中文，且需以大写字母开头"))};return{tableStructureManageContral:!1,codeTitle:"新增字段",dialogStatus:{columnDialog:!1,publicMatedataDialog:!1,codeSortDialog:!1},exportInnerVisible:!1,filepath:"",columnEditData:{unitCn:"N",isManager:!1,isPrimaryKey:!1,isShow:!1,isUpdate:!1,isNull:!1},columnData:[],selColumnData:[],pubData:{matedata:[],mmdata:[]},searchMatedata:{c_datatype:"",c_datum_level:"",c_datumtype:""},searchMmdata:{groupId:"",dbEleCode:"",dbEleName:"",userEleCode:""},dataTypes:[],dragList:[],matedataSelection:[],mmdataSelection:[],activePublicName:"first",repeatIndex:0,rules:{dbEleCode:[{required:!0,validator:e,trigger:"blur"}],celementCode:[{required:!0,validator:e,trigger:"blur"}],userEleCode:[{required:!0,message:"请输入服务名称",trigger:"blur"}],eleName:[{required:!0,message:"请输入中文简称",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],unitCn:[{required:!0,message:"请输入要素单位",trigger:"blur"}],serialNumber:[{required:!0,message:"请输入序号",trigger:"blur"}]},fileTemp:null,fileListUpload:[],AllManageGroup:[]}},methods:{handleExport:function(){var e=this;Object(d["d"])().then((function(t){e.downloadfileCommon(t)}))},handleClickTableRow:function(e,t,a){this.$refs.selectionTable.toggleRowSelection(e)},getColumnTables:function(){this.getmatedata(),this.getmmdata(),this.matedataSelection=[],this.mmdataSelection=[],this.dialogStatus.publicMatedataDialog=!0},getmatedata:function(){var e=this;this.searchMatedata.c_datum_code=this.rowData.D_DATA_ID,console.log(this.searchMatedata),Object(u["A"])(this.searchMatedata).then((function(t){200==t.code&&(t.data.forEach((function(e){e.switch=!1})),e.pubData.matedata=t.data)}))},getmmdata:function(){var e=this;Object(u["z"])(this.searchMmdata).then((function(t){e.pubData.mmdata=t.data})).catch((function(e){}))},getAllGroup:function(){var e=this;Object(m["h"])().then((function(t){t.success?e.AllManageGroup=t.data:e.$message({type:"error",message:t.msg})}))},getCodeTable:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return void 0,"E-show"==this.tableType&&"true",e.next=4,Object(u["m"])({tableId:this.tableInfo.id}).then((function(e){200==e.code&&(t.columnData=e.data,t.$emit("reloadTableInfo"))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),columnAdd:function(){this.tableInfo.id?(this.columnEditData={unitCn:"N",isManager:!1,isPrimaryKey:!1,isShow:!1,isUpdate:!1,isNull:!1},this.getDictByTypeMethods("table_column_type"),this.codeTitle="新增字段",this.dialogStatus.columnDialog=!0):this.$message({type:"error",message:"表不存在"})},columnEdit:function(){var e=this;1!=this.selColumnData.length?this.$message({message:"请选择一条数据！",type:"warning"}):(this.codeTitle="编辑字段",this.getDictByTypeMethods("table_column_type"),Object(u["s"])({id:this.selColumnData[0].id}).then((function(t){200==t.code&&(e.columnEditData=t.data,e.dialogStatus.columnDialog=!0)})))},getDictByTypeMethods:function(e){var t=this;Object(u["u"])({dictType:e}).then((function(e){200==e.code&&(t.dataTypes=e.data)}))},columnDelete:function(){var e=this;0==this.selColumnData.length?this.$message({message:"请选择一条数据！",type:"warning"}):this.$confirm("确认要删除选中字段吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.selColumnData.forEach((function(e){t.push(e.id)})),console.log(t.join(",")),Object(u["I"])({ids:t.join(",")}).then((function(t){200==t.code?(e.$message({message:"删除成功",type:"success"}),e.getCodeTable()):e.$message({message:"删除失败",type:"warning"})}))})).catch((function(){}))},searchFun:function(e){"matedata"==e?this.getmatedata():"mmdata"==e&&this.getmmdata()},cancleCode:function(e){this.$refs[e].resetFields(),this.dialogStatus.columnDialog=!1},trueCode:function(e){var t=this;this.$refs[e].validate((function(a){a&&(t.columnEditData.tableId=t.tableInfo.id,"E-show"==t.tableType&&(t.columnEditData.isKvK="true"),console.log(t.columnEditData),Object(u["J"])(t.columnEditData).then((function(a){200==a.code?(t.$message({message:"操作成功",type:"success"}),t.$refs[e].resetFields(),t.dialogStatus.columnDialog=!1,t.getCodeTable(),t.columnEditData=[]):t.$message({type:"error",message:"操作失败"})})))}))},handleSort:function(){0==this.columnData.length&&this.$message({type:"error",message:"当前没有字段，无法排序"}),this.dragList=this.columnData,this.dialogStatus.codeSortDialog=!0},trueSort:function(){var e=this;this.dragList.forEach((function(e,t){e.serialNumber=t})),Object(u["K"])({tableColumnList:this.dragList}).then((function(t){200==t.code?(e.$message({message:"排序成功！",type:"success"}),e.getCodeTable()):e.$message({message:t.msg,type:"error"})})),this.dialogStatus.codeSortDialog=!1},exportCode:function(e){if(this.tableInfo.id)if("code"==e){var t=["公共元数据字段","字段编码","服务代码","中文简称","数据精度","要素单位","是否可空","是否可改","是否显示","是否主键","中文描述","是否管理字段","默认值","序号"],a=["dbEleCode","celementCode","userEleCode","eleName","accuracy","unitCn","isNull","isUpdate","isShow","isPrimaryKey","nameCn","isManager","updateDatabase","defaultValue","serialNumber"];Object(s["a"])(t,a,this.columnData)}else window.location.href="";else this.$message({type:"error",message:"表不存在"})},handleExceed:function(){this.$message.warning("当前限制选择1个文件")},importTelplate:function(){this.tableInfo.id?this.exportInnerVisible=!0:this.$message({type:"error",message:"表不存在"})},columnCopy:function(){if(0==this.selColumnData.length)this.$message({message:"请选择一条数据！",type:"warning"});else{var e=[];this.selColumnData.forEach((function(t){var a={};t.id="",t.tableId="",a=t,e.push(a)})),sessionStorage.setItem("copyColumn",JSON.stringify(e)),this.$message({message:"复制成功",type:"success"})}},columnPaste:function(){var e=this;this.repeatIndex=0;var t=JSON.parse(sessionStorage.getItem("copyColumn"));t=this.array_diff(t,this.columnData,"paste");var a="";this.repeatIndex>0&&(a="去重("+this.repeatIndex+")条,"),0==t.length?this.$message({message:a+"已无可插入数据!",type:"info"}):this.$alert("是否插入"+t.length+"条复制字段","温馨提示",{confirmButtonText:"确定",callback:function(a){t.forEach((function(t){t.id="",t.tableId=e.tableInfo.id})),Object(u["K"])({tableColumnList:t}).then((function(t){200==t.code?(e.$message({message:"插入成功！",type:"success"}),e.getCodeTable()):e.$message({message:t.msg,type:"error"})}))}})},handleSelectionMatedata:function(e){this.matedataSelection=e},handleSelectionMmdata:function(e){this.mmdataSelection=e},truePublic:function(){var e=this,t=[];this.repeatIndex=0,"first"==this.activePublicName?this.matedataSelection.length>0?(t=this.array_diff(this.matedataSelection,this.columnData,"first"),t.forEach((function(e){if(e.switch){var a=Object.assign({},e),l=e.celementCode.substr(0,1),n=e.celementCode.replace(l,"Q");a.eleName=e.eleName+"质量标志",a.celementCode=n,a.dbEleCode=n,t.push(a)}}))):this.$message({message:a+"无剩余可添加数据!",type:"info"}):"second"==this.activePublicName&&(this.mmdataSelection.length>0?t=this.array_diff(this.mmdataSelection,this.columnData,"second"):this.$message({message:a+"无剩余可添加数据!",type:"info"}));var a="";this.repeatIndex>0&&(a="去重("+this.repeatIndex+")条,"),t.length>0?("E-show"==this.tableType&&t.forEach((function(t){t.isKvK="true",t.id="",t.tableId=e.tableInfo.id})),t.forEach((function(t){t.id="",t.tableId=e.tableInfo.id})),Object(u["K"])({tableColumnList:t}).then((function(t){200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogStatus.columnDialog=!1,e.getCodeTable()):e.$message({type:"error",message:"操作失败"})}))):this.$message({message:a+"无剩余可添加数据!",type:"success"}),this.dialogStatus.publicMatedataDialog=!1},columnControl:function(){var e=this;0==this.selColumnData.length?this.$message({message:"请选择一条数据！",type:"error"}):this.$confirm("是否插入"+this.selColumnData.length+"条质控字段","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.selColumnData;t.forEach((function(e){var a=Object.assign({},e),l=e.celementCode.substr(0,1),n=e.celementCode.replace(l,"Q");a.eleName=e.eleName+"质量标志",a.celementCode=n,a.dbEleCode=n,a.id="",t.push(a)})),console.log(t),Object(u["K"])({tableColumnList:t}).then((function(t){200==t.code?(e.$message({message:"排序成功！",type:"success"}),e.getCodeTable()):e.$message({message:t.msg,type:"error"})}))})).catch((function(){}))},syncServe:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.columnData.length){e.next=3;break}return this.$message({message:"请选择一条数据",type:"error"}),e.abrupt("return");case 3:Object(u["H"])({tableColumnList:this.columnData}).then((function(e){200==e.code?(t.$message({message:"同步成功！",type:"success"}),t.getCodeTable()):t.$message({message:e.msg,type:"error"})}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMyExcelData:function(e){var t=this;console.log(e),e.forEach((function(e){e.id="",e.tableId=t.tableInfo.id})),Object(u["K"])({tableColumnList:e}).then((function(e){200==e.code?(t.$message({message:"操作成功",type:"success"}),t.$refs[formName].resetFields(),t.dialogStatus.columnDialog=!1,t.getCodeTable(),t.columnEditData=[]):t.$message({type:"error",message:"操作失败"})}))},array_diff:function(e,t,a){for(var l=this,n=0;n<t.length;n++)for(var o=0;o<e.length;o++)e[o].celementCode==t[n].celementCode&&(e.splice(o,1),o-=1,this.repeatIndex++);var r=[];return e.forEach((function(e){var t={};"paste"==a?(t=e,t.id=l.tableInfo.id,r.push(t)):("first"==a?(t.eleName=e.c_element_namech,t.dbEleCode=e.celementCode,t.celementCode=e.celementCode,t.type=e.c_datatype,t.accuracy=e.c_element_pre,t.isNull=!1,t.isUpdate=!1):"second"==a&&(t.eleName=e.dbEleName,t.dbEleCode=e.dbEleCode,t.celementCode=e.dbEleCode,t.type=e.type,t.accuracy=e.data_precision,t.isNull=e.isNull,t.isUpdate=e.isUpdate),t.switch=e.switch,t.id=l.tableInfo.id,t.isManager=!1,t.updateDatabase=!1,t.isPrimaryKey=!1,t.isShow=!1,t.nameCn=e.c_notes,t.serialNumber=0,t.unit=e.c_element_unit,t.unitCn=e.c_element_unit,t.userEleCode=e.c_short_name,r.push(t))})),r}},mounted:function(){var e=this;Object(d["c"])().then((function(t){"true"==t.data?e.tableStructureManageContral=!0:e.tableStructureManageContral=!1}))},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}},watch:{tableInfo:function(e){this.tableType,this.columnData=this.tableInfo.columns}}},b=f,h=(a("5bd8"),a("2877")),g=Object(h["a"])(b,l,n,!1,null,null,null);t["default"]=g.exports},f6cd:function(e,t,a){"use strict";a.d(t,"h",(function(){return o})),a.d(t,"b",(function(){return r})),a.d(t,"f",(function(){return s})),a.d(t,"j",(function(){return i})),a.d(t,"k",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"g",(function(){return b}));var l=a("b775"),n="http://10.40.79.18:8005";function o(){return Object(l["a"])({url:n+"/managefield/findAllManageGroup",method:"get"})}function r(e){return Object(l["a"])({url:n+"/managefield/addManageGroup",method:"post",params:e})}function s(e){return Object(l["a"])({url:n+"/managefield/editManageGroup",method:"PUT",params:e})}function i(e){return Object(l["a"])({url:n+"/managefield/findManageFieldByPk",method:"get",params:e})}function c(e){return Object(l["a"])({url:n+"/managefield/page",method:"get",params:e})}function u(e){return Object(l["a"])({url:n+"/managefield/delManageGroup",method:"DELETE",params:e})}function d(e){return Object(l["a"])({url:n+"/managefield/addManageField",method:"post",params:e})}function m(){return Object(l["a"])({url:n+"/restApi/dicmgn/findByType?type=2",method:"get"})}function p(e){return Object(l["a"])({url:n+"/managefield/delManageField",method:"DELETE",params:e})}function f(e){return Object(l["a"])({url:n+"/managefield/editManageField",method:"post",data:e})}function b(e){return Object(l["a"])({url:n+"/managefield/export",method:"get",params:e,responseType:"arraybuffer"})}}}]);