(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-caf42f38","chunk-90267fc4","chunk-a37c6fe2","chunk-96e3d9b4","chunk-d4d01d4e","chunk-7a073969","chunk-1350b48a","chunk-0cbb2648","chunk-624e5f1b","chunk-45465189","chunk-0e5b1b8e","chunk-af198aec","chunk-059ced08","chunk-0f51e3f8"],{"03f0":function(e,t,a){"use strict";var l=a("e622"),s=a.n(l);s.a},"0917":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"padding-top":"10px"}},[a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,border:""}},e._l(e.cols,(function(t,l){return a("af-table-column",{key:l,attrs:{prop:t.prop,label:t.label}},[a("span",[e._v(e._s(t.label))])])})),1)],1)},s=[],r=a("8d4f"),o={name:"SampleData",props:{rowData:Object,tableInfo:Object},data:function(){return{cols:[],tableData:[],columnData:[]}},methods:{getSampleData:function(){var e=this,t=[];this.cols=[];for(var a=0;a<this.columnData.length;a++){t.push(this.columnData[a].dbEleCode.toLowerCase());var l={label:this.columnData[a].eleName,prop:this.columnData[a].dbEleCode.toLowerCase()};this.cols.push(l)}var s={};s.column=t,s.databaseId=this.rowData.DATABASE_ID,s.tableName=this.tableInfo.tableName,console.log(s),Object(r["B"])(s).then((function(t){200==t.code?e.tableData=t.data:e.$message({message:t.msg,type:"error"})}))}},watch:{tableInfo:function(e){this.columnData=this.tableInfo.columns,this.getSampleData()}}},i=o,n=a("2877"),c=Object(n["a"])(i,l,s,!1,null,"3fcbe1ac",null);t["default"]=c.exports},1:function(e,t){},1564:function(e,t,a){"use strict";var l=a("289f"),s=a.n(l);s.a},"1d38":function(e,t,a){"use strict";var l=a("c4d9"),s=a.n(l);s.a},"1fc4":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"TableInfoManage"},[a("el-form",{staticClass:"elementTableCon",attrs:{"label-width":"100px"},model:{value:e.Info,callback:function(t){e.Info=t},expression:"Info"}},[a("div",{staticClass:"el-row"},[a("div",{class:e.tableClass},[a("el-form-item",{attrs:{label:"表名称"}},[a("el-input",{attrs:{disabled:!e.isEdit,placeholder:"表名称",size:"small"},model:{value:e.Info.tableName,callback:function(t){e.$set(e.Info,"tableName",t)},expression:"Info.tableName"}})],1)],1),e._v(" "),e.isTableName?a("div",{staticClass:"el-col el-col-3"},[a("el-form-item",{staticClass:"buttonCon"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.help}},[e._v("帮助")])],1)],1):e._e(),e._v(" "),a("div",{staticClass:"el-col el-col-10"},[a("el-form-item",{attrs:{label:"中文名称"}},[a("el-input",{attrs:{disabled:!e.isEdit,placeholder:"中文名称",size:"small"},model:{value:e.Info.nameCn,callback:function(t){e.$set(e.Info,"nameCn",t)},expression:"Info.nameCn"}})],1)],1),e._v(" "),a("div",{staticClass:"el-col el-col-4"},[a("el-form-item",{staticClass:"buttonCon"},[e.isEdit?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),e.isEdit?e._e():a("el-popover",{attrs:{placement:"bottom",width:"240",trigger:"hover","popper-class":"tableMsgPop"}},[a("div",[a("ul",[a("li",[a("p",[a("span",[e._v(e._s("四级编码:"))]),e._v(" "),a("span",[e._v(e._s(this.rowData.D_DATA_ID))])])]),e._v(" "),a("li",[a("p",[a("span",[e._v(e._s("用途描述:"))]),e._v(" "),a("span",[e._v(e._s(this.rowData.LOGIC_NAME))])])]),e._v(" "),a("li",[a("p",[a("span",[e._v(e._s("数据库名称:"))]),e._v(" "),a("span",[e._v(e._s(this.rowData.DATABASE_NAME))])])]),e._v(" "),a("li",[a("p",[a("span",[e._v(e._s("表类型:"))]),e._v(" "),a("span",[e._v(e._s(this.rowData.DICT_LABEL))])])])])]),e._v(" "),a("el-button",{staticClass:"tipsBtn",attrs:{slot:"reference",type:"primary",size:"small",icon:"el-icon-tickets"},slot:"reference"})],1),e._v(" "),e.isEdit?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("保存")]):e._e(),e._v(" "),e.isEdit?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cel}},[e._v("取消")]):e._e()],1)],1)]),e._v(" "),a("div",{staticClass:"el-row"},[a("div",{staticClass:"el-col el-col-10"},[a("el-form-item",{attrs:{label:"服务编码"}},[a("el-input",{attrs:{disabled:!0,placeholder:"服务编码",size:"small"},model:{value:e.Info.dataServiceId,callback:function(t){e.$set(e.Info,"dataServiceId",t)},expression:"Info.dataServiceId"}})],1)],1),e._v(" "),a("div",{staticClass:"el-col el-col-10"},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{disabled:!e.isEdit,placeholder:"备注",size:"small"},model:{value:e.Info.tableDesc,callback:function(t){e.$set(e.Info,"tableDesc",t)},expression:"Info.tableDesc"}})],1)],1),e._v(" "),a("div",{staticClass:"el-col el-col-4"},[a("el-form-item",{staticClass:"buttonCon"},[e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.baseMsgEdit}},[e._v("基础信息编辑")]):e._e()],1)],1)])]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"帮助",visible:e.dialogVisible,width:"60%","before-close":e.handleClose,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"helpbox"},[a("h4",{staticStyle:{color:"#F56C6C"}},[e._v("表名称如：nafp_for_ftm_[资料标识1]_[精度2]_[区域3]_[场类型4]_[加工过程类型5]")]),e._v(" "),a("p",{staticClass:"title"},[e._v("1.资料标识:")]),e._v(" "),a("span",[e._v("资料标识表示资料的类别，应能方便的辨别资料的类型；")]),e._v(" "),a("p",{staticClass:"title"},[e._v("2.精度:")]),e._v(" "),a("span",[e._v("精度表示高分或低分，高分用high表示，低分用low表示；")]),e._v(" "),a("p",{staticClass:"title"},[e._v("3.区域:")]),e._v(" "),a("span",[e._v("区域表示资料的数据场标识的空间范围，如：GLB，CHN；")]),e._v(" "),a("p",{staticClass:"title"},[e._v("4.场类型:")]),e._v(" "),a("span",[e._v("数值模式产品按场类型（FIELD_TYPE）分为多种不同的产品，场类型的取值和对应含义如下表所示：")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"代码值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"means",label:"含义"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code2",label:"代码值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"means2",label:"含义"}})],1),e._v(" "),a("span",[e._v("当场类型为1时是预报产品，为其它时不是正常的预报产品。比如，EC低分的场类型为2的气温、位势高度等要素产品，其实是标准差产品，不是预报产品。")]),e._v(" "),a("p",{staticClass:"title"},[e._v("5.加工过程类型:")]),e._v(" "),a("span",[e._v("模式产品加工类型（GENPROCESS_TYPE字段）的含义如下：")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"代码值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"means",label:"含义"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code2",label:"代码值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"means2",label:"含义"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code3",label:"代码值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"means3",label:"含义"}})],1),e._v(" "),a("span",[e._v("比如，当检索到GENPROCESS_TYPE=2时，是预报产品；GENPROCESS_TYPE=4时，是集合预报产品。")]),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right","padding-bottom":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"基础信息编辑",visible:e.baseMsgEditDialog,width:"80%","before-close":e.handleClose,"append-to-body":""},on:{"update:visible":function(t){e.baseMsgEditDialog=t}}},[e.baseMsgEditDialog?a("handleBaseMsg",{attrs:{handleId:e.handleId},on:{handleClose:e.handleClose}}):e._e()],1)],1)},s=[],r=a("ee9a"),o=a("c3fa"),i=a("8d4f"),n={name:"TableInfoManage",components:{handleBaseMsg:o["default"]},props:{rowData:Object,tableInfo:Object,tableType:String},data:function(){return{tableStructureManageContral:!1,Info:{table_name:"",name_cn:"",dataServiceId:"",tableDesc:""},childTableType:this.tableType,namehelp:"",isEdit:!1,isTableName:!1,infoList:[],tableClass:"el-col el-col-10",dialogVisible:!1,baseMsgEditDialog:!1,handleObj:"",tableData1:[{code:"0",means:"分析产品",code2:"1",means2:"预报产品"},{code:"2",means:"分析和预报产品",code2:"3",means2:"控制预报产品"},{code:"4",means:"扰动预报产品",code2:"5",means2:"控制和扰动预报产品"},{code:"6",means:"加工的卫星观测资料",code2:"7",means2:"加工的雷达观测资料"},{code:"8",means:"事件概率",code2:"9-191",means2:"保留"},{code:"192—254",means:"保留，供本地使用",code2:"255",means2:"空缺"}],tableData2:[{code:"0",means:"分析",code2:"1",means2:"初始化",code3:"2",means3:"预报"},{code:"3",means:"偏差订正预报",code2:"4",means2:"集合预报",code3:"5",means3:"概率预报"},{code:"6",means:"预报误差",code2:"7",means2:"分析误差",code3:"8",means3:"观测"},{code:"9",means:"气候",code2:"10",means2:"加权概率预报",code3:"11",means3:"偏差订正集合预报"},{code:"12—191",means:"保留",code2:"192—254",means2:"保留，供本地使用",code3:"255",means3:"空缺值"}]}},created:function(){var e=this;Object(r["c"])().then((function(t){"true"==t.data?e.tableStructureManageContral=!0:e.tableStructureManageContral=!1}))},mounted:function(){this.Info=JSON.parse(JSON.stringify(this.tableInfo)),this.isHelp()},methods:{isHelp:function(){this.Info.nameCn||(this.Info.nameCn=this.rowData.CLASS_NAME,this.Info.dataServiceId=this.rowData.D_DATA_ID)},reloadTableInfo:function(){this.$emit("reloadTableInfo")},edit:function(){this.isEdit=!this.isEdit},save:function(){var e=this;this.isEdit=!this.isEdit;var t={};t.classLogic=this.Info.classLogic,t.classLogic||(t.classLogic={id:this.rowData.LOGIC_ID}),t.tableName=this.Info.tableName,t.nameCn=this.Info.nameCn,t.dataServiceId=this.Info.dataServiceId,t.tableDesc=this.Info.tableDesc,t.version=this.Info.version,t.id=this.Info.id,t.createTime=this.Info.createTime,"E-show"==this.tableType?t.dbTableType=this.childTableType:t.dbTableType=this.tableType,Object(i["c"])(t).then((function(t){200==t.code?(e.$message({type:"success",message:"操作成功"}),e.$emit("reloadTableInfo")):e.$message({type:"error",message:"操作失败"})}))},cel:function(){this.isEdit=!this.isEdit,this.Info=JSON.parse(JSON.stringify(this.tableInfo))},help:function(){this.dialogVisible=!0},baseMsgEdit:function(){this.handleId=this.Info.dataServiceId,this.baseMsgEditDialog=!0},handleClose:function(){this.dialogVisible=!1,this.baseMsgEditDialog=!1}},watch:{tableInfo:function(e){this.Info=JSON.parse(JSON.stringify(e)),console.log(this.Info),"E-show"==this.tableType&&(this.childTableType="E",this.namehelp="show"),"show"==this.namehelp?(this.tableClass="el-col el-col-7",this.isTableName=!0):(this.tableClass="el-col el-col-10",this.isTableName=!1)}}},c=n,u=(a("03f0"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,null,null);t["default"]=d.exports},2:function(e,t){},"20d6e":function(e,t,a){},2832:function(e,t,a){"use strict";var l=a("5f58"),s=a.n(l);s.a},"289f":function(e,t,a){},"2b13":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"PartKeyManage"},[a("fieldset",[a("legend",[e._v(e._s(e.rowData.database_name))]),e._v(" "),a("el-form",{attrs:{model:e.editData,"label-width":"120px",size:"small"}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"分库键"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isEdit,placeholder:"请选择"},model:{value:e.editData.database_key,callback:function(t){e.$set(e.editData,"database_key",t)},expression:"editData.database_key"}},[a("el-option",{attrs:{value:"",label:"无"}}),e._v(" "),e._l(e.columnData,(function(e){return a("el-option",{key:e.dbEleCode,attrs:{label:e.dbEleCode+"["+e.eleName+"]",value:e.dbEleCode}})}))],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"分表键"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isEdit,placeholder:"请选择"},model:{value:e.editData.table_key,callback:function(t){e.$set(e.editData,"table_key",t)},expression:"editData.table_key"}},[a("el-option",{attrs:{value:"",label:"无"}}),e._v(" "),e._l(e.columnData,(function(e){return a("el-option",{key:e.dbEleCode,attrs:{label:e.dbEleCode+"["+e.eleName+"]",value:e.dbEleCode}})}))],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[e.isEdit?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v("编辑")]),e._v(" "),e.isEdit?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.celFun}},[e._v("取消")]):e._e(),e._v(" "),e.isEdit?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addKey}},[e._v("保存")]):e._e()],1)],1)],1)],1)])},s=[],r=a("8d4f"),o={name:"partKeyManage",props:{rowData:Object,tableInfo:Object},data:function(){return{columnData:[],editData:{database_key:"",table_key:""},isEdit:!1}},methods:{getShared:function(){var e=this;Object(r["r"])({id:this.tableInfo.id}).then((function(t){if(200==t.code)for(var a=t.data,l=0;l<a.length;l++)0===a[l].shardingType?e.editData.database_key=a[l].columnName:e.editData.table_key=a[l].columnName}))},celFun:function(){this.getShared(),this.isEdit=!this.isEdit},addKey:function(){var e=this,t=[{columnName:this.editData.database_key,shardingType:"0",tableId:this.tableInfo.id},{columnName:this.editData.table_key,shardingType:"1",tableId:this.tableInfo.id}];console.log(t),Object(r["G"])({shardingList:t}).then((function(t){200==t.code?(e.$message({type:"success",message:"操作成功"}),e.isEdit=!e.isEdit):e.$message({type:"error",message:t.msg})}))}},mounted:function(){},watch:{tableInfo:function(e){this.tableInfo=e,this.columnData=e.columns,this.getShared()}}},i=o,n=(a("a0d6"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,null,null);t["default"]=c.exports},3:function(e,t){},4674:function(e,t,a){"use strict";var l=a("5745"),s=a.n(l);s.a},"4e1f":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return c}));var l=a("b775"),s="http://10.40.79.18:8005";function r(e){return Object(l["a"])({url:s+"/system/gribParameterDefine/list",method:"get",params:e})}function o(e){return Object(l["a"])({url:s+"/system/gribParameterDefine/save",method:"post",data:e})}function i(e){return Object(l["a"])({url:s+"/system/gribParameterDefine/edit",method:"put",data:e})}function n(e){return Object(l["a"])({url:s+"/system/gribParameterDefine/deleteByIds/"+e,method:"delete"})}function c(){return Object(l["a"])({url:s+"/system/api/gridEleDecodeDefine/exportJSON",method:"post"})}},"50b2":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"dataServeManage"},[a("fieldset",[a("legend",[e._v(e._s("服务基本信息"))]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.baseServe,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素存储字段"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:e.baseServe.eleField,callback:function(t){e.$set(e.baseServe,"eleField",t)},expression:"baseServe.eleField"}},e._l(e.optionsColumnList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.eleName+"("+e.dbEleCode+")",value:e.dbEleCode}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"区域存储字段"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:e.baseServe.regionField,callback:function(t){e.$set(e.baseServe,"regionField",t)},expression:"baseServe.regionField"}},e._l(e.optionsColumnList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.eleName+"("+e.dbEleCode+")",value:e.dbEleCode}})})),1)],1)],1)],1)],1)],1),e._v(" "),a("fieldset",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("legend",[e._v(e._s("默认配置设置"))]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.baseSet,"label-width":"120px",rules:e.baseRules}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"区域选择"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small",prop:"region"},model:{value:e.baseSet.region,callback:function(t){e.$set(e.baseSet,"region",t)},expression:"baseSet.region"}},e._l(e.baseAreaOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.areaId,value:e.areaId}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"GRIB版本",prop:"gribVersion"}},[a("el-input",{attrs:{size:"small",type:"number"},model:{value:e.baseSet.gribVersion,callback:function(t){e.$set(e.baseSet,"gribVersion",t)},expression:"baseSet.gribVersion"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"场类型",prop:"fieldType"}},[a("el-input",{attrs:{size:"small",type:"number"},model:{value:e.baseSet.fieldType,callback:function(t){e.$set(e.baseSet,"fieldType",t)},expression:"baseSet.fieldType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"加工过程类型",prop:"processType"}},[a("el-input",{attrs:{size:"small"},model:{value:e.baseSet.processType,callback:function(t){e.$set(e.baseSet,"processType",t)},expression:"baseSet.processType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"资料时次",prop:"dataTime"}},[a("el-input",{attrs:{size:"small"},model:{value:e.baseSet.dataTime,callback:function(t){e.$set(e.baseSet,"dataTime",t)},expression:"baseSet.dataTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"时效单位",prop:"timeUnit"}},[a("el-input",{attrs:{size:"small"},model:{value:e.baseSet.timeUnit,callback:function(t){e.$set(e.baseSet,"timeUnit",t)},expression:"baseSet.timeUnit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"空间分辨率",prop:"spatialResolution"}},[a("el-input",{attrs:{size:"small"},model:{value:e.baseSet.spatialResolution,callback:function(t){e.$set(e.baseSet,"spatialResolution",t)},expression:"baseSet.spatialResolution"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addBase}},[e._v("保存")])],1)],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"areaTop"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:e.deleteCell}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy",size:"small"},on:{click:e.columnCopy}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-add",size:"small"},on:{click:e.columnPaste}},[e._v("粘贴")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"45",index:e.table_index}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaId",label:"区域代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dbEleName",label:"要素存储短名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eleServiceId",label:"要素服务代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eleLongName",label:"要素中文名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eleUnit",label:"要素单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"levelType",label:"层次类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scaleDivisor",label:"层次转换因子"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eleHours",label:"资料时次"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gridPixel",label:"空间分辨率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"timeUnit",label:"预报时效单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"timeList",label:"预报时效列表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"levelUnit",label:"层次单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"levelList",label:"层次列表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eleLongName",label:"要素长名"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.searchObj.pageNum,limit:e.searchObj.pageSize},on:{"update:page":function(t){return e.$set(e.searchObj,"pageNum",t)},"update:limit":function(t){return e.$set(e.searchObj,"pageSize",t)},pagination:e.searchFun}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dataServeDialog",attrs:{width:"80%",title:e.dialogTitle,visible:e.dataServeDialog,"append-to-body":""},on:{"update:visible":function(t){e.dataServeDialog=t}}},[a("el-form",{ref:"formName",attrs:{size:"mini",rules:e.rules,model:e.msgFormDialog,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序号",prop:"num"}},[a("el-input",{attrs:{placeholder:"序号"},model:{value:e.msgFormDialog.num,callback:function(t){e.$set(e.msgFormDialog,"num",t)},expression:"msgFormDialog.num"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"区域代码",prop:"areaId"}},[a("el-select",{staticClass:"areaSelect",attrs:{filterable:"",placeholder:"请选择区域",size:"small"},model:{value:e.msgFormDialog.areaId,callback:function(t){e.$set(e.msgFormDialog,"areaId",t)},expression:"msgFormDialog.areaId"}},e._l(e.baseAreaOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.areaId,value:e.areaId}})})),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素存储代码",prop:"dbEleName"}},[a("el-select",{attrs:{filterable:"",placeholder:"要素存储代码",size:"small"},on:{change:e.getServeByEle},model:{value:e.msgFormDialog.dbEleName,callback:function(t){e.$set(e.msgFormDialog,"dbEleName",t)},expression:"msgFormDialog.dbEleName"}},e._l(e.eleQueryAll,(function(e,t){return a("el-option",{key:t,attrs:{label:e.eleCodeShort,value:e.eleCodeShort}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素服务代码"}},[a("el-select",{attrs:{filterable:"",placeholder:"要素服务代码",size:"small"},on:{change:e.getEleUnit},model:{value:e.msgFormDialog.eleServiceId,callback:function(t){e.$set(e.msgFormDialog,"eleServiceId",t)},expression:"msgFormDialog.eleServiceId"}},e._l(e.eleOptionsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.userFcstEle,value:e.userFcstEle}})})),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次类型",prop:"levelType"}},[a("el-select",{attrs:{filterable:"",placeholder:"层次类型",size:"small"},model:{value:e.msgFormDialog.levelType,callback:function(t){e.$set(e.msgFormDialog,"levelType",t)},expression:"msgFormDialog.levelType"}},e._l(e.optionsLevels,(function(e){return a("el-option",{key:e.value,attrs:{label:e.levelType,value:e.levelType}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次类型转换因子",prop:"scaleDivisor"}},[a("el-input",{attrs:{placeholder:"层次类型转换因子"},model:{value:e.msgFormDialog.scaleDivisor,callback:function(t){e.$set(e.msgFormDialog,"scaleDivisor",t)},expression:"msgFormDialog.scaleDivisor"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素中文名"}},[a("el-input",{attrs:{placeholder:"要素中文名"},model:{value:e.msgFormDialog.eleNameCn,callback:function(t){e.$set(e.msgFormDialog,"eleNameCn",t)},expression:"msgFormDialog.eleNameCn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素长名"}},[a("el-input",{attrs:{placeholder:"要素长名"},model:{value:e.msgFormDialog.eleLongName,callback:function(t){e.$set(e.msgFormDialog,"eleLongName",t)},expression:"msgFormDialog.eleLongName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素单位"}},[a("el-input",{attrs:{placeholder:"要素单位"},model:{value:e.msgFormDialog.eleUnit,callback:function(t){e.$set(e.msgFormDialog,"eleUnit",t)},expression:"msgFormDialog.eleUnit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资料时次"}},[a("el-input",{attrs:{placeholder:"资料时次"},model:{value:e.msgFormDialog.eleHours,callback:function(t){e.$set(e.msgFormDialog,"eleHours",t)},expression:"msgFormDialog.eleHours"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"空间分辨率"}},[a("el-input",{attrs:{placeholder:"空间分辨率"},model:{value:e.msgFormDialog.gridPixel,callback:function(t){e.$set(e.msgFormDialog,"gridPixel",t)},expression:"msgFormDialog.gridPixel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预报时效单位"}},[a("el-input",{attrs:{placeholder:"预报时效单位"},model:{value:e.msgFormDialog.timeUnit,callback:function(t){e.$set(e.msgFormDialog,"timeUnit",t)},expression:"msgFormDialog.timeUnit"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次单位"}},[a("el-input",{attrs:{placeholder:"层次单位"},model:{value:e.msgFormDialog.levelUnit,callback:function(t){e.$set(e.msgFormDialog,"levelUnit",t)},expression:"msgFormDialog.levelUnit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预报时效列表"}},[a("el-input",{attrs:{placeholder:"预报时效列表"},model:{value:e.msgFormDialog.timeList,callback:function(t){e.$set(e.msgFormDialog,"timeList",t)},expression:"msgFormDialog.timeList"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancleHandle("formName")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueHandle("formName")}}},[e._v("确 定")])],1)],1)],1)},s=[],r=(a("ac6a"),a("96cf"),a("3b8d")),o=a("8d4f"),i=a("812e"),n={name:"dataServeManage",props:{rowData:Object},data:function(){return{repeatIndex:0,total:0,tableData:[],baseAreaOptions:[],multipleSelection:[],optionsColumnList:[],eleQueryAll:[],eleOptionsList:[],optionsLevels:[],baseServe:{eleField:"",regionField:""},baseSet:{},searchObj:{dataServiceId:this.rowData.DATA_CLASS_ID,pageNum:1,pageSize:10},dialogTitle:"新增数据服务信息",dataServeDialog:!1,msgFormDialog:{dataServiceId:this.rowData.DATA_CLASS_ID},baseRules:{region:[{required:!0,message:"请选择区域代码",trigger:"change"}],gribVersion:[{required:!0,message:"请输入GRIB版本",trigger:"blur"}],fieldType:[{required:!0,message:"请输入场类型",trigger:"blur"}],processType:[{required:!0,message:"请输入加工过程类型",trigger:"blur"}],dataTime:[{required:!0,message:"请输入资料时次",trigger:"blur"}],timeUnit:[{required:!0,message:"请输入时效单位",trigger:"blur"}],spatialResolution:[{required:!0,message:"请输入空间分辨率",trigger:"blur"}]},rules:{num:[{required:!0,message:"请输入序号",trigger:"blur"}],areaId:[{required:!0,message:"请选择区域代码",trigger:"change"}],dbEleName:[{required:!0,message:"请选择格点要素存储代码",trigger:"change"}],levelType:[{required:!0,message:"请输入层次类型",trigger:"blur"}],scaleDivisor:[{required:!0,message:"请输入层次转换因子",trigger:"blur"}]}}},methods:{table_index:function(e){return(this.searchObj.pageNum-1)*this.searchObj.pageSize+e+1},searchFun:function(){var e=this;Object(o["f"])(this.searchObj).then((function(t){e.tableData=t.data.pageData,e.total=t.data.totalCount,e.loading=!1}))},handleSelectionChange:function(e){this.multipleSelection=e},getFormDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["j"])({dataCLassId:this.rowData.DATA_CLASS_ID}).then((function(e){if(200==e.code&&e.data.length>0){console.log(e);var a=e.data[0];t.baseServe.eleField=a.eleField,t.baseServe.regionField=a.regionField,t.baseSet=a}}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAllLevelMethods:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])().then((function(e){t.optionsLevels=e.data}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),modeEleQueryAll:function(){var e=this;Object(o["F"])().then((function(t){200==t.code?e.eleQueryAll=t.data:e.$message({type:"error",message:t.msg})}))},getServeByEle:function(e){var t=this;Object(o["l"])({dbFcstEle:e}).then((function(e){200==e.code?(t.eleOptionsList=e.data,console.log(t.eleOptionsList)):t.$message({type:"error",message:e.msg})}))},getEleUnit:function(e){var t=this;this.eleOptionsList.forEach((function(a){a.userFcstEle==e&&(t.msgFormDialog.eleUnit=a.eleUnit,t.msgFormDialog.eleNameCn=a.eleName,t.msgFormDialog.eleLongName=a.elePropertyName)}))},addBase:function(){var e=this,t=Object.assign(this.baseSet,this.baseServe);t.dataCLassId=this.rowData.DATA_CLASS_ID,console.log(t),Object(o["C"])(t).then((function(t){200==t.code?e.$message({type:"success",message:"保存成功"}):e.$message({type:"error",message:t.msg})}))},add:function(){this.baseSet.region?(this.msgFormDialog={},this.msgFormDialog=this.baseSet,this.msgFormDialog.dataServiceId=this.rowData.DATA_CLASS_ID,this.dialogTitle="新增数据服务信息",this.getAllLevelMethods(),this.modeEleQueryAll(),this.dataServeDialog=!0):this.$message({type:"error",message:"请先设置默认配置"})},edit:function(){var e=this;1!=this.multipleSelection.length?this.$message({type:"info",message:"请选择一条数据"}):Object(o["e"])({id:this.multipleSelection[0].id}).then((function(t){200==t.code?(e.getAllLevelMethods(),e.modeEleQueryAll(),e.dialogTitle="编辑数据服务信息",e.msgFormDialog=t.data,e.dataServeDialog=!0):e.$message({type:"error",message:t.msg})}))},deleteCell:function(){var e=this,t=[];this.multipleSelection.forEach((function(e){t.push(e.id)})),Object(o["h"])({ids:t.join(",")}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功"}),e.searchFun()):e.$message({type:"error",message:t.msg})}))},columnCopy:function(){0==this.multipleSelection.length?this.$message({message:"请选择一条数据！",type:"warning"}):(sessionStorage.setItem("copyServeColumn",JSON.stringify(this.multipleSelection)),this.$message({message:"复制成功",type:"success"}))},columnPaste:function(){var e=this;this.repeatIndex=0;var t=JSON.parse(sessionStorage.getItem("copyServeColumn"));t[0].dataServiceId==this.rowData.DATA_CLASS_ID?this.$message({message:"不能在同一个表内插入数据!",type:"info"}):(t.forEach((function(t){t.dataServiceId=e.rowData.DATA_CLASS_ID,t.id=""})),Object(o["a"])(t).then((function(t){200==t.code?(e.$message({message:"插入成功！",type:"success"}),e.searchFun()):e.$message({type:"error",message:t.msg})})))},cancleHandle:function(e){this.$refs[e].resetFields(),this.dataServeDialog=!1},trueHandle:function(e){var t=this,a=Object.assign(this.msgFormDialog,this.baseServe);console.log(a),this.$refs[e].validate((function(l){if(!l)return console.log("error submit!!"),!1;var s="";"新增数据服务信息"==t.dialogTitle?(a.id="",s="新增成功"):s="编辑成功",Object(o["d"])(a).then((function(a){200==a.code?(t.searchFun(),t.$refs[e].resetFields(),t.dataServeDialog=!1,t.$message({type:"success",message:s})):t.$message({type:"error",message:a.msg})}))}))},gettableInfo:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["q"])({classLogic:this.rowData.LOGIC_ID}).then((function(e){200==e.code?function(){for(var a=e.data,l=[],s=[],r=0;r<a.length;r++)if("K"==a[r].dbTableType){var o=a[r].columns;o.forEach((function(e){"V"==e.dbEleCode.slice(0,1)&&l.push(e)}))}else if("E"==a[r].dbTableType){var i=a[r].columns;i.forEach((function(e){"V"==e.dbEleCode.slice(0,1)&&s.push(e)}))}t.optionsColumnList=l.concat(s),0==a.length&&(t.optionsColumnList=[])}():t.$message({message:res.msg,type:"error"})}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBaseAreaOptions:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["k"])({dataServiceId:this.rowData.DATA_CLASS_ID}).then((function(e){console.log(e),t.baseAreaOptions=e.data}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),forParent:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.gettableInfo();case 2:return e.next=4,this.getBaseAreaOptions();case 4:return this.searchFun(),e.next=7,this.getFormDetail();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=n,u=(a("d3b3"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,null,null);t["default"]=d.exports},5302:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"DataStatistics"},[a("fieldset",[a("legend",[e._v(e._s(e.rowData.DATABASE_NAME))]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.queryParams,"label-width":"100px"}},[a("el-form-item",[a("el-radio-group",{on:{change:e.handleQuery},model:{value:e.queryParams.radio,callback:function(t){e.$set(e.queryParams,"radio",t)},expression:"queryParams.radio"}},[a("el-radio",{attrs:{label:1}},[e._v("全部在线")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("近线服务")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","row-key":"id"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statisticDate",label:"统计日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.statisticDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.beginTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.endTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"recordCount",label:"总量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dayTotal",label:"日增量"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.searchFun}})],1)])},s=[],r=a("bd86"),o=a("8d4f"),i={name:"DataStatistics",props:{rowData:Object,tableInfo:Object},components:{},data:function(){var e;return e={loading:!1,queryParams:{databaseId:this.rowData.DATABASE_ID,tableId:this.tableInfo.id,pageNum:1,pageSize:10}},Object(r["a"])(e,"queryParams",{}),Object(r["a"])(e,"tableData",[]),Object(r["a"])(e,"total",0),e},methods:{handleQuery:function(e){var t=this,a={};a.dataClassId=this.rowData.DATA_CLASS_ID,a.isAllLine=e,Object(o["M"])(a).then((function(e){t.tableData=e.data.pageData,t.total=e.data.totalCount,t.loading=!1}))},table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},searchFun:function(){var e=this;Object(o["g"])(this.queryParams).then((function(t){e.tableData=t.data.pageData,e.total=t.data.totalCount,e.loading=!1}))}},watch:{tableInfo:function(e){this.tableInfo=e,this.searchFun()}}},n=i,c=(a("1564"),a("2877")),u=Object(c["a"])(n,l,s,!1,null,null,null);t["default"]=u.exports},5745:function(e,t,a){},"5bd8":function(e,t,a){"use strict";var l=a("9083"),s=a.n(l);s.a},"5e05":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scrollMain"},[a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[a("el-tabs",{on:{"tab-click":e.manageTabsClick},model:{value:e.tableActive,callback:function(t){e.tableActive=t},expression:"tableActive"}},[e.tabs.db?a("el-tab-pane",{attrs:{label:"表结构",name:"db"}},[a("el-container",{staticClass:"structureManageTable"},[a("el-main",{attrs:{id:"box"}},["ME_table"==this.rowData.STORAGE_TYPE||"MK_table"==this.rowData.STORAGE_TYPE||"NF_table"==this.rowData.STORAGE_TYPE?a("el-form",{staticClass:"elementDir",attrs:{"label-width":"100px"},model:{value:e.dirRule,callback:function(t){e.dirRule=t},expression:"dirRule"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"目录规范"}},[a("el-input",{attrs:{disabled:!e.isDirEdit,placeholder:"目录规范",size:"small"},model:{value:e.dirRule.dirNorm,callback:function(t){e.$set(e.dirRule,"dirNorm",t)},expression:"dirRule.dirNorm"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"buttonCon",attrs:{label:""}},[e.isDirEdit?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.editDir}},[e._v("编辑")]),e._v(" "),e.isDirEdit?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveDir}},[e._v("保存")]):e._e(),e._v(" "),e.isDirEdit?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.celDir}},[e._v("取消")]):e._e()],1)],1)],1)],1):e._e(),e._v(" "),e.tabs.table.key?a("div",{staticClass:"el-main"},[a("div",{staticClass:"elementTableTitle"},[a("i",{staticClass:"el-icon-postcard",attrs:{id:"key_table_flag"}}),e._v("键表\n              ")]),e._v(" "),e.tabs.table.key?a("table-info",{staticClass:"floor",attrs:{tableInfo:e.keyObj.tableInfo,rowData:e.rowData,tableType:"K"},on:{reloadTableInfo:e.getTableInfo}}):e._e(),e._v(" "),a("el-collapse",{staticClass:"collapseCon el-col el-col-24"},[a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"key_field"}}),e._v("字段\n                  ")]),e._v(" "),a("div",[e.tabs.table.key?a("v-column",{attrs:{rowData:e.rowData,tableInfo:e.keyObj.tableInfo},on:{reloadTableInfo:e.getTableInfo}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"key_indexes"}}),e._v("索引\n                  ")]),e._v(" "),a("div",[e.tabs.table.key?a("v-index",{attrs:{tableInfo:e.keyObj.tableInfo}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"key_tableKey"}}),e._v("分库分表键\n                  ")]),e._v(" "),a("div",[e.tabs.table.key?a("part-key",{attrs:{tableInfo:e.keyObj.tableInfo,rowData:e.rowData}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"key_materialStatics"}}),e._v("资料类型统计\n                  ")]),e._v(" "),a("div",[e.tabs.table.key?a("data-statistics",{attrs:{tableInfo:e.keyObj.tableInfo,rowData:e.rowData}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"key_exampleSearch"}}),e._v("样例数据查询\n                  ")]),e._v(" "),a("div",[e.tabs.table.key?a("sample-data",{attrs:{tableInfo:e.keyObj.tableInfo,rowData:e.rowData}}):e._e()],1)],2)],1)],1):e._e(),e._v(" "),e.tabs.table.el?a("div",{staticClass:"el-main"},[a("div",{staticClass:"elementTableTitle"},[a("i",{staticClass:"el-icon-postcard",attrs:{id:"el_table_flag"}}),e._v("要素表\n              ")]),e._v(" "),e.tabs.table.el?a("table-info",{staticClass:"floor",attrs:{tableInfo:e.elObj.tableInfo,rowData:e.rowData,tableType:"E"},on:{reloadTableInfo:e.getTableInfo}}):e._e(),e._v(" "),a("el-collapse",{staticClass:"collapseCon el-col el-col-24"},[a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"el_field"}}),e._v("字段\n                  ")]),e._v(" "),a("div",[e.tabs.table.el?a("v-column",{attrs:{rowData:e.rowData,tableInfo:e.elObj.tableInfo},on:{reloadTableInfo:e.getTableInfo}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"el_indexes"}}),e._v("索引\n                  ")]),e._v(" "),a("div",[e.tabs.table.el?a("v-index",{attrs:{tableInfo:e.elObj.tableInfo}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"el_tableKey"}}),e._v("分库分表键\n                  ")]),e._v(" "),a("div",[e.tabs.table.el?a("part-key",{attrs:{tableInfo:e.elObj.tableInfo,rowData:e.rowData}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"el_materialStatics"}}),e._v("资料类型统计\n                  ")]),e._v(" "),a("div",[e.tabs.table.el?a("data-statistics",{attrs:{tableInfo:e.elObj.tableInfo,rowData:e.rowData}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor"},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"el_exampleSearch"}}),e._v("样例数据查询\n                  ")]),e._v(" "),a("div",[e.tabs.table.el?a("sample-data",{attrs:{tableInfo:e.elObj.tableInfo,rowData:e.rowData}}):e._e()],1)],2)],1)],1):e._e(),e._v(" "),e.tabs.table.key_el?a("div",{staticClass:"el-main"},[a("div",{staticClass:"elementTableTitle"},[a("i",{staticClass:"el-icon-postcard"}),e._v("外键关联\n              ")]),e._v(" "),a("div",[e.tabs.table.key_el?a("foreign-key",{attrs:{keyTableInfo:e.keyObj.tableInfo,elTableInfo:e.elObj.tableInfo,rowData:e.rowData}}):e._e()],1)]):e._e(),e._v(" "),e.tabs.table.ka?a("div",{staticClass:"el-main"},[e.tabs.table.ka?a("table-info",{attrs:{tableInfo:e.elObj.tableInfo,rowData:e.rowData,tableType:"E-show"},on:{reloadTableInfo:e.getTableInfo}}):e._e(),e._v(" "),a("el-collapse",{staticClass:"collapseCon el-col el-col-24"},[a("el-collapse-item",{staticClass:"floor",attrs:{name:"keycode"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"ka_key_field"}}),e._v("主键字段\n                  ")]),e._v(" "),a("div",[e.tabs.table.ka?a("v-column",{attrs:{tableType:"E-show",tableInfo:e.elObj.tableInfo},on:{reloadTableInfo:e.getTableInfo}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor",attrs:{name:"elcode"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"ka_arr_field"}}),e._v("属性字段\n                  ")]),e._v(" "),a("div",[e.tabs.table.ka?a("v-column",{attrs:{tableInfo:e.elObj.tableInfo},on:{reloadTableInfo:e.getTableInfo}}):e._e()],1)],2),e._v(" "),a("el-collapse-item",{staticClass:"floor",attrs:{name:"index"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-price-tag",attrs:{id:"ka_indexes"}}),e._v("索引\n                  ")]),e._v(" "),a("div",[e.tabs.table.ka?a("v-index",{attrs:{tableInfo:e.elObj.tableInfo}}):e._e()],1)],2)],1)],1):e._e()],1),e._v(" "),a("el-aside",[a("ul",{staticClass:"rightNav",attrs:{id:"rightNav"}},[e.tabs.table.key?a("li",{class:e.keyActive},[a("a",{attrs:{href:"#key_table_flag"}},[e._v("键表")])]):e._e(),e._v(" "),e.tabs.table.key?a("li",[a("a",{attrs:{href:"#key_field"}},[e._v("字段")])]):e._e(),e._v(" "),e.tabs.table.key?a("li",[a("a",{attrs:{href:"#key_indexes"}},[e._v("索引")])]):e._e(),e._v(" "),e.tabs.table.key?a("li",[a("a",{attrs:{href:"#key_tableKey"}},[e._v("分库分表键")])]):e._e(),e._v(" "),e.tabs.table.key?a("li",[a("a",{attrs:{href:"#key_materialStatics"}},[e._v("资料类型统计")])]):e._e(),e._v(" "),e.tabs.table.key?a("li",[a("a",{attrs:{href:"#key_exampleSearch"}},[e._v("样例数据查询")])]):e._e(),e._v(" "),e.tabs.table.el?a("li",{class:e.elActive},[a("a",{attrs:{href:"#el_table_flag"}},[e._v("要素表")])]):e._e(),e._v(" "),e.tabs.table.el?a("li",[a("a",{attrs:{href:"#el_field"}},[e._v("字段")])]):e._e(),e._v(" "),e.tabs.table.el?a("li",[a("a",{attrs:{href:"#el_indexes"}},[e._v("索引")])]):e._e(),e._v(" "),e.tabs.table.el?a("li",[a("a",{attrs:{href:"#el_tableKey"}},[e._v("分库分表键")])]):e._e(),e._v(" "),e.tabs.table.el?a("li",[a("a",{attrs:{href:"#el_materialStatics"}},[e._v("资料类型统计")])]):e._e(),e._v(" "),e.tabs.table.el?a("li",[a("a",{attrs:{href:"#el_exampleSearch"}},[e._v("样例数据查询")])]):e._e(),e._v(" "),e.tabs.table.ka?a("li",{class:e.GActive},[a("a",{attrs:{href:"#ka_key_field"}},[e._v("主键字段")])]):e._e(),e._v(" "),e.tabs.table.ka?a("li",[a("a",{attrs:{href:"#ka_arr_field"}},[e._v("属性字段")])]):e._e(),e._v(" "),e.tabs.table.ka?a("li",[a("a",{attrs:{href:"#ka_indexes"}},[e._v("索引")])]):e._e()])])],1)],1):e._e(),e._v(" "),e.tabs.dc?a("el-tab-pane",{attrs:{label:"解码配置",name:"dc"}},[a("decoding-config",{attrs:{rowData:e.rowData}})],1):e._e(),e._v(" "),e.tabs.rg?a("el-tab-pane",{attrs:{label:"区域信息",name:"rg"}},[a("area-config",{ref:"areaRef",attrs:{rowData:e.rowData}})],1):e._e(),e._v(" "),e.tabs.ds||e.tabs.pl?a("el-tab-pane",{attrs:{label:"数据服务",name:"ds"}},[a("serve-config",{ref:"serveRef",attrs:{rowData:e.rowData}})],1):e._e()],1),e._v(" "),a("el-backtop",{attrs:{target:".el-dialog.is-fullscreen"}})],1)],1)},s=[],r=a("f330"),o=a("d31a"),i=a("2b13"),n=a("5302"),c=a("0917"),u=a("1fc4"),d=a("6aa3"),m=a("d8c0"),p=a("b46e"),b=a("d563"),f=a("50b2"),g=a("8d4f"),h={components:{"v-column":r["default"],"v-index":o["default"],"part-key":i["default"],"data-statistics":n["default"],"sample-data":c["default"],"table-info":u["default"],"foreign-key":d["default"],"decoding-config":m["default"],"area-config":p["default"],"product-config":b["default"],"serve-config":f["default"]},props:{parentRowData:Object},data:function(){return{elActive:"",keyActive:"",GActive:"",storage:{E_table:{table:{el:!0,key:!1,ka:!1,key_el:!1},db:!0,dc:!1,rg:!1,ds:!1,pl:!1},F_table:{table:{el:!1,key:!1,ka:!0,key_el:!1},db:!0,dc:!1,rg:!0,ds:!1,pl:!0},ME_table:{table:{el:!0,key:!1,ka:!1,key_el:!1},db:!0,dc:!0,rg:!0,ds:!0,pl:!1},G_table:{table:{el:!1,key:!1,ka:!0,key_el:!1},db:!0,dc:!1,rg:!0,ds:!1,pl:!0},K_E_table:{table:{el:!0,key:!0,ka:!1,key_el:!0},db:!0,dc:!1,rg:!1,ds:!1,pl:!1},MK_table:{table:{el:!0,key:!0,ka:!1,key_el:!0},db:!0,dc:!0,rg:!0,ds:!0,pl:!1},NF_table:{table:{el:!0,key:!1,ka:!1,key_el:!1},db:!0,dc:!1,rg:!0,ds:!1,pl:!0},S_table:{table:{el:!1,key:!1,ka:!0,key_el:!1},db:!0,dc:!1,ds:!1,pl:!0,rg:!0},L_table:{table:{el:!0,key:!1,ka:!1,key_el:!1},db:!0,dc:!1,rg:!1,ds:!1,pl:!1}},dialogStatus:{publicMatedataDialog:!1,columnDialog:!1},rowData:this.parentRowData,tableActive:"db",tabs:{table:{el:!0,key:!1,ka:!1},db:!0,dc:!1,rg:!1,ds:!1,pl:!1},keyObj:{tableInfo:{},keyColumnData:[]},elObj:{tableInfo:{},elColumnData:[]},pubOptions:{},dirRule:{dirNorm:""},isDirEdit:!1}},methods:{getTableInfo:function(){var e=this;this.tabs=this.storage[this.rowData.STORAGE_TYPE],this.tabs.table.key?this.keyActive="active":this.tabs.table.el?this.elActive="active":this.tabs.table.ka&&(this.GActive="active"),Object(g["q"])({classLogic:this.rowData.LOGIC_ID}).then((function(t){if(200==t.code){for(var a=t.data,l=0;l<a.length;l++){var s=a[l];s.dbTableType&&"E"===s.dbTableType?e.elObj.tableInfo=s:s.dbTableType&&"K"===s.dbTableType&&(e.keyObj.tableInfo=s)}var r={nameCn:e.rowData.CLASS_NAME,dataServiceId:e.rowData.DATA_CLASS_ID,classLogic:{id:e.rowData.LOGIC_ID}};0==a.length&&(e.elObj.tableInfo=r,e.keyObj.tableInfo=r),e.elObj.tableInfo.id||(e.elObj.tableInfo=r),e.keyObj.tableInfo.id||(e.keyObj.tableInfo=r)}else e.$message({message:res.msg,type:"error"})}))},elColumnEdit:function(){1!=this.elObj.elColumnSel.length?this.$message({message:"请选择一条数据！",type:"warning"}):(this.columnEditData=JSON.parse(JSON.stringify(this.elObj.elColumnSel[0])),this.dialogStatus.columnDialog=!0)},keyColumnEdit:function(){1!=this.keyObj.keyColumnSel.length?this.$message({message:"请选择一条数据！",type:"warning"}):(this.columnEditData=JSON.parse(JSON.stringify(this.keyObj.keyColumnSel[0])),this.dialogStatus.columnDialog=!0)},editDir:function(){this.isDirEdit=!this.isDirEdit},saveDir:function(){var e=this;this.isDirEdit=!this.isDirEdit,this.dirRule.id=this.rowData.DATA_CLASS_ID,Object(g["E"])(this.dirRule).then((function(t){200==t.code&&e.$message({type:"success",message:"操作成功"})}))},celDir:function(){this.isDirEdit=!this.isDirEdit},getDir:function(){var e=this;"ME_table"!=this.rowData.STORAGE_TYPE&&"MK_table"!=this.rowData.STORAGE_TYPE&&"NF_table"!=this.rowData.STORAGE_TYPE||Object(g["v"])({id:this.rowData.DATA_CLASS_ID}).then((function(t){200==t.code&&(null==t.data?e.dirRule.dirNorm="":e.dirRule=t.data)}))},manageTabsClick:function(e){"区域信息"==e.label?this.$refs["areaRef"].forParent():"产品列表"==e.label?this.$refs["productRef"].forParent():"数据服务"==e.label&&this.$refs["serveRef"].forParent()},handleScroll:function(e){if("scrollbar-wrapper el-scrollbar__wrap"==e.target._prevClass)for(var t=e.srcElement.scrollTop,a=e.srcElement.scrollHeight,l=e.srcElement.clientHeight,s=document.getElementById("box"),r=s.getElementsByClassName("floor"),o=document.getElementById("rightNav"),i=o.getElementsByTagName("li"),n=0;n<r.length;n++){if(t>=r[n].offsetTop){for(var c=0;c<i.length;c++)i[c].className="";i[n].className="active"}if(t+l>=a){for(c=0;c<i.length;c++)i[c].className="";i[r.length-1].className="active"}}},floorClick:function(){for(var e=document.getElementById("rightNav"),t=e.getElementsByTagName("li"),a=0;a<t.length;a++)t[a].index=a,t[a].onclick=function(){for(var e=0;e<t.length;e++)t[e].className="";this.className="active"}}},mounted:function(){this.floorClick(),window.addEventListener("scroll",this.handleScroll,!0),this.getTableInfo(),this.getDir()},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)}},v=h,_=(a("4674"),a("2877")),y=Object(_["a"])(v,l,s,!1,null,null,null);t["default"]=y.exports},"5f58":function(e,t,a){},6297:function(e,t,a){"use strict";var l=a("e326"),s=a.n(l);s.a},"6aa3":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-form",{staticStyle:{border:"1px",padding:"5px"},attrs:{model:e.formData,"label-width":"130px",size:"small"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"键表字段"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择键表字段"},model:{value:e.formData.keyColumn,callback:function(t){e.$set(e.formData,"keyColumn",t)},expression:"formData.keyColumn"}},e._l(e.keyColumnData,(function(e){return a("el-option",{key:e.dbEleCode,attrs:{label:e.eleName,value:e.dbEleCode}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"要素表字段"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择要素表字段"},model:{value:e.formData.eleColumn,callback:function(t){e.$set(e.formData,"eleColumn",t)},expression:"formData.eleColumn"}},e._l(e.elColumnData,(function(e){return a("el-option",{key:e.dbEleCode,attrs:{label:e.eleName,value:e.dbEleCode}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否存在真实外键"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.isReal,callback:function(t){e.$set(e.formData,"isReal",t)},expression:"formData.isReal"}},[a("el-option",{attrs:{label:"存在",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"不存在",value:"false"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.deleteKeyInfo}},[e._v("删除")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"keyColumn",label:"键表字段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eleColumn",label:"要素表字段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isReal",label:"是否存在真实外键"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isReal?a("span",[e._v("是")]):e._e(),e._v(" "),0==t.row.isReal?a("span",[e._v("否")]):e._e()]}}])})],1)],1)},s=[],r=a("8d4f"),o={name:"ForeignKeyManage",props:{rowData:Object,keyTableInfo:Object,elTableInfo:Object},data:function(){return{tableData:[],formData:{tableId:"",keyColumn:"",eleColumn:"",isReal:"true"},keyColumnData:[],elColumnData:[],multipleSelection:[]}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},getKeyColumnData:function(){var e=this;Object(r["m"])({tableId:this.keyTableInfo.id}).then((function(t){200==t.code&&(e.keyColumnData=t.data,e.formData.tableId=e.keyTableInfo.id)}))},getElColumnData:function(){var e=this;Object(r["m"])({tableId:this.elTableInfo.id}).then((function(t){200==t.code&&(e.elColumnData=t.data)}))},add:function(){var e=this;console.log(this.formData),Object(r["p"])(this.formData).then((function(t){200==t.code?(e.$message({message:"外键关联新增成功！",type:"success"}),e.getForeignKeyData()):e.$message({message:t.msg,type:"error"})}))},deleteKeyInfo:function(){var e=this;0!=this.multipleSelection.length?Object(r["p"])().then((function(t){200==t.code?(e.$message({message:"外键关联删除成功！",type:"success"}),e.getForeignKeyData()):e.$message({message:t.msg,type:"error"})})):this.$message({message:"请选择一条数据",type:"info"})},getForeignKeyData:function(){var e=this;Object(r["o"])({logicId:this.rowData.LOGIC_ID}).then((function(t){200==t.code&&(e.tableData=t.data)}))}},mounted:function(){this.getForeignKeyData()},watch:{keyTableInfo:function(e){this.getKeyColumnData()},elTableInfo:function(e){this.getElColumnData()}}},i=o,n=a("2877"),c=Object(n["a"])(i,l,s,!1,null,"fdd40490",null);t["default"]=c.exports},"812e":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c}));var l=a("b775"),s="http://10.40.79.18:8005";function r(e){return Object(l["a"])({url:s+"/dictionary/level/list",method:"get",params:e})}function o(){return Object(l["a"])({url:s+"/dictionary/level/getAllLevel",method:"get"})}function i(e){return Object(l["a"])({url:s+"/dictionary/level/save",method:"post",data:e})}function n(e){return Object(l["a"])({url:s+"/dictionary/level/edit",method:"put",data:e})}function c(e){return Object(l["a"])({url:s+"/dictionary/level/"+e,method:"delete"})}},"8d4f":function(e,t,a){"use strict";a.d(t,"q",(function(){return r})),a.d(t,"m",(function(){return o})),a.d(t,"I",(function(){return i})),a.d(t,"r",(function(){return n})),a.d(t,"G",(function(){return c})),a.d(t,"o",(function(){return u})),a.d(t,"p",(function(){return d})),a.d(t,"v",(function(){return m})),a.d(t,"E",(function(){return p})),a.d(t,"c",(function(){return b})),a.d(t,"J",(function(){return f})),a.d(t,"K",(function(){return g})),a.d(t,"n",(function(){return h})),a.d(t,"i",(function(){return v})),a.d(t,"g",(function(){return _})),a.d(t,"B",(function(){return y})),a.d(t,"y",(function(){return D})),a.d(t,"x",(function(){return C})),a.d(t,"j",(function(){return S})),a.d(t,"C",(function(){return w})),a.d(t,"u",(function(){return k})),a.d(t,"s",(function(){return I})),a.d(t,"L",(function(){return x})),a.d(t,"b",(function(){return O})),a.d(t,"w",(function(){return E})),a.d(t,"k",(function(){return j})),a.d(t,"F",(function(){return T})),a.d(t,"l",(function(){return F})),a.d(t,"d",(function(){return $})),a.d(t,"f",(function(){return N})),a.d(t,"e",(function(){return A})),a.d(t,"a",(function(){return z})),a.d(t,"h",(function(){return M})),a.d(t,"H",(function(){return L})),a.d(t,"A",(function(){return q})),a.d(t,"z",(function(){return P})),a.d(t,"t",(function(){return R})),a.d(t,"D",(function(){return B})),a.d(t,"M",(function(){return K}));var l=a("b775"),s="http://10.40.79.18:8005";function r(e){return Object(l["a"])({url:s+"/dm/dataTable/gcl",method:"get",params:e})}function o(e){return Object(l["a"])({url:s+"/dm/tableColumn/findByTableId",method:"get",params:e})}function i(e){return Object(l["a"])({url:s+"/dm/tableColumn/delIds",method:"delete",params:e})}function n(e){return Object(l["a"])({url:s+"/dm/sharding/getByTableId",method:"get",params:e})}function c(e){return Object(l["a"])({url:s+"/dm/sharding/saves",method:"post",data:e})}function u(e){return Object(l["a"])({url:s+"/dm/foreignKey/findByClassLogicId",method:"get",params:e})}function d(e){return Object(l["a"])({url:s+"/dm/foreignKey/save",method:"post",data:e})}function m(e){return Object(l["a"])({url:s+"/dm/dataclassnorm/get",method:"get",params:e})}function p(e){return Object(l["a"])({url:s+"/dm/dataclassnorm/save",method:"post",data:e})}function b(e){return Object(l["a"])({url:s+"/dm/dataTable/save",method:"post",data:e})}function f(e){return Object(l["a"])({url:s+"/dm/tableColumn/save",method:"post",data:e})}function g(e){return Object(l["a"])({url:s+"/dm/tableColumn/saveList",method:"post",data:e})}function h(e){return Object(l["a"])({url:s+"/dm/tableIndex/findByTableId",method:"get",params:e})}function v(e){return Object(l["a"])({url:s+"/dm/tableIndex/del",method:"delete",data:e})}function _(e){return Object(l["a"])({url:s+"/dm/datastatistics/list",method:"get",params:e})}function y(e){return Object(l["a"])({url:s+"/dm/dataTable/sample",method:"post",data:e})}function D(e){return Object(l["a"])({url:s+"/dm/gridarea/save",method:"post",data:e})}function C(e){return Object(l["a"])({url:s+"/dm/gridarea/list",method:"get",params:e})}function S(e){return Object(l["a"])({url:s+"/dm/dataserverbaseinfo/findByDataCLassId",method:"get",params:e})}function w(e){return Object(l["a"])({url:s+"/dm/dataserverbaseinfo/save",method:"post",data:e})}function k(e){return Object(l["a"])({url:s+"/dm/dataTable/getDictByType",method:"get",params:e})}function I(e){return Object(l["a"])({url:s+"/dm/tableColumn/get",method:"get",params:e})}function x(e){return Object(l["a"])({url:s+"/dm/tableIndex/save",method:"post",data:e})}function O(e){return Object(l["a"])({url:s+"/dictionary/define/all",method:"get"})}function E(e){return Object(l["a"])({url:s+"/dm/gridarea/delByIds",method:"delete",params:e})}function j(e){return Object(l["a"])({url:s+"/dm/gridarea/findByDataServiceId",method:"get",params:e})}function T(e){return Object(l["a"])({url:s+"/system/gribParameterDefine/queryAll",method:"get",params:e})}function F(e){return Object(l["a"])({url:s+"/system/serviceCodeDefine/findByDbFcstEle",method:"get",params:e})}function $(e){return Object(l["a"])({url:s+"/dm/dataserverconfig/save",method:"post",data:e})}function N(e){return Object(l["a"])({url:s+"/dm/dataserverconfig/list",method:"get",params:e})}function A(e){return Object(l["a"])({url:s+"/dm/dataserverconfig/get",method:"get",params:e})}function z(e){return Object(l["a"])({url:s+"/dm/dataserverconfig/addList",method:"post",data:e})}function M(e){return Object(l["a"])({url:s+"/dm/dataserverconfig/delByIds",method:"delete",params:e})}function L(e){return Object(l["a"])({url:s+"/dm/tableColumn/syncSCode",method:"post",data:e})}function q(e){return Object(l["a"])({url:s+"/dm/tableColumn/queryCmccElements",method:"get",params:e})}function P(e){return Object(l["a"])({url:s+"/managefield/findData",method:"get",params:e})}function R(e){return Object(l["a"])({url:s+"/dm/classbaseinfo/getDataClassBaseInfo",method:"get",params:e})}function B(e){return Object(l["a"])({url:s+"/dm/classbaseinfo/saveDataClassBaseInfo",method:"get",params:e})}function K(e){return Object(l["a"])({url:s+"/dm/dataClass/updateIsAllLine",method:"get",params:e})}},9083:function(e,t,a){},a0d6:function(e,t,a){"use strict";var l=a("20d6e"),s=a.n(l);s.a},aabe:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container filedSearch"},[a("el-form",{ref:"queryForm",staticClass:"searchBox",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"表名称:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入表名称"},model:{value:e.queryParams.tableName,callback:function(t){e.$set(e.queryParams,"tableName",t)},expression:"queryParams.tableName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文简称:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入中文简称"},model:{value:e.queryParams.eleName,callback:function(t){e.$set(e.queryParams,"eleName",t)},expression:"queryParams.eleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字段名称:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入字段名称"},model:{value:e.queryParams.CElementCode,callback:function(t){e.$set(e.queryParams,"CElementCode",t)},expression:"queryParams.CElementCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.superClick}},[a("i",{staticClass:"el-icon-share"}),e._v("高级搜索\n      ")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"row-key":"id"}},[a("af-table-column",{attrs:{prop:"C_ELEMENT_CODE",label:"公共元数据字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.C_ELEMENT_CODE))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"DB_ELE_CODE",label:"字段名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DB_ELE_CODE))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"USER_ELE_CODE",label:"服务名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.USER_ELE_CODE))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"ELE_NAME",label:"中文简称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ELE_NAME))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"TYPE",label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.TYPE))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"ACCURACY",label:"数据精度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ACCURACY))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"CLASS_NAME",label:"资料名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.viewCell(t.row)}}},[e._v(e._s(t.row.CLASS_NAME))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"TABLE_NAME",label:"表名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.TABLE_NAME))])]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"LOGIC_NAME",label:"数据用途"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LOGIC_NAME))])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getList("")}}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"筛选",visible:e.dialogSuperSearch,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSuperSearch=t}}},[e.dialogSuperSearch?a("super-search",{ref:"supersearchinfo",attrs:{superObj:e.superObj},on:{searchFun:e.getList}}):e._e()],1),e._v(" "),a("el-dialog",{staticClass:"scrollDialog",attrs:{title:"表结构管理("+e.structureManageTitle+")",visible:e.structureManageVisible,width:"100%",fullscreen:!0,"before-close":e.closeStructureManage,top:"0"},on:{"update:visible":function(t){e.structureManageVisible=t}}},[e.structureManageVisible?a("StructureManageTable",{ref:"scrollDiv",attrs:{parentRowData:e.rowData}}):e._e()],1)],1)},s=[],r=a("b775"),o="http://10.40.79.18:8005";function i(e){return Object(r["a"])({url:o+"/dm/storageConfiguration/storageFieldList",method:"get",params:e})}var n=a("5e05"),c=a("7d2a"),u={components:{SuperSearch:c["a"],StructureManageTable:n["default"]},data:function(){return{rowData:[],structureManageVisible:!1,structureManageTitle:"",loading:!0,queryParams:{pageNum:1,pageSize:10,tableName:"",eleName:"",CElementCode:""},total:0,tableData:[],dialogSuperSearch:!1,superObj:{}}},created:function(){this.getList()},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList("")},getList:function(e){var t=this,a={};if(e){this.queryParams.pageNum=1;for(var l=e.domains,s={},r=0;r<l.length;r++)s[l[r].select]=l[r].value;a=Object.assign(s,this.queryParams)}else a=this.queryParams;console.log(a),this.loading=!0,i(a).then((function(e){t.tableData=e.data.pageData,t.total=e.data.totalCount,t.loading=!1}))},closeSuperSearch:function(){this.dialogSuperSearch=!1},superClick:function(){this.superObj=this.queryParams,this.superObj.pageName="存储字段检索",this.dialogSuperSearch=!0},handleClose:function(){this.dialogSuperSearch=!1},viewCell:function(e){this.rowData=e,this.structureManageTitle=e.CLASS_NAME,this.structureManageVisible=!0},closeStructureManage:function(){this.handleQuery(),this.structureManageVisible=!1}}},d=u,m=(a("bf09"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,null,null);t["default"]=p.exports},b46e:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"gridEreaDefine"},[a("el-row",{staticClass:"areaTop"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteArea}},[e._v("删除")])],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"areaTop"},[a("el-col",{attrs:{span:20}},[a("el-select",{staticClass:"areaSelect",attrs:{placeholder:"请选择区域",size:"small"},model:{value:e.selectArea,callback:function(t){e.selectArea=t},expression:"selectArea"}},e._l(e.optionsArea,(function(e,t){return a("el-option",{key:t,attrs:{label:e.areaId,value:e.areaId}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cel}},[e._v("取消")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaId",label:"区域代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaRegionDesc",label:"区域描述"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.searchFun}})],1)},s=[],r=(a("ac6a"),a("8d4f")),o={name:"gridEreaDefine",props:{rowData:Object},components:{},data:function(){return{queryParams:{pageNum:1,pageSize:10,id:""},total:0,tableData:[],optionsArea:[],isEdit:!1,multipleSelection:[],selectArea:""}},methods:{searchFun:function(){var e=this;console.log(this.queryParams),Object(r["x"])(this.queryParams).then((function(t){200==t.code?(e.tableData=t.data.pageData,e.total=t.data.totalCount):e.$message({message:t.msg,type:"error"})}))},handleSelectionChange:function(e){this.multipleSelection=e},getoptionsArea:function(){var e=this;Object(r["b"])().then((function(t){e.optionsArea=t.data}))},add:function(){this.isEdit=!this.isEdit},cel:function(){this.isEdit=!this.isEdit},save:function(){var e=this;this.isEdit=!this.isEdit;new Date;var t={};t.areaId=this.selectArea,this.optionsArea.forEach((function(a){a.areaId==e.selectArea&&(t.areaRegionDesc=a.areaDesc)})),t.dataServiceId=this.rowData.DATA_CLASS_ID,console.log(t),Object(r["y"])(t).then((function(t){200==t.code?(e.searchFun(),e.$message({type:"success",message:"新增成功"})):e.$message({message:t.msg,type:"error"})}))},deleteArea:function(){var e=this,t=[];this.multipleSelection.forEach((function(e){t.push(e.id)})),0!=t.length?(console.log(t),Object(r["w"])({ids:t.join(",")}).then((function(t){200==t.code?(e.searchFun(),e.$message({type:"success",message:"删除成功"})):e.$message({message:t.msg,type:"error"})}))):this.$message({type:"error",message:"请选择一条数据"})},forParent:function(){this.searchFun(),this.getoptionsArea()}},mounted:function(){}},i=o,n=(a("2832"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,null,null);t["default"]=c.exports},bf09:function(e,t,a){"use strict";var l=a("cbfa"),s=a.n(l);s.a},c3fa:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"handleTableBaseMsg"},[a("el-form",{ref:"formClass",attrs:{model:e.tableFormObject,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"crpindname",label:"负责人名:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.crpindname,callback:function(t){e.$set(e.tableFormObject,"crpindname",t)},expression:"tableFormObject.crpindname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cmainfreq",label:"维护和更新频率:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cmainfreq,callback:function(t){e.$set(e.tableFormObject,"cmainfreq",t)},expression:"tableFormObject.cmainfreq"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cdatascal",label:"空间分辨率:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cdatascal,callback:function(t){e.$set(e.tableFormObject,"cdatascal",t)},expression:"tableFormObject.cdatascal"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cgeodesc",label:"地理覆盖描述:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cgeodesc,callback:function(t){e.$set(e.tableFormObject,"cgeodesc",t)},expression:"tableFormObject.cgeodesc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"ceastbl",label:"最东经度:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.ceastbl,callback:function(t){e.$set(e.tableFormObject,"ceastbl",t)},expression:"tableFormObject.ceastbl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cwestbl",label:"最西经度:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cwestbl,callback:function(t){e.$set(e.tableFormObject,"cwestbl",t)},expression:"tableFormObject.cwestbl"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cnorthbl",label:"最北纬度:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cnorthbl,callback:function(t){e.$set(e.tableFormObject,"cnorthbl",t)},expression:"tableFormObject.cnorthbl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"csouthbl",label:"最南纬度:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.csouthbl,callback:function(t){e.$set(e.tableFormObject,"csouthbl",t)},expression:"tableFormObject.csouthbl"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cnettype",label:"站网:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cnettype,callback:function(t){e.$set(e.tableFormObject,"cnettype",t)},expression:"tableFormObject.cnettype"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cnetname",label:"站网名称:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cnetname,callback:function(t){e.$set(e.tableFormObject,"cnetname",t)},expression:"tableFormObject.cnetname"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"ccreatName",label:"申请人名称:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.ccreatName,callback:function(t){e.$set(e.tableFormObject,"ccreatName",t)},expression:"tableFormObject.ccreatName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"cchecker",label:"审核人名称:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tableFormObject.cchecker,callback:function(t){e.$set(e.tableFormObject,"cchecker",t)},expression:"tableFormObject.cchecker"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"csource",label:"数据源:"}},[a("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.tableFormObject.csource,callback:function(t){e.$set(e.tableFormObject,"csource",t)},expression:"tableFormObject.csource"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"cidabs",label:"数据说明:"}},[a("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.tableFormObject.cidabs,callback:function(t){e.$set(e.tableFormObject,"cidabs",t)},expression:"tableFormObject.cidabs"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveUserInfo("formClass")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.handleClose("formClass")}}},[e._v("取消")])],1)],1)},s=[],r=a("8d4f"),o={name:"handleTableBaseMsg",props:{handleId:{type:String}},data:function(){return{tableFormObject:{crpindname:"",cmainfreq:"",cdatascal:"",cgeodesc:"",ceastbl:"",cwestbl:"",cnorthbl:"",csouthbl:"",cnettype:"",cnetname:"",ccreatName:"",csource:"",cidabs:""},rules:{crpindname:[{required:!0,message:"请输入负责人名",trigger:"blur"}],cmainfreq:[{required:!0,message:"请输入维护和更新频率",trigger:"blur"}],cdatascal:[{required:!0,message:"请输入空间分布率",trigger:"blur"}],cgeodesc:[{required:!0,message:"请输入地理覆盖描述",trigger:"blur"}],ceastbl:[{required:!0,message:"请输入最东经度",trigger:"blur"}],cwestbl:[{required:!0,message:"请输入最西经度",trigger:"blur"}],cnorthbl:[{required:!0,message:"请输入最北纬度",trigger:"blur"}],csouthbl:[{required:!0,message:"请输入最南纬度",trigger:"blur"}],cnettype:[{required:!0,message:"请输入站网",trigger:"blur"}],cnetname:[{required:!0,message:"请输入站网名称",trigger:"blur"}],ccreatName:[{required:!0,message:"请输入申请人名称",trigger:"blur"}],cchecker:[{required:!0,message:"请输入审核人名称",trigger:"blur"}],csource:[{required:!0,message:"请输入数据源",trigger:"blur"}],cidabs:[{required:!0,message:"请输入数据说明",trigger:"blur"}]}}},created:function(){this.init()},methods:{init:function(){var e=this;this.tableFormObject.id=this.handleId,this.handleId&&Object(r["t"])({id:this.handleId}).then((function(t){200==t.code&&(e.tableFormObject=t.data)}))},saveUserInfo:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(r["D"])(t.tableFormObject).then((function(e){0==e.data.returnCode?(t.$message({message:"编辑成功",type:"success"}),t.$emit("handleClose")):t.$message({message:e.data.returnMessage,type:"warning"})}))}))},handleClose:function(e){this.$refs[e].resetFields(),this.$emit("handleClose")}}},i=o,n=(a("6297"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,null,null);t["default"]=c.exports},c4d9:function(e,t,a){},c9b9:function(e,t,a){},cbfa:function(e,t,a){},d31a:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-button-group",{staticStyle:{padding:"8px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addIndex}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:e.editIndex}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.deleteIndex}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"selectionTable",attrs:{data:e.indexItem,border:""},on:{"selection-change":function(t){return e.indexItemSel=t},"row-click":e.handleClickTableRow}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"索引名称",prop:"indexName"}}),e._v(" "),a("el-table-column",{attrs:{label:"索引列",prop:"indexColumn"}}),e._v(" "),a("el-table-column",{attrs:{label:"索引类型",prop:"indexType"}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"65%",title:e.indexTitle,visible:e.dialogStatus.indexDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"indexDialog",t)}}},[a("div",[a("el-form",{ref:"indexForm",attrs:{model:e.indexForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"索引名称"}},[a("el-input",{attrs:{size:"small"},model:{value:e.indexForm.indexName,callback:function(t){e.$set(e.indexForm,"indexName",t)},expression:"indexForm.indexName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"索引类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择索引类型"},model:{value:e.indexForm.indexType,callback:function(t){e.$set(e.indexForm,"indexType",t)},expression:"indexForm.indexType"}},e._l(e.indexTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictValue+"["+e.dictLabel+"]",value:e.dictValue}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"索引字段"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"",placeholder:"请选择索引字段"},model:{value:e.indexForm.indexColumn,callback:function(t){e.$set(e.indexForm,"indexColumn",t)},expression:"indexForm.indexColumn"}},e._l(e.columnData,(function(e){return a("el-option",{key:e.dbEleCode,attrs:{label:e.dbEleCode+"["+e.eleName+"]",value:e.dbEleCode}})})),1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.trueIndex}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)])],1)},s=[],r=(a("96cf"),a("3b8d")),o=(a("28a5"),a("8d4f")),i={props:{tableInfo:Object},data:function(){return{indexForm:{indexName:"TRAF_WEA_CHN_REP_TAB_UK",indexColumn:[]},indexItem:[],indexItemSel:[],columnData:[],indexTypeOptions:[],dialogStatus:{indexDialog:!1},indexTitle:"新增索引"}},methods:{handleClickTableRow:function(e,t,a){this.$refs.selectionTable.toggleRowSelection(e)},cancel:function(){this.$refs["indexForm"].resetFields(),this.dialogStatus.indexDialog=!1},getIndexTable:function(){var e=this;Object(o["n"])({tableId:this.tableInfo.id}).then((function(t){200==t.code?e.indexItem=t.data:e.$message({message:t.msg,type:"error"})}))},addIndex:function(){this.tableInfo.id?(this.indexTitle="新增索引",this.indexForm.indexColumn=[],this.getDictByTypeMethods("table_index_type"),this.dialogStatus.indexDialog=!0):this.$message({type:"error",message:"表不存在"})},editIndex:function(){1!=this.indexItemSel.length?this.$message({message:"请选择一条数据！",type:"warning"}):(this.getDictByTypeMethods("table_index_type"),this.indexTitle="编辑索引",this.indexForm=JSON.parse(JSON.stringify(this.indexItemSel[0])),this.indexForm.indexColumn=this.indexForm.indexColumn.split(","),this.dialogStatus.indexDialog=!0)},getDictByTypeMethods:function(e){var t=this;Object(o["u"])({dictType:e}).then((function(e){200==e.code&&(t.indexTypeOptions=e.data)}))},trueIndex:function(){var e=this;this.indexForm.tableId=this.tableInfo.id,this.indexForm.indexColumn=this.indexForm.indexColumn.join(","),console.log(this.indexForm),Object(o["L"])(this.indexForm).then((function(t){200==t.code?(e.$message({message:"操作成功",type:"success"}),e.getIndexTable(),e.$refs["indexForm"].resetFields(),e.dialogStatus.indexDialog=!1):e.$message({type:"error",message:"操作失败"})}))},deleteIndex:function(){var e=this;1!=this.indexItemSel.length?this.$message({message:"请选择一条数据！",type:"warning"}):Object(o["i"])({id:this.indexItemSel[0].id}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功"}),e.getIndexTable()):e.$message({message:t.msg,type:"error"})}))}},mounted:function(){},watch:{tableInfo:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.indexItem=this.tableInfo.tableIndexList,this.columnData=this.tableInfo.columns;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},n=i,c=a("2877"),u=Object(c["a"])(n,l,s,!1,null,null,null);t["default"]=u.exports},d3b3:function(e,t,a){"use strict";var l=a("c9b9"),s=a.n(l);s.a},d563:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"productList"},[a("el-row",{staticClass:"areaTop"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteProduct}},[e._v("删除")])],1),e._v(" "),a("el-row",{staticClass:"areaTop"},[a("el-col",{attrs:{span:20}},[a("el-select",{staticClass:"areaSelect",attrs:{placeholder:"请选择区域",size:"small"},model:{value:e.selectArea,callback:function(t){e.selectArea=t},expression:"selectArea"}},e._l(e.optionsArea,(function(e){return a("el-option",{key:e.value,attrs:{label:e.area_id.split("[")[0],value:e.area_id}})})),1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area_id",label:"区域代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.area_id.split("[")[0]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"db_fcst_ele",label:"格点要素存储代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ele_service_id",label:"要素服务代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level_type",label:"层次类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grib_version",label:"grib版本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"field_type",label:"场类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"genprocess_type",label:"加工过程类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ele_name_cn",label:"要素中文名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ele_hours",label:"资料时次"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_unit",label:"时效单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level_list",label:"层次列表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_list",label:"预报时效列表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grid_pixel",label:"空间分辨率"}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"productDialog",attrs:{width:"80%",title:e.dialogTitle,visible:e.productDialog,"append-to-body":""},on:{"update:visible":function(t){e.productDialog=t}}},[a("el-form",{ref:"formName",attrs:{size:"mini",rules:e.rules,model:e.msgFormDialog,"label-width":"140px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"区域代码",prop:"area_id"}},[a("el-select",{staticClass:"areaSelect",attrs:{placeholder:"请选择区域",size:"small"},model:{value:e.msgFormDialog.area_id,callback:function(t){e.$set(e.msgFormDialog,"area_id",t)},expression:"msgFormDialog.area_id"}},e._l(e.optionsArea,(function(e){return a("el-option",{key:e.value,attrs:{label:e.area_id.split("[")[0],value:e.area_id}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"格点要素存储代码",prop:"db_fcst_ele"}},[a("el-select",{attrs:{placeholder:"格点要素存储代码",size:"small"},model:{value:e.msgFormDialog.db_fcst_ele,callback:function(t){e.$set(e.msgFormDialog,"db_fcst_ele",t)},expression:"msgFormDialog.db_fcst_ele"}},e._l(e.optionsFcst,(function(e){return a("el-option",{key:e.value,attrs:{label:e.ele_code_short,value:e.ele_code_short}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素服务代码",prop:"ele_service_id"}},[a("el-input",{attrs:{placeholder:"要素服务代码"},model:{value:e.msgFormDialog.ele_service_id,callback:function(t){e.$set(e.msgFormDialog,"ele_service_id",t)},expression:"msgFormDialog.ele_service_id"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次类型",prop:"level_type"}},[a("el-input",{attrs:{placeholder:"层次类型"},model:{value:e.msgFormDialog.level_type,callback:function(t){e.$set(e.msgFormDialog,"level_type",t)},expression:"msgFormDialog.level_type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"grib版本",prop:"grib_version"}},[a("el-input",{attrs:{placeholder:"grib版本"},model:{value:e.msgFormDialog.grib_version,callback:function(t){e.$set(e.msgFormDialog,"grib_version",t)},expression:"msgFormDialog.grib_version"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"场类型",prop:"field_type"}},[a("el-input",{attrs:{placeholder:"场类型"},model:{value:e.msgFormDialog.field_type,callback:function(t){e.$set(e.msgFormDialog,"field_type",t)},expression:"msgFormDialog.field_type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"加工过程类型",prop:"genprocess_type"}},[a("el-input",{attrs:{placeholder:"加工过程类型"},model:{value:e.msgFormDialog.genprocess_type,callback:function(t){e.$set(e.msgFormDialog,"genprocess_type",t)},expression:"msgFormDialog.genprocess_type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素中文名",prop:"ele_name_cn"}},[a("el-input",{attrs:{placeholder:"要素中文名"},model:{value:e.msgFormDialog.ele_name_cn,callback:function(t){e.$set(e.msgFormDialog,"ele_name_cn",t)},expression:"msgFormDialog.ele_name_cn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资料时次",prop:"ele_hours"}},[a("el-input",{attrs:{placeholder:"资料时次"},model:{value:e.msgFormDialog.ele_hours,callback:function(t){e.$set(e.msgFormDialog,"ele_hours",t)},expression:"msgFormDialog.ele_hours"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时效单位",prop:"time_unit"}},[a("el-input",{attrs:{placeholder:"时效单位"},model:{value:e.msgFormDialog.time_unit,callback:function(t){e.$set(e.msgFormDialog,"time_unit",t)},expression:"msgFormDialog.time_unit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"层次列表",prop:"level_list"}},[a("el-input",{attrs:{placeholder:"层次列表"},model:{value:e.msgFormDialog.level_list,callback:function(t){e.$set(e.msgFormDialog,"level_list",t)},expression:"msgFormDialog.level_list"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预报时效列表",prop:"time_list"}},[a("el-input",{attrs:{placeholder:"预报时效列表"},model:{value:e.msgFormDialog.time_list,callback:function(t){e.$set(e.msgFormDialog,"time_list",t)},expression:"msgFormDialog.time_list"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"空间分辨率",prop:"grid_pixel"}},[a("el-input",{attrs:{placeholder:"空间分辨率"},model:{value:e.msgFormDialog.grid_pixel,callback:function(t){e.$set(e.msgFormDialog,"grid_pixel",t)},expression:"msgFormDialog.grid_pixel"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancleHandle("formName")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueHandle("formName")}}},[e._v("确 定")])],1)],1)],1)},s=[],r=(a("ac6a"),a("db72")),o={name:"productList",props:{rowData:Object},components:{},data:function(){return{tableData:[],dataTotal:0,optionsArea:[],optionsFcst:[],multipleSelection:[],selectArea:"",searchObj:{area_id:this.selectArea,data_class_id:this.rowData.data_class_id},dialogTitle:"新增数据服务信息",productDialog:!1,msgFormDialog:{data_class_id:this.rowData.data_class_id},rules:{area_id:[{required:!0,message:"请选择区域代码",trigger:"change"}],db_fcst_ele:[{required:!0,message:"请选择格点要素存储代码",trigger:"change"}],ele_service_id:[{required:!0,message:"请输入要素服务代码",trigger:"blur"}],level_type:[{required:!0,message:"请输入层次类型",trigger:"blur"}],grib_version:[{required:!0,message:"请输入grib版本",trigger:"blur"}],field_type:[{required:!0,message:"请输入场类型",trigger:"blur"}],genprocess_type:[{required:!0,message:"请输入加工过程类型",trigger:"blur"}],ele_name_cn:[{required:!0,message:"请输入要素中文名",trigger:"blur"}],ele_hours:[{required:!0,message:"请输入资料时次",trigger:"blur"}],time_unit:[{required:!0,message:"请输入时效单位",trigger:"blur"}],level_list:[{required:!0,message:"请输入层次列表",trigger:"blur"}],time_list:[{required:!0,message:"请输入预报时效列表",trigger:"blur"}],grid_pixel:[{required:!0,message:"请输入空间分辨率",trigger:"blur"}]}}},methods:{searchFun:function(){var e=this,t=this.$refs.pagination.paginateObj;this.searchObj=Object(r["a"])({},this.searchObj,{},t),this.axios.get(interfaceObj.TableStructure_getProductModeDef,{params:this.searchObj}).then((function(t){e.tableData=t.data.data,e.dataTotal=t.data.total}))},paginationChange:function(){this.searchFun()},handleSelectionChange:function(e){this.multipleSelection=e},getoptionsArea:function(){var e=this;this.axios.get(interfaceObj.TableStructure_getGridArea,{params:{data_class_id:this.rowData.data_class_id}}).then((function(t){e.optionsArea=t.data.data}))},getoptionsFcst:function(){var e=this;this.axios.get(interfaceObj.TableStructure_modeEleQueryAll).then((function(t){e.optionsFcst=t.data.data}))},add:function(){this.dialogTitle="新增数据服务信息",this.getoptionsFcst(),this.productDialog=!0},edit:function(){1!=this.multipleSelection.length?this.$message({type:"info",message:"请选择一条数据"}):(this.dialogTitle="编辑数据服务信息",this.msgFormDialog=this.multipleSelection[0],this.productDialog=!0)},deleteProduct:function(){var e=this,t=[];this.multipleSelection.forEach((function(e){t.push(e.mode_data_def_id)})),this.axios.get(interfaceObj.TableStructure_deleteProductList,{params:{mode_data_def_id:t.join(",")}}).then((function(t){0==t.data.returnCode?(e.$message({type:"success",message:"删除成功"}),e.searchFun()):e.$message({type:"error",message:t.data.returnMessage})}))},cancleHandle:function(e){this.$refs[e].resetFields(),this.productDialog=!1},trueHandle:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return console.log("error submit!!"),!1;"新增数据服务信息"==t.dialogTitle?(t.msgFormDialog.data_class_id=t.rowData.data_class_id,delete t.msgFormDialog.data_service_id,t.axios.post(interfaceObj.TableStructure_addProductList,t.msgFormDialog).then((function(a){0==a.data.returnCode?(t.$message({type:"success",message:"新增成功"}),t.searchFun(),t.$refs[e].resetFields(),t.productDialog=!1):t.$message({type:"error",message:a.data.returnMessage})}))):(t.msgFormDialog.data_class_id=t.msgFormDialog.data_service_id,delete t.msgFormDialog.data_service_id,t.axios.post(interfaceObj.TableStructure_updateProductList,t.msgFormDialog).then((function(a){0==a.data.returnCode?(t.$message({type:"success",message:"编辑成功"}),t.searchFun(),t.$refs[e].resetFields(),t.productDialog=!1):t.$message({type:"error",message:a.data.returnMessage})})))}))},forParent:function(){this.searchFun(),this.getoptionsArea()}}},i=o,n=(a("1d38"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,null,null);t["default"]=c.exports},d8c0:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-button-group",{staticStyle:{padding:"8px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-claim",size:"small"},on:{click:function(t){e.dialogStatus.optConfig=!0}}},[e._v("选择")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-folder-add",size:"small"},on:{click:e.addConfig}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:e.editConfig}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:e.deleteConfig}},[e._v("删除")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,stripe:""},on:{"selection-change":function(t){return e.selData=t}}},[a("el-table-column",{attrs:{type:"index",index:e.table_index}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"处理编码",prop:"dataDpcId"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素存储短名",prop:"eleCodeShort"}}),e._v(" "),a("el-table-column",{attrs:{label:"学科",prop:"subjectId"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数种类",prop:"classify"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数编码",prop:"parameterId"}}),e._v(" "),a("el-table-column",{attrs:{label:"GRIB版本",prop:"gribVersion"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否为共有配置",prop:"publicConfig"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板编号",prop:"templateId"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.searchFun}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:"选择",visible:e.dialogStatus.optConfig,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"optConfig",t)}}},[a("div",[a("el-form",{attrs:{model:e.optSearchObj,inline:!0,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"短名"}},[a("el-input",{model:{value:e.optSearchObj.eleCodeShort,callback:function(t){e.$set(e.optSearchObj,"eleCodeShort",t)},expression:"optSearchObj.eleCodeShort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板ID"}},[a("el-input",{model:{value:e.optSearchObj.templateId,callback:function(t){e.$set(e.optSearchObj,"templateId",t)},expression:"optSearchObj.templateId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchOptConfig(1)}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{ref:"choseTable",attrs:{data:e.optData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"短名",prop:"eleCodeShort"}}),e._v(" "),a("el-table-column",{attrs:{label:"科目",prop:"subjectId"}}),e._v(" "),a("el-table-column",{attrs:{label:"分类",prop:"classify"}}),e._v(" "),a("el-table-column",{attrs:{label:"GRIB版本",prop:"gribVersion"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数ID",prop:"parameterId"}}),e._v(" "),a("el-table-column",{attrs:{label:"共有配置",prop:"publicConfig"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素描述",prop:"element_cn"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板ID",prop:"templateId"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.optDataTotal>0,expression:"optDataTotal>0"}],attrs:{total:e.optDataTotal,page:e.optSearchObj.pageNum,limit:e.optSearchObj.pageSize},on:{"update:page":function(t){return e.$set(e.optSearchObj,"pageNum",t)},"update:limit":function(t){return e.$set(e.optSearchObj,"pageSize",t)},pagination:e.searchOptConfig}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.canalc()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueHandle("table")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:e.dialogTitle,visible:e.dialogStatus.config,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"config",t)}}},[a("el-form",{ref:"formData",attrs:{size:"mini",model:e.formData,"label-width":"120px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"处理编码",prop:"dataDpcId"}},[a("el-input",{attrs:{size:"small",placeholder:"处理编码"},model:{value:e.formData.dataDpcId,callback:function(t){e.$set(e.formData,"dataDpcId",t)},expression:"formData.dataDpcId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"格点要素短名",prop:"eleCodeShort"}},[a("el-input",{attrs:{size:"small",placeholder:"格点要素短名"},model:{value:e.formData.eleCodeShort,callback:function(t){e.$set(e.formData,"eleCodeShort",t)},expression:"formData.eleCodeShort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学科",prop:"subjectId"}},[a("el-input",{attrs:{size:"small",placeholder:"学科",type:"number"},model:{value:e.formData.subjectId,callback:function(t){e.$set(e.formData,"subjectId",t)},expression:"formData.subjectId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分类",prop:"classify"}},[a("el-input",{attrs:{size:"small",placeholder:"分类",type:"number"},model:{value:e.formData.classify,callback:function(t){e.$set(e.formData,"classify",t)},expression:"formData.classify"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数ID",prop:"parameterId"}},[a("el-input",{attrs:{size:"small",placeholder:"参数ID"},model:{value:e.formData.parameterId,callback:function(t){e.$set(e.formData,"parameterId",t)},expression:"formData.parameterId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"GRIB版本",prop:"gribVersion"}},[a("el-input",{attrs:{size:"small",placeholder:"GRIB版本",type:"number"},model:{value:e.formData.gribVersion,callback:function(t){e.$set(e.formData,"gribVersion",t)},expression:"formData.gribVersion"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模板编号",prop:"templateId"}},[a("el-input",{attrs:{size:"small",placeholder:"模板编号"},model:{value:e.formData.templateId,callback:function(t){e.$set(e.formData,"templateId",t)},expression:"formData.templateId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否共有配置"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"Y","inactive-value":"N"},model:{value:e.formData.publicConfig,callback:function(t){e.$set(e.formData,"publicConfig",t)},expression:"formData.publicConfig"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueHandle("formData")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.canalc()}}},[e._v("取 消")])],1)],1)],1)},s=[],r=(a("ac6a"),a("b775")),o="http://10.40.79.18:8005";function i(e){return Object(r["a"])({url:o+"/dm/griddecoding/list",method:"get",params:e})}function n(e){return Object(r["a"])({url:o+"/dm/griddecoding/save",method:"post",data:e})}function c(e){return Object(r["a"])({url:o+"/dm/griddecoding/saveList",method:"post",data:e})}function u(e){return Object(r["a"])({url:o+"/dm/griddecoding/get",method:"get",params:e})}function d(e){return Object(r["a"])({url:o+"/dm/griddecoding/delByIds",method:"delete",params:e})}var m=a("4e1f"),p={name:"DecodingConfigManage",props:{rowData:Object},components:{},data:function(){return{tableData:[],total:0,dialogStatus:{optConfig:!1,config:!1},queryParams:{pageNum:1,pageSize:10},optData:[],optSearchObj:{pageNum:1,pageSize:10,eleCodeShort:"",templateId:""},optDataTotal:0,selData:[],formData:{},multipleSelection:[],dialogTitle:"新增解码配置信息",rules:{dataDpcId:[{required:!0,message:"请输入处理编码",trigger:"blur"}],eleCodeShort:[{required:!0,message:"请输入格点要素短名",trigger:"blur"}],subjectId:[{required:!0,message:"请输入学科",trigger:"blur"}],classify:[{required:!0,message:"分类",trigger:"blur"}],parameterId:[{required:!0,message:"请输入参数ID",trigger:"blur"}],templateId:[{required:!0,message:"请输入模板编号",trigger:"blur"}],gribVersion:[{required:!0,message:"请输入GRIB版本",trigger:"blur"}]}}},methods:{table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},handleSelectionChange:function(e){this.multipleSelection=e},searchFun:function(){var e=this;this.queryParams.dataServiceId=this.rowData.DATA_CLASS_ID,console.log(this.queryParams),i(this.queryParams).then((function(t){e.tableData=t.data.pageData,e.total=t.data.totalCount}))},searchOptConfig:function(e){var t=this;e&&1==e&&(this.optSearchObj.pageNum=1),Object(m["c"])(this.optSearchObj).then((function(e){t.optData=e.data.pageData,t.optDataTotal=e.data.totalCount,t.loading=!1}))},addConfig:function(){this.formData={},this.dialogTitle="新增解码配置信息",this.dialogStatus.config=!0},editConfig:function(){var e=this;1==this.selData.length?(this.dialogTitle="编辑解码配置信息",u({id:this.selData[0].id}).then((function(t){e.formData=t.data,e.dialogStatus.config=!0}))):this.$message({message:"请选择一条数据！",type:"warning"})},deleteConfig:function(){var e=this;if(0!=this.selData.length){var t=[];this.selData.forEach((function(e){t.push(e.id)})),d({ids:t.join(",")}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功"}),e.canalc()):e.$message({type:"error",message:t.msg})}))}else this.$message({message:"请选择一条数据！",type:"warning"})},canalc:function(){this.formData={},this.multipleSelection=[],this.dialogStatus.optConfig=!1,this.dialogStatus.config=!1,this.searchFun()},trueHandle:function(e){var t=this;"formData"==e?this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.formData.dataServiceId=t.rowData.DATA_CLASS_ID,n(t.formData).then((function(e){200==e.code?(t.$message({message:"操作成功！",type:"success"}),t.canalc()):t.$message({message:e.msg,type:"error"})}))})):0==this.multipleSelection.length?this.$message({type:"info",message:"请选择一条数据"}):(this.multipleSelection.forEach((function(e){e.dataServiceId=t.rowData.DATA_CLASS_ID,e.dataDpcId=t.rowData.DATA_CLASS_ID})),this.add(this.multipleSelection))},add:function(e){var t=this;c({gridDecodingList:e}).then((function(e){200==e.code?(t.$message({message:"操作成功！",type:"success"}),t.canalc()):t.$message({message:e.msg,type:"error"})}))}},mounted:function(){this.searchFun(),this.searchOptConfig(1)}},b=p,f=a("2877"),g=Object(f["a"])(b,l,s,!1,null,"44406227",null);t["default"]=g.exports},e326:function(e,t,a){},e622:function(e,t,a){},ee9a:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"l",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"k",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"i",(function(){return b})),a.d(t,"e",(function(){return f})),a.d(t,"d",(function(){return g}));var l=a("b775"),s="http://10.40.79.18:8005";function r(e){return Object(l["a"])({url:s+"/dm/dataClass/getListBYIn",method:"get",params:e})}function o(e){return Object(l["a"])({url:s+"/dm/dataClass/getLogicByDdataId",method:"get",params:e})}function i(e){return Object(l["a"])({url:s+"/dm/dataTable/gcl",method:"get",params:e})}function n(e){return Object(l["a"])({url:s+"/dm/dataClass/delByClass",method:"delete",params:e})}function c(e){return Object(l["a"])({url:s+"/dm/dataClass/save",method:"post",data:e})}function u(e){return Object(l["a"])({url:s+"/dm/dataClass/findByClassId",method:"get",params:e})}function d(e){return Object(l["a"])({url:s+"/dm/logicDefine/getAllLd",method:"get",params:e})}function m(e){return Object(l["a"])({url:s+"/dm/dataTable/paste",method:"post",params:e})}function p(){return Object(l["a"])({url:s+"/dm/product/enable",method:"get"})}function b(e){return Object(l["a"])({url:s+"/dm/dataClass/getNewDataClassId",method:"get",params:e})}function f(e){return Object(l["a"])({url:s+"/dm/database/findByDatabaseDefineId",method:"get",params:e})}function g(){return Object(l["a"])({url:s+"/api/dbfile/downloadFile",method:"get",params:{name:"add-column"},responseType:"arraybuffer"})}},f330:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticClass:"columnTemplate"},[a("el-button-group",{staticStyle:{padding:"8px"}},[e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-c-scale-to-original"},on:{click:e.getColumnTables}},[e._v("复用字段")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.columnAdd}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:e.columnEdit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.columnDelete}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-copy"},on:{click:e.columnCopy}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-add"},on:{click:e.columnPaste}},[e._v("粘贴")]),e._v(" "),e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-order"},on:{click:e.columnControl}},[e._v("质控字段")]):e._e()],1),e._v(" "),a("el-button-group",{staticStyle:{float:"right",padding:"8px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-sort"},on:{click:e.handleSort}},[e._v("排序")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:function(t){return e.exportCode("code")}}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload2"},on:{click:e.importTelplate}},[e._v("导入")]),e._v(" "),e.tableStructureManageContral?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-operation"},on:{click:e.syncServe}},[e._v("同步服务名称")]):e._e()],1),e._v(" "),a("el-table",{ref:"selectionTable",attrs:{data:e.columnData,border:"",height:"550"},on:{"selection-change":function(t){return e.selColumnData=t},"row-click":e.handleClickTableRow}},[a("el-table-column",{attrs:{type:"index",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),e.tableStructureManageContral?a("el-table-column",{attrs:{label:"公共元数据字段",prop:"dbEleCode",width:"200px","show-overflow-tooltip":!0}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"字段编码",prop:"celementCode",width:"200px","show-overflow-tooltip":!0}}),e._v(" "),e.tableStructureManageContral?a("el-table-column",{attrs:{label:"服务代码",prop:"userEleCode",width:"200px","show-overflow-tooltip":!0}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"中文简称",prop:"eleName","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"数据类型",prop:"type",width:"100px","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"数据精度",prop:"accuracy",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素单位",prop:"unitCn",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可空",prop:"isNull",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isNull?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否可改",prop:"isUpdate",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isUpdate?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否显示",prop:"isShow",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isShow?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否主键",prop:"isPrimaryKey",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isNull?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"中文描述",prop:"nameCn",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否管理字段",prop:"isManager",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isManager?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否修改数据库",prop:"updateDatabase",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.updateDatabase?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"默认值",prop:"defaultValue",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",prop:"serialNumber",width:"100px"}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:"公共元数据",visible:e.dialogStatus.publicMatedataDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"publicMatedataDialog",t)}}},[a("div",[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activePublicName,callback:function(t){e.activePublicName=t},expression:"activePublicName"}},[a("el-tab-pane",{attrs:{label:"公共元数据字段",name:"first"}},[a("div",{staticClass:"tableSearch"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"数据元代码"}},[a("el-input",{attrs:{placeholder:"数据源代码",size:"small"},model:{value:e.searchMatedata.c_datatype,callback:function(t){e.$set(e.searchMatedata,"c_datatype",t)},expression:"searchMatedata.c_datatype"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文名称"}},[a("el-input",{attrs:{placeholder:"中文名称",size:"small"},model:{value:e.searchMatedata.c_datum_level,callback:function(t){e.$set(e.searchMatedata,"c_datum_level",t)},expression:"searchMatedata.c_datum_level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务名称"}},[a("el-input",{attrs:{placeholder:"服务名称",size:"small"},model:{value:e.searchMatedata.c_datumtype,callback:function(t){e.$set(e.searchMatedata,"c_datumtype",t)},expression:"searchMatedata.c_datumtype"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.searchFun("matedata")}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.pubData.matedata,border:"",height:"320"},on:{"selection-change":e.handleSelectionMatedata}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据元代码",prop:"celementCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"中文名称",prop:"c_element_namech"}}),e._v(" "),a("el-table-column",{attrs:{label:"英文名称",prop:"c_element_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据类型",prop:"c_datatype",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"计量单位",prop:"c_element_unit",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据精度",prop:"c_element_pre",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"特征值",prop:"c_charactervalue"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"c_status",width:"60px"}}),e._v(" "),a("el-table-column",{attrs:{label:"要素说明",prop:"c_notes",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"服务名称",prop:"c_short_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否质控",prop:"c_is_control",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:t.row.switch,callback:function(a){e.$set(t.row,"switch",a)},expression:"scope.row.switch"}})]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"管理字段",name:"second"}},[a("div",{staticClass:"tableSearch"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"字段分组"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchMmdata.groupId,callback:function(t){e.$set(e.searchMmdata,"groupId",t)},expression:"searchMmdata.groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.AllManageGroup,(function(e){return a("el-option",{key:e.value,attrs:{label:e.groupId,value:e.groupId}})}))],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"字段名称"}},[a("el-input",{attrs:{placeholder:"字段名称",size:"small"},model:{value:e.searchMmdata.dbEleCode,callback:function(t){e.$set(e.searchMmdata,"dbEleCode",t)},expression:"searchMmdata.dbEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"中文名称"}},[a("el-input",{attrs:{placeholder:"中文名称",size:"small"},model:{value:e.searchMmdata.dbEleName,callback:function(t){e.$set(e.searchMmdata,"dbEleName",t)},expression:"searchMmdata.dbEleName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务名称"}},[a("el-input",{attrs:{placeholder:"服务名称",size:"small"},model:{value:e.searchMmdata.userEleCode,callback:function(t){e.$set(e.searchMmdata,"userEleCode",t)},expression:"searchMmdata.userEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btnmm",attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.searchFun("mmdata")}}},[e._v("搜索")])],1)],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.pubData.mmdata,border:"",height:"320"},on:{"selection-change":e.handleSelectionMmdata}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"字段名称",prop:"dbEleCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"服务名称",prop:"userEleCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"中文名称",prop:"dbEleName"}}),e._v(" "),a("el-table-column",{attrs:{label:"字段短名",prop:"eleName"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{label:"字段精度",prop:"data_precision",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可为空",prop:"isNull",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isNull?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否可更新",prop:"isUpdate",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isUpdate?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.truePublic}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStatus.publicMatedataDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:e.codeTitle,visible:e.dialogStatus.columnDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"columnDialog",t)}}},[a("el-form",{ref:"formCodeName",attrs:{size:"mini",rules:e.rules,model:e.columnEditData,"label-width":"140px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公共元数据字段",prop:"dbEleCode"}},[a("el-input",{attrs:{placeholder:"公共元数据字段",size:"small"},model:{value:e.columnEditData.dbEleCode,callback:function(t){e.$set(e.columnEditData,"dbEleCode",t)},expression:"columnEditData.dbEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"字段名称",prop:"celementCode"}},[a("el-input",{attrs:{placeholder:"字段名称",size:"small"},model:{value:e.columnEditData.celementCode,callback:function(t){e.$set(e.columnEditData,"celementCode",t)},expression:"columnEditData.celementCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"服务名称",prop:"userEleCode"}},[a("el-input",{attrs:{placeholder:"服务名称",size:"small"},model:{value:e.columnEditData.userEleCode,callback:function(t){e.$set(e.columnEditData,"userEleCode",t)},expression:"columnEditData.userEleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中文简称",prop:"eleName"}},[a("el-input",{attrs:{placeholder:"中文简称",size:"small"},model:{value:e.columnEditData.eleName,callback:function(t){e.$set(e.columnEditData,"eleName",t)},expression:"columnEditData.eleName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据类型"},model:{value:e.columnEditData.type,callback:function(t){e.$set(e.columnEditData,"type",t)},expression:"columnEditData.type"}},e._l(e.dataTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"要素单位",prop:"unitCn"}},[a("el-input",{attrs:{placeholder:"要素单位",size:"small"},model:{value:e.columnEditData.unitCn,callback:function(t){e.$set(e.columnEditData,"unitCn",t)},expression:"columnEditData.unitCn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"数据精度"}},[a("el-input",{attrs:{placeholder:"数据精度",size:"small"},model:{value:e.columnEditData.accuracy,callback:function(t){e.$set(e.columnEditData,"accuracy",t)},expression:"columnEditData.accuracy"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否可空"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isNull,callback:function(t){e.$set(e.columnEditData,"isNull",t)},expression:"columnEditData.isNull"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否可改"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isUpdate,callback:function(t){e.$set(e.columnEditData,"isUpdate",t)},expression:"columnEditData.isUpdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isShow,callback:function(t){e.$set(e.columnEditData,"isShow",t)},expression:"columnEditData.isShow"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否主键"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isPrimaryKey,callback:function(t){e.$set(e.columnEditData,"isPrimaryKey",t)},expression:"columnEditData.isPrimaryKey"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否管理字段"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},model:{value:e.columnEditData.isManager,callback:function(t){e.$set(e.columnEditData,"isManager",t)},expression:"columnEditData.isManager"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"默认值"}},[a("el-input",{attrs:{placeholder:"默认值",size:"small"},model:{value:e.columnEditData.defaultValue,callback:function(t){e.$set(e.columnEditData,"defaultValue",t)},expression:"columnEditData.defaultValue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中文描述"}},[a("el-input",{attrs:{placeholder:"中文描述",size:"small"},model:{value:e.columnEditData.nameCn,callback:function(t){e.$set(e.columnEditData,"nameCn",t)},expression:"columnEditData.nameCn"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序号",prop:"serialNumber"}},[a("el-input",{attrs:{placeholder:"序号",size:"small"},model:{value:e.columnEditData.serialNumber,callback:function(t){e.$set(e.columnEditData,"serialNumber",t)},expression:"columnEditData.serialNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"clear"})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.trueCode("formCodeName")}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancleCode("formCodeName")}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"80%",title:"字段排序",visible:e.dialogStatus.codeSortDialog,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogStatus,"codeSortDialog",t)}}},[a("div",{staticClass:"dragBox"},[a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[a("el-alert",{attrs:{title:"请拖动字段实现排序",type:"success",closable:!1}}),e._v(" "),a("draggable",e._b({staticClass:"list-group",attrs:{tag:"ul"},on:{start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}},model:{value:e.dragList,callback:function(t){e.dragList=t},expression:"dragList"}},"draggable",e.dragOptions,!1),[a("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.dragList,(function(t){return a("li",{key:t.celementCode,staticClass:"list-group-item"},[a("i",{class:t.fixed?"fa fa-anchor":"glyphicon glyphicon-pushpin",attrs:{"aria-hidden":"true"},on:{click:function(e){t.fixed=!t.fixed}}}),e._v(" "),a("el-row",{staticClass:"sortRow"},[a("el-col",{attrs:{span:4}},[a("span",[e._v(e._s("序号:")+e._s(t.serialNumber))])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("span",[e._v(e._s("字段名称:")+e._s(t.celementCode))])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("span",[e._v(e._s("中文简称:")+e._s(t.eleName))])])],1)],1)})),0)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.trueSort}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStatus.codeSortDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"exportCodeDialog",attrs:{width:"30%",title:"操作",visible:e.exportInnerVisible,"append-to-body":""},on:{"update:visible":function(t){e.exportInnerVisible=t}}},[a("el-row",{attrs:{"v-if":e.exportInnerVisible}},[a("el-col",{attrs:{span:12}},[a("input-excel",{on:{getResult:e.getMyExcelData}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")])],1)],1)],1)],1)},s=[],r=(a("a481"),a("96cf"),a("3b8d")),o=(a("ac6a"),a("a8b3")),i=a("7ca0"),n=a("310e"),c=a.n(n),u=a("8d4f"),d=a("ee9a"),m=a("f6cd"),p=a("4b67"),b={props:{tableInfo:Object,tableType:String,rowData:Object},components:{draggable:c.a,inputExcel:o["a"]},data:function(){var e=function(e,t,a){var l="";"dbEleCode"==e.field?l="公共元数据字段":"celementCode"==e.field&&(l="字段名称"),""===t?a(new Error("请输入"+l)):Object(p["c"])(t)?a():a(new Error(l+"不允许输入小写字母和中文，且需以大写字母开头"))};return{tableStructureManageContral:!1,codeTitle:"新增字段",dialogStatus:{columnDialog:!1,publicMatedataDialog:!1,codeSortDialog:!1},exportInnerVisible:!1,filepath:"",columnEditData:{unitCn:"N",isManager:!1,isPrimaryKey:!1,isShow:!1,isUpdate:!1,isNull:!1},columnData:[],selColumnData:[],pubData:{matedata:[],mmdata:[]},searchMatedata:{c_datatype:"",c_datum_level:"",c_datumtype:""},searchMmdata:{groupId:"",dbEleCode:"",dbEleName:"",userEleCode:""},dataTypes:[],dragList:[],matedataSelection:[],mmdataSelection:[],activePublicName:"first",repeatIndex:0,rules:{dbEleCode:[{required:!0,validator:e,trigger:"blur"}],celementCode:[{required:!0,validator:e,trigger:"blur"}],userEleCode:[{required:!0,message:"请输入服务名称",trigger:"blur"}],eleName:[{required:!0,message:"请输入中文简称",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],unitCn:[{required:!0,message:"请输入要素单位",trigger:"blur"}],serialNumber:[{required:!0,message:"请输入序号",trigger:"blur"}]},fileTemp:null,fileListUpload:[],AllManageGroup:[]}},methods:{handleExport:function(){var e=this;Object(d["d"])().then((function(t){e.downloadfileCommon(t)}))},handleClickTableRow:function(e,t,a){this.$refs.selectionTable.toggleRowSelection(e)},getColumnTables:function(){this.getmatedata(),this.getmmdata(),this.matedataSelection=[],this.mmdataSelection=[],this.dialogStatus.publicMatedataDialog=!0},getmatedata:function(){var e=this;this.searchMatedata.c_datum_code=this.rowData.D_DATA_ID,console.log(this.searchMatedata),Object(u["A"])(this.searchMatedata).then((function(t){200==t.code&&(t.data.forEach((function(e){e.switch=!1})),e.pubData.matedata=t.data)}))},getmmdata:function(){var e=this;Object(u["z"])(this.searchMmdata).then((function(t){e.pubData.mmdata=t.data})).catch((function(e){}))},getAllGroup:function(){var e=this;Object(m["h"])().then((function(t){t.success?e.AllManageGroup=t.data:e.$message({type:"error",message:t.msg})}))},getCodeTable:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return void 0,"E-show"==this.tableType&&"true",e.next=4,Object(u["m"])({tableId:this.tableInfo.id}).then((function(e){200==e.code&&(t.columnData=e.data,t.$emit("reloadTableInfo"))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),columnAdd:function(){this.tableInfo.id?(this.columnEditData={unitCn:"N",isManager:!1,isPrimaryKey:!1,isShow:!1,isUpdate:!1,isNull:!1},this.getDictByTypeMethods("table_column_type"),this.codeTitle="新增字段",this.dialogStatus.columnDialog=!0):this.$message({type:"error",message:"表不存在"})},columnEdit:function(){var e=this;1!=this.selColumnData.length?this.$message({message:"请选择一条数据！",type:"warning"}):(this.codeTitle="编辑字段",this.getDictByTypeMethods("table_column_type"),Object(u["s"])({id:this.selColumnData[0].id}).then((function(t){200==t.code&&(e.columnEditData=t.data,e.dialogStatus.columnDialog=!0)})))},getDictByTypeMethods:function(e){var t=this;Object(u["u"])({dictType:e}).then((function(e){200==e.code&&(t.dataTypes=e.data)}))},columnDelete:function(){var e=this;0==this.selColumnData.length?this.$message({message:"请选择一条数据！",type:"warning"}):this.$confirm("确认要删除选中字段吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.selColumnData.forEach((function(e){t.push(e.id)})),console.log(t.join(",")),Object(u["I"])({ids:t.join(",")}).then((function(t){200==t.code?(e.$message({message:"删除成功",type:"success"}),e.getCodeTable()):e.$message({message:"删除失败",type:"warning"})}))})).catch((function(){}))},searchFun:function(e){"matedata"==e?this.getmatedata():"mmdata"==e&&this.getmmdata()},cancleCode:function(e){this.$refs[e].resetFields(),this.dialogStatus.columnDialog=!1},trueCode:function(e){var t=this;this.$refs[e].validate((function(a){a&&(t.columnEditData.tableId=t.tableInfo.id,"E-show"==t.tableType&&(t.columnEditData.isKvK="true"),console.log(t.columnEditData),Object(u["J"])(t.columnEditData).then((function(a){200==a.code?(t.$message({message:"操作成功",type:"success"}),t.$refs[e].resetFields(),t.dialogStatus.columnDialog=!1,t.getCodeTable(),t.columnEditData=[]):t.$message({type:"error",message:"操作失败"})})))}))},handleSort:function(){0==this.columnData.length&&this.$message({type:"error",message:"当前没有字段，无法排序"}),this.dragList=this.columnData,this.dialogStatus.codeSortDialog=!0},trueSort:function(){var e=this;this.dragList.forEach((function(e,t){e.serialNumber=t})),Object(u["K"])({tableColumnList:this.dragList}).then((function(t){200==t.code?(e.$message({message:"排序成功！",type:"success"}),e.getCodeTable()):e.$message({message:t.msg,type:"error"})})),this.dialogStatus.codeSortDialog=!1},exportCode:function(e){if(this.tableInfo.id)if("code"==e){var t=["公共元数据字段","字段编码","服务代码","中文简称","数据精度","要素单位","是否可空","是否可改","是否显示","是否主键","中文描述","是否管理字段","默认值","序号"],a=["dbEleCode","celementCode","userEleCode","eleName","accuracy","unitCn","isNull","isUpdate","isShow","isPrimaryKey","nameCn","isManager","updateDatabase","defaultValue","serialNumber"];Object(i["a"])(t,a,this.columnData)}else window.location.href="";else this.$message({type:"error",message:"表不存在"})},handleExceed:function(){this.$message.warning("当前限制选择1个文件")},importTelplate:function(){this.tableInfo.id?this.exportInnerVisible=!0:this.$message({type:"error",message:"表不存在"})},columnCopy:function(){if(0==this.selColumnData.length)this.$message({message:"请选择一条数据！",type:"warning"});else{var e=[];this.selColumnData.forEach((function(t){var a={};t.id="",t.tableId="",a=t,e.push(a)})),sessionStorage.setItem("copyColumn",JSON.stringify(e)),this.$message({message:"复制成功",type:"success"})}},columnPaste:function(){var e=this;this.repeatIndex=0;var t=JSON.parse(sessionStorage.getItem("copyColumn"));t=this.array_diff(t,this.columnData,"paste");var a="";this.repeatIndex>0&&(a="去重("+this.repeatIndex+")条,"),0==t.length?this.$message({message:a+"已无可插入数据!",type:"info"}):this.$alert("是否插入"+t.length+"条复制字段","温馨提示",{confirmButtonText:"确定",callback:function(a){t.forEach((function(t){t.id="",t.tableId=e.tableInfo.id})),Object(u["K"])({tableColumnList:t}).then((function(t){200==t.code?(e.$message({message:"插入成功！",type:"success"}),e.getCodeTable()):e.$message({message:t.msg,type:"error"})}))}})},handleSelectionMatedata:function(e){this.matedataSelection=e},handleSelectionMmdata:function(e){this.mmdataSelection=e},truePublic:function(){var e=this,t=[];this.repeatIndex=0,"first"==this.activePublicName?this.matedataSelection.length>0?(t=this.array_diff(this.matedataSelection,this.columnData,"first"),t.forEach((function(e){if(e.switch){var a=Object.assign({},e),l=e.celementCode.substr(0,1),s=e.celementCode.replace(l,"Q");a.eleName=e.eleName+"质量标志",a.celementCode=s,a.dbEleCode=s,t.push(a)}}))):this.$message({message:a+"无剩余可添加数据!",type:"info"}):"second"==this.activePublicName&&(this.mmdataSelection.length>0?t=this.array_diff(this.mmdataSelection,this.columnData,"second"):this.$message({message:a+"无剩余可添加数据!",type:"info"}));var a="";this.repeatIndex>0&&(a="去重("+this.repeatIndex+")条,"),t.length>0?("E-show"==this.tableType&&t.forEach((function(t){t.isKvK="true",t.id="",t.tableId=e.tableInfo.id})),t.forEach((function(t){t.id="",t.tableId=e.tableInfo.id})),Object(u["K"])({tableColumnList:t}).then((function(t){200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogStatus.columnDialog=!1,e.getCodeTable()):e.$message({type:"error",message:"操作失败"})}))):this.$message({message:a+"无剩余可添加数据!",type:"success"}),this.dialogStatus.publicMatedataDialog=!1},columnControl:function(){var e=this;0==this.selColumnData.length?this.$message({message:"请选择一条数据！",type:"error"}):this.$confirm("是否插入"+this.selColumnData.length+"条质控字段","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.selColumnData;t.forEach((function(e){var a=Object.assign({},e),l=e.celementCode.substr(0,1),s=e.celementCode.replace(l,"Q");a.eleName=e.eleName+"质量标志",a.celementCode=s,a.dbEleCode=s,a.id="",t.push(a)})),console.log(t),Object(u["K"])({tableColumnList:t}).then((function(t){200==t.code?(e.$message({message:"排序成功！",type:"success"}),e.getCodeTable()):e.$message({message:t.msg,type:"error"})}))})).catch((function(){}))},syncServe:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.columnData.length){e.next=3;break}return this.$message({message:"请选择一条数据",type:"error"}),e.abrupt("return");case 3:Object(u["H"])({tableColumnList:this.columnData}).then((function(e){200==e.code?(t.$message({message:"同步成功！",type:"success"}),t.getCodeTable()):t.$message({message:e.msg,type:"error"})}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMyExcelData:function(e){var t=this;console.log(e),e.forEach((function(e){e.id="",e.tableId=t.tableInfo.id})),Object(u["K"])({tableColumnList:e}).then((function(e){200==e.code?(t.$message({message:"操作成功",type:"success"}),t.$refs[formName].resetFields(),t.dialogStatus.columnDialog=!1,t.getCodeTable(),t.columnEditData=[]):t.$message({type:"error",message:"操作失败"})}))},array_diff:function(e,t,a){for(var l=this,s=0;s<t.length;s++)for(var r=0;r<e.length;r++)e[r].celementCode==t[s].celementCode&&(e.splice(r,1),r-=1,this.repeatIndex++);var o=[];return e.forEach((function(e){var t={};"paste"==a?(t=e,t.id=l.tableInfo.id,o.push(t)):("first"==a?(t.eleName=e.c_element_namech,t.dbEleCode=e.celementCode,t.celementCode=e.celementCode,t.type=e.c_datatype,t.accuracy=e.c_element_pre,t.isNull=!1,t.isUpdate=!1):"second"==a&&(t.eleName=e.dbEleName,t.dbEleCode=e.dbEleCode,t.celementCode=e.dbEleCode,t.type=e.type,t.accuracy=e.data_precision,t.isNull=e.isNull,t.isUpdate=e.isUpdate),t.switch=e.switch,t.id=l.tableInfo.id,t.isManager=!1,t.updateDatabase=!1,t.isPrimaryKey=!1,t.isShow=!1,t.nameCn=e.c_notes,t.serialNumber=0,t.unit=e.c_element_unit,t.unitCn=e.c_element_unit,t.userEleCode=e.c_short_name,o.push(t))})),o}},mounted:function(){var e=this;Object(d["c"])().then((function(t){"true"==t.data?e.tableStructureManageContral=!0:e.tableStructureManageContral=!1}))},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}},watch:{tableInfo:function(e){this.tableType,this.columnData=this.tableInfo.columns}}},f=b,g=(a("5bd8"),a("2877")),h=Object(g["a"])(f,l,s,!1,null,null,null);t["default"]=h.exports},f6cd:function(e,t,a){"use strict";a.d(t,"h",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"j",(function(){return n})),a.d(t,"k",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return b})),a.d(t,"g",(function(){return f}));var l=a("b775"),s="http://10.40.79.18:8005";function r(){return Object(l["a"])({url:s+"/managefield/findAllManageGroup",method:"get"})}function o(e){return Object(l["a"])({url:s+"/managefield/addManageGroup",method:"post",params:e})}function i(e){return Object(l["a"])({url:s+"/managefield/editManageGroup",method:"PUT",params:e})}function n(e){return Object(l["a"])({url:s+"/managefield/findManageFieldByPk",method:"get",params:e})}function c(e){return Object(l["a"])({url:s+"/managefield/page",method:"get",params:e})}function u(e){return Object(l["a"])({url:s+"/managefield/delManageGroup",method:"DELETE",params:e})}function d(e){return Object(l["a"])({url:s+"/managefield/addManageField",method:"post",params:e})}function m(){return Object(l["a"])({url:s+"/restApi/dicmgn/findByType?type=2",method:"get"})}function p(e){return Object(l["a"])({url:s+"/managefield/delManageField",method:"DELETE",params:e})}function b(e){return Object(l["a"])({url:s+"/managefield/editManageField",method:"post",data:e})}function f(e){return Object(l["a"])({url:s+"/managefield/export",method:"get",params:e,responseType:"arraybuffer"})}}}]);