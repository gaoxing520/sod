(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce35a896","chunk-0599a004","chunk-23070428"],{"4ad0":function(e,t,r){"use strict";var a=r("5118"),l=r.n(a);l.a},5118:function(e,t,r){},"5e16":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"fileHandleDict"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"字段编码:",prop:"dbEleCode"}},[r("el-input",{attrs:{placeholder:"请输入字段编码"},model:{value:e.ruleForm.dbEleCode,callback:function(t){e.$set(e.ruleForm,"dbEleCode",t)},expression:"ruleForm.dbEleCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"服务代码:",prop:"userEleCode"}},[r("el-input",{attrs:{placeholder:"请输入服务代码"},model:{value:e.ruleForm.userEleCode,callback:function(t){e.$set(e.ruleForm,"userEleCode",t)},expression:"ruleForm.userEleCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"中文名:",prop:"dbEleName"}},[r("el-input",{model:{value:e.ruleForm.dbEleName,callback:function(t){e.$set(e.ruleForm,"dbEleName",t)},expression:"ruleForm.dbEleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字段类型:",prop:"type"}},[r("el-select",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.dictTypes,(function(e){return r("el-option",{key:e.keyCol,attrs:{label:e.keyCol,value:e.keyCol}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"组名称:",prop:"groupId"}},[r("el-select",{model:{value:e.ruleForm.groupId,callback:function(t){e.$set(e.ruleForm,"groupId",t)},expression:"ruleForm.groupId"}},e._l(e.GroupNames,(function(e,t){return r("el-option",{key:t,attrs:{label:e.groupName,value:e.groupId}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段精度:"}},[r("el-input",{model:{value:e.ruleForm.dataPrecision,callback:function(t){e.$set(e.ruleForm,"dataPrecision",t)},expression:"ruleForm.dataPrecision"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否可为空:",prop:"nullAble"}},[r("el-select",{model:{value:e.ruleForm.nullAble,callback:function(t){e.$set(e.ruleForm,"nullAble",t)},expression:"ruleForm.nullAble"}},[r("el-option",{attrs:{label:"是",value:"true"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"false"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否可更新:",prop:"updateAble"}},[r("el-select",{model:{value:e.ruleForm.updateAble,callback:function(t){e.$set(e.ruleForm,"updateAble",t)},expression:"ruleForm.updateAble"}},[r("el-option",{attrs:{label:"是",value:"true"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"false"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.cancelDialog()}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")])],1)],1)},l=[],n=(r("6b54"),r("96cf"),r("3b8d")),o=r("4b67"),i=r("f6cd"),s={name:"filedSearchDeploy",components:{},props:{handleDictObj:{type:Object},handleGroup:{type:Array}},data:function(){var e=function(e,t,r){""===t?r(new Error("请输入字段编码")):Object(o["c"])(t)?r():r(new Error("字段编码不允许输入小写字母和中文，且需以大写字母开头"))},t=function(e,t,r){""===t?r(new Error("请输入服务代码")):Object(o["c"])(t)?r():r(new Error("服务代码不允许输入小写字母和中文，且需以大写字母开头"))},r=function(e,t,r){""===t?r(new Error("请输入中文名")):Object(o["a"])(t)?r():r(new Error("中文名称只能输入中文"))};return{ruleForm:{dbEleCode:"",userEleCode:"",dbEleName:"",nullAble:"",updateAble:"",groupId:"",type:""},GroupNames:[],dictTypes:[],rules:{dbEleCode:[{required:!0,validator:e,trigger:"blur"}],userEleCode:[{required:!0,validator:t,trigger:"blur"}],dbEleName:[{required:!0,validator:r,trigger:"blur"}],groupId:[{required:!0,message:"请选择组名称",trigger:"change"}],nullAble:[{required:!0,message:"请选择是否可为空",trigger:"change"}],updateAble:[{required:!0,message:"请选择是否可更新",trigger:"change"}],type:[{required:!0,message:"请选择字段类型",trigger:"change"}]}}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.GroupNames=this.handleGroup,e.next=3,this.getDict();case 3:this.handleDictObj&&this.handleDictObj.id&&(this.handleDictObj.nullAble=this.handleDictObj.nullAble.toString(),this.handleDictObj.updateAble=this.handleDictObj.updateAble.toString(),this.ruleForm=this.handleDictObj);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{cancelDialog:function(){this.$emit("cancelDialog",!1)},getDict:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["i"])().then((function(e){"200"==e.code&&(t.dictTypes=e.data)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),trueDialog:function(e){var t=this;if(console.log(this.ruleForm),"varchar"==this.ruleForm.type||"char"==this.ruleForm.type||"numberic"==this.ruleForm.type||"number"==this.ruleForm.type||"int"==this.ruleForm.type||"float"==this.ruleForm.type||"decimal"==this.ruleForm.type){if(""==this.ruleForm.dataPrecision)return void this.$message({type:"error",message:"该类型字段必须填写数据精度"});if(!Object(o["i"])(this.ruleForm.dataPrecision))return void this.$message({type:"error",message:"字段精度只能输入大于0"})}this.$refs[e].validate((function(e){e&&(t.handleDictObj.id?Object(i["e"])(t.ruleForm).then((function(e){"200"==e.code?(t.$message({type:"success",message:"编辑成功"}),t.$emit("cancelDialog","Field")):t.$message({type:"error",message:"编辑失败"})})):Object(i["a"])(t.ruleForm).then((function(e){"200"==e.code?(t.$message({type:"success",message:"新增成功"}),t.$emit("cancelDialog","Field")):t.$message({type:"error",message:"新增失败"})})))}))}}},u=s,c=(r("4ad0"),r("2877")),d=Object(c["a"])(u,a,l,!1,null,null,null);t["default"]=d.exports},b24e:function(e,t,r){"use strict";var a=r("ea9e"),l=r.n(a);l.a},ea9e:function(e,t,r){},f4cc:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"fileHandleTree"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"groupName",label:"分组名:"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入分组名"},model:{value:e.ruleForm.groupName,callback:function(t){e.$set(e.ruleForm,"groupName",t)},expression:"ruleForm.groupName"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog("ruleForm")}}},[e._v("确 定")]),e._v(" "),r("el-button",{on:{click:function(t){return e.cancelDialog()}}},[e._v("取 消")])],1)],1)},l=[],n=r("f6cd"),o={name:"filedSearchDeploy",components:{},props:{handleTreeObj:{type:Object}},data:function(){return{ruleForm:{groupId:"",groupName:""},rules:{groupName:[{required:!0,message:"分组名称为必输项",trigger:"blur"}]}}},created:function(){this.ruleForm=this.handleTreeObj},methods:{cancelDialog:function(){this.$emit("cancelDialog",!1)},trueDialog:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.ruleForm.groupId?Object(n["f"])(t.ruleForm).then((function(e){"200"==e.code?(t.$message({type:"success",message:"编辑成功"}),t.$emit("cancelDialog","Tree")):t.$message({type:"error",message:"编辑失败"})})):Object(n["b"])(t.ruleForm).then((function(e){"200"==e.code?(t.$message({type:"success",message:"新增成功"}),t.$emit("cancelDialog","Tree")):t.$message({type:"error",message:"新增失败"})})))}))}}},i=o,s=r("2877"),u=Object(s["a"])(i,a,l,!1,null,null,null);t["default"]=u.exports},f6cd:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"j",(function(){return s})),r.d(t,"k",(function(){return u})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return d})),r.d(t,"i",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"g",(function(){return g}));var a=r("b775"),l="http://10.40.79.18:8005";function n(){return Object(a["a"])({url:l+"/managefield/findAllManageGroup",method:"get"})}function o(e){return Object(a["a"])({url:l+"/managefield/addManageGroup",method:"post",params:e})}function i(e){return Object(a["a"])({url:l+"/managefield/editManageGroup",method:"PUT",params:e})}function s(e){return Object(a["a"])({url:l+"/managefield/findManageFieldByPk",method:"get",params:e})}function u(e){return Object(a["a"])({url:l+"/managefield/page",method:"get",params:e})}function c(e){return Object(a["a"])({url:l+"/managefield/delManageGroup",method:"DELETE",params:e})}function d(e){return Object(a["a"])({url:l+"/managefield/addManageField",method:"post",params:e})}function m(){return Object(a["a"])({url:l+"/restApi/dicmgn/findByType?type=2",method:"get"})}function p(e){return Object(a["a"])({url:l+"/managefield/delManageField",method:"DELETE",params:e})}function h(e){return Object(a["a"])({url:l+"/managefield/editManageField",method:"post",data:e})}function g(e){return Object(a["a"])({url:l+"/managefield/export",method:"get",params:e,responseType:"arraybuffer"})}},f760:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container fielddManagement"},[r("el-row",{attrs:{gutter:40}},[r("el-col",{staticClass:"elTreeAsideBox",attrs:{span:4,xs:24}},[r("div",{staticClass:"sourceTreeTopOp"},[r("el-button-group",[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addType()}}}),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.editType()}}}),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteAlert()}}})],1)],1),e._v(" "),r("div",{staticClass:"treeTitle"},[e._v("管理字段分组")]),e._v(" "),r("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper elTreeScroll"}},[r("el-tree",{ref:"elTree",attrs:{data:e.treeData,props:e.defaultProps,"expand-on-click-node":!1,"node-key":"groupId","default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),r("el-col",{attrs:{span:20,xs:24}},[r("el-form",{ref:"queryForm",staticClass:"searchBox",attrs:{model:e.queryParams,inline:!0}},[r("el-form-item",{attrs:{label:"字段编码"}},[r("el-input",{attrs:{size:"small",placeholder:"字段编码"},model:{value:e.queryParams.dbEleCode,callback:function(t){e.$set(e.queryParams,"dbEleCode",t)},expression:"queryParams.dbEleCode"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")])],1)],1),e._v(" "),r("el-row",{staticClass:"handleTableBox",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addRow()}}},[e._v("新增字典")])],1),e._v(" "),r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.editRow()}}},[e._v("编辑字典")])],1),e._v(" "),r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteRow()}}},[e._v("删除字典")])],1),e._v(" "),r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.tableData,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"index",width:"40",index:e.table_index}}),e._v(" "),r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),e._e(),e._v(" "),r("el-table-column",{attrs:{label:"字段编码",prop:"dbEleCode"}}),e._v(" "),r("el-table-column",{attrs:{label:"服务编码",prop:"userEleCode"}}),e._v(" "),r("el-table-column",{attrs:{label:"中文名称",prop:"dbEleName"}}),e._v(" "),r("el-table-column",{attrs:{label:"字段类型",prop:"type"}}),e._v(" "),r("el-table-column",{attrs:{label:"字段精度",prop:"dataPrecision"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否可为空",prop:"nullAble",formatter:e.formatBoolean}})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.handleQuery}})],1)],1),e._v(" "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.TreeDialog},on:{"update:visible":function(t){e.TreeDialog=t}}},[e.TreeDialog?r("handleTree",{attrs:{handleTreeObj:e.handleTreeObj},on:{cancelDialog:e.cancelDialog}}):e._e()],1),e._v(" "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogTitle,visible:e.DictDialog},on:{"update:visible":function(t){e.DictDialog=t}}},[e.DictDialog?r("handleDict",{attrs:{handleGroup:e.handleGroup,handleDictObj:e.handleDictObj},on:{cancelDialog:e.cancelDialog}}):e._e()],1)],1)},l=[],n=(r("ac6a"),r("96cf"),r("3b8d")),o=r("f4cc"),i=r("5e16"),s=r("f6cd"),u={components:{handleTree:o["default"],handleDict:i["default"]},data:function(){return{highlight:!0,treeData:[],defaultProps:{children:"children",label:"groupName"},checkNode:{},dialogTitle:"",TreeDialog:!1,handleTreeObj:{},handleGroup:[],tableData:[],total:0,queryParams:{dbEleCode:"",groupId:"",pageNum:1,pageSize:10},multipleSelection:[],DictDialog:!1,handleDictObj:{}}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTreeData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handleExport:function(){var e=this;Object(s["g"])(this.queryParams).then((function(t){e.downloadfileCommon(t)}))},getTreeData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["h"])().then((function(e){e.success?t.treeData=e.data:t.$message({type:"error",message:e.msg})}));case 2:this.handleGroup=this.treeData,this.treeData.length>0&&(this.$refs.elTree.setCurrentKey(this.treeData[0].groupId),this.checkNode=this.treeData[0],this.queryParams.groupId=this.treeData[0].groupId,this.handleQuery());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),renderContent:function(e,t){var r=t.node;t.data,t.store;return e("span",{class:"custom-tree-node treeItem"},[e("i",{class:"el-icon-menu"}),e("span",{style:"margin-left:5px;"},[r.label])])},handleNodeClick:function(e){this.queryParams.groupId=e.groupId,this.checkNode=e,this.handleQuery()},table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},addType:function(){this.dialogTitle="添加管理字段分组",this.handleTreeObj={},this.TreeDialog=!0},editType:function(){this.checkNode.groupId?(this.dialogTitle="编辑管理字段分组",this.handleTreeObj=this.checkNode,this.TreeDialog=!0):this.$message({message:"请选中需要编辑的数据!",type:"error"})},deleteAlert:function(){var e=this;this.checkNode.groupId?this.$confirm("数据和类型都会被删除，确认删除","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then((function(){Object(s["d"])({groupId:e.queryParams.groupId}).then((function(t){200==t.code?e.$message({type:"success",message:"删除成功"}):e.$message({type:"error",message:t.msg}),e.getTreeData()}))})).catch((function(){})):this.$message({message:"请选中需要删除的数据!",type:"error"})},cancelDialog:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Tree"!=t){e.next=5;break}return e.next=3,this.getTreeData();case 3:e.next=6;break;case 5:"Field"==t&&this.handleQuery();case 6:this.TreeDialog=!1,this.DictDialog=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleQuery:function(){var e=this;this.loading=!0,console.log(this.queryParams),Object(s["k"])(this.queryParams).then((function(t){e.tableData=t.data.pageData,e.total=t.data.totalCount,e.loading=!1}))},addRow:function(){this.handleDictObj={},this.dialogTitle="新增字典",this.DictDialog=!0},editRow:function(){var e=this;1==this.multipleSelection.length?Object(s["j"])({id:this.multipleSelection[0].id}).then((function(t){e.dialogTitle="编辑管理字段",e.handleDictObj=t.data,e.handleDictObj.groupId=e.checkNode.groupId,e.DictDialog=!0})):this.$message({message:"请选中一条需要编辑的数据!",type:"error"})},deleteRow:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("确认删除吗","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then((function(){var t=[];e.multipleSelection.forEach((function(e){t.push(e.id)})),Object(s["c"])({ids:t.join(",")}).then((function(t){200==t.code?e.$message({type:"success",message:"删除成功"}):e.$message({type:"error",message:t.msg}),e.handleQuery()}))})).catch((function(){})):this.$message({message:"请选中需要删除的数据!",type:"error"})},handleSelectionChange:function(e){this.multipleSelection=e},formatBoolean:function(e,t,r){var a="";return a=e.nullAble?"是":"否",a}}},c=u,d=(r("b24e"),r("2877")),m=Object(d["a"])(c,a,l,!1,null,null,null);t["default"]=m.exports}}]);