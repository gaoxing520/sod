(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa7e616c","chunk-16f51013","chunk-5879faae"],{"63d4":function(e,t,a){},"64d4":function(e,t,a){"use strict";var s=a("63d4"),r=a.n(s);r.a},"68bf":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"handleRoleDialog"},[a("el-alert",{attrs:{title:"您可以选择角色分配给当前选定的用户",type:"info",closable:!1}}),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[e._v("用户名:")]),e._v(" "),a("el-col",{attrs:{span:20}},[e._v(e._s(this.handleObj.userName))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[e._v("所属角色:")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-link",{attrs:{type:"primary",underline:!1}},[e._v(e._s(this.handleObj.roleName))])],1)],1),e._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":"",border:"",stripe:""},on:{"current-change":e.handleSelectionChange,select:e.selectSingleTable}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enable",label:"是否禁用"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.enable?a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("正常")]):a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.trueDialog()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelDialog()}}},[e._v("取 消")])],1)],1)},r=[],l=(a("ac6a"),{name:"handleRoleDialog",props:{handleObj:{type:Object}},data:function(){return{tableData:[],choserow:[]}},created:function(){},methods:{initDetail:function(){var e=this;this.axios.post(interfaceObj.userManage_userRole,{userId:this.handleObj.userId}).then((function(t){var a=t.data.roles;a.forEach((function(e){e.checked=!1})),e.tableData=a}))},handleSelectionChange:function(e){this.choserow=e,this.$refs.singleTable.clearSelection(),this.$refs.singleTable.toggleRowSelection(e,!0)},selectSingleTable:function(e,t){e.length>0?(this.$refs.singleTable.setCurrentRow(t),this.$refs.singleTable.clearSelection(),this.$refs.singleTable.toggleRowSelection(t,!0),this.choserow=t):(this.choserow=null,this.$refs.singleTable.setCurrentRow([]),this.$refs.singleTable.clearSelection())},trueDialog:function(){var e=this;if(""!=this.choserow){if("admin"!=this.handleObj.userName&&"3"==this.choserow.id)return void this.$message({message:"普通用户不能授予【超级管理员】角色",type:"warning"});this.axios.post(interfaceObj.userManage_allocation,{userId:this.handleObj.userId,roleId:this.choserow.id}).then((function(t){0==t.data.returnCode?(e.$message({message:"分配成功",type:"success"}),e.$emit("handleDialogClose")):e.$message({type:"error",message:t.data.returnMessage})}))}else this.$message({type:"error",message:"请选择一条数据"})},cancelDialog:function(){this.$emit("handleDialogClose")}}}),o=l,n=(a("db57"),a("2877")),i=Object(n["a"])(o,s,r,!1,null,null,null);t["default"]=i.exports},7648:function(e,t,a){"use strict";var s=a("a9b6"),r=a.n(s);r.a},"9e0c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManageTemplate"},[a("el-form",{ref:"formClass",staticClass:"add_form",attrs:{model:e.formObject,rules:e.rules,"label-width":"95px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userName",label:"用户名:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userName,callback:function(t){e.$set(e.formObject,"userName",t)},expression:"formObject.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"user_role_id",label:"所属角色："}},[a("el-select",{attrs:{size:"small"},model:{value:e.formObject.user_role_id,callback:function(t){e.$set(e.formObject,"user_role_id",t)},expression:"formObject.user_role_id"}},e._l(e.roles,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userPassword",label:"用户密码:"}},[a("el-input",{attrs:{type:"password",size:"small"},model:{value:e.formObject.userPassword,callback:function(t){e.$set(e.formObject,"userPassword",t)},expression:"formObject.userPassword"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userPhone",label:"电话:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userPhone,callback:function(t){e.$set(e.formObject,"userPhone",t)},expression:"formObject.userPhone"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userNickname",label:"用户昵称:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userNickname,callback:function(t){e.$set(e.formObject,"userNickname",t)},expression:"formObject.userNickname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userRealname",label:"真实姓名:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userRealname,callback:function(t){e.$set(e.formObject,"userRealname",t)},expression:"formObject.userRealname"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userAge",label:"年龄:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userAge,callback:function(t){e.$set(e.formObject,"userAge",t)},expression:"formObject.userAge"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userSex",label:"性别:"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.formObject.userSex,callback:function(t){e.$set(e.formObject,"userSex",t)},expression:"formObject.userSex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:e.formObject.userSex,callback:function(t){e.$set(e.formObject,"userSex",t)},expression:"formObject.userSex"}},[e._v("女")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userQQ",label:"QQ:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userQQ,callback:function(t){e.$set(e.formObject,"userQQ",t)},expression:"formObject.userQQ"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userMail",label:"邮箱:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userMail,callback:function(t){e.$set(e.formObject,"userMail",t)},expression:"formObject.userMail"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址:"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"provinceAndCity"}},[a("el-cascader",{attrs:{size:"small",options:e.options},on:{change:e.handleProvinceAndCityChange},model:{value:e.formObject.provinceAndCity,callback:function(t){e.$set(e.formObject,"provinceAndCity",t)},expression:"formObject.provinceAndCity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"userAddress"}},[a("el-input",{attrs:{size:"small"},model:{value:e.formObject.userAddress,callback:function(t){e.$set(e.formObject,"userAddress",t)},expression:"formObject.userAddress"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"mark",label:"备注:"}},[a("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.formObject.mark,callback:function(t){e.$set(e.formObject,"mark",t)},expression:"formObject.mark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveUserInfo("formClass")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.handleClose("formClass")}}},[e._v("取消")])],1)],1)},r=[],l=(a("28a5"),{name:"userAddOrEdit",props:{handleObj:{type:Object}},data:function(){return{options:"",formObject:{userName:"",user_role_id:"",userPassword:"",userPhone:"",userNickname:"",userRealname:"",userAge:"",userSex:"男",userQQ:"",userMail:"",province:"",city:"",county:"",provinceAndCity:[],userAddress:"",mark:""},roles:[],rules:{userName:[{required:!0,message:"用户名必须输入",trigger:"blur"}],user_role_id:[{required:!0,message:"必须选择用户角色",trigger:"blur"}],userPassword:[{required:!0,message:"用户密码必须输入",trigger:"blur"}],userRealname:[{required:!0,message:"用户真实姓名必须输入",trigger:"blur"}],userAge:[{required:!0,message:"用户年龄必须输入",trigger:"blur"}],userMail:[{required:!0,message:"邮箱必须输入",trigger:"blur"}]}}},created:function(){},methods:{init:function(){if(void 0==this.handleObj.userId);else{this.formObject=this.handleObj;var e=this.handleObj.province+","+this.handleObj.city+","+this.handleObj.county;this.formObject.provinceAndCity=e.split(",")}},handleProvinceAndCityChange:function(){},userRoles:function(){var e=this;this.axios.post(interfaceObj.userManage_selectRole).then((function(t){0==t.data.returnCode&&(e.roles=t.data.data)}))},saveUserInfo:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if("admin"!=t.formObject.userName&&"3"==t.formObject.user_role_id)return void t.$message({message:"普通用户不能授予【超级管理员】角色",type:"warning"});t.formObject.length>0&&(t.formObject.province=t.formObject.provinceAndCity[0],t.formObject.city=t.formObject.provinceAndCity[1],t.formObject.county=t.formObject.provinceAndCity[2]),null!=t.formObject.userId&&""!=t.formObject.userId?t.axios.post(interfaceObj.userManage_updateUser,t.formObject).then((function(e){"0"===e.data.returnCode&&(t.$message({message:"修改成功",type:"success"}),t.$emit("handleDialogClose"))})):t.axios.post(interfaceObj.userManage_getByUserName,{userName:t.formObject.userName}).then((function(e){0==e.data.data.length?t.axios.post(interfaceObj.userManage_addUser,t.formObject).then((function(e){"0"===e.data.returnCode?(t.$message({message:"添加成功",type:"success"}),t.$emit("handleDialogClose")):t.$message({message:"用户信息保存失败！！",type:"error"})})):t.$message({message:"用户名不能重复！！",type:"warning"})}))}}))},handleClose:function(e){this.$refs[e].resetFields(),this.$emit("handleDialogClose")}}}),o=l,n=(a("64d4"),a("2877")),i=Object(n["a"])(o,s,r,!1,null,null,null);t["default"]=i.exports},a9b6:function(e,t,a){},bdfd:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManagement app-container"},[a("el-form",{staticClass:"funLoad selSearchCon",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"用户名："}},[a("el-input",{attrs:{size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.DataBaseExpandForm("")}}},[e._v("查询")])],1)],1),e._v(" "),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addFun()}}},[e._v("添加")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteFun()}}},[e._v("删除")])],1)],1),e._v(" "),a("el-table",{ref:"singleTable",attrs:{data:e.tableData,stripe:"","default-sort":{prop:"database_name",order:"ascending"}}},[a("el-table-column",{attrs:{type:"index","min-width":"20",label:" ",index:e.table_index}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userRealname",label:"真实姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"所属角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userSex",label:"用户性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userMail",label:"用户邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastLogintime",label:"最近一次登录时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-tickets",type:"text",size:"mini"},on:{click:function(a){return e.handleRole(t.row)}}},[e._v("分配角色")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-edit",type:"text",size:"mini"},on:{click:function(a){return e.editCell(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.addOrEditorTitle,visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?a("userEdit",{attrs:{handleObj:e.handleObj},on:{handleDialogClose:e.handleDialogClose}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"分配角色",visible:e.roleDialog,width:"60%"},on:{"update:visible":function(t){e.roleDialog=t}}},[e.roleDialog?a("roleEdit",{attrs:{handleObj:e.handleObj},on:{handleDialogClose:e.handleDialogClose}}):e._e()],1)],1)},r=[],l=(a("ac6a"),a("386d"),a("db72")),o=a("9e0c"),n=a("68bf"),i={name:"userManagement",components:{userEdit:o["default"],roleEdit:n["default"]},data:function(){return{queryParams:{userName:"",sort:"lastLogintime",order:"desc"},pageObj:{},search:"",tableData:[],dataTotal:0,addOrEditorTitle:"",dialogVisible:!1,roleDialog:!1,handleObj:{}}},mounted:function(){},methods:{table_index:function(e){return(this.queryParams.pageNum-1)*this.queryParams.pageSize+e+1},DataBaseExpandForm:function(e){var t=this;""==e&&(this.$refs.pagination.paginateObj.page=1);var a=this.$refs.pagination.paginateObj;this.queryParams=Object(l["a"])({},this.queryParams,{},a),this.queryParams.userName=this.search,this.axios.post(interfaceObj.userManage_queryUser,this.queryParams).then((function(e){t.tableData=e.data.data,t.dataTotal=e.data.total}))},addFun:function(){this.handleObj={},this.dialogVisible=!0,this.addOrEditorTitle="添加"},paginationChange:function(){this.DataBaseExpandForm()},handleDialogClose:function(){this.dialogVisible=!1,this.roleDialog=!1,this.handleObj={},this.DataBaseExpandForm("")},deleteFun:function(){var e=this,t=this.$refs.singleTable.selection;if(console.log(t),t.length>0){var a=[];t.forEach((function(e){"3"!=e.user_role_id&&a.push(e.userId)})),a.length>0&&a.length==t.length?this.$confirm("数据删除后将无法恢复，确认删除?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.post(interfaceObj.userManage_deleteUser,{ids:a.join(",")}).then((function(t){0==t.data.returnCode?e.$message({type:"success",message:"删除成功"}):e.$message({type:"error",message:t.data.returnMessage}),e.DataBaseExpandForm("")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message({type:"error",message:"超级管理员不能删除"})}else this.$message({type:"error",message:"请选择一条数据"})},handleRole:function(e){this.handleObj=e,this.roleDialog=!0},editCell:function(e){this.handleObj=e,this.dialogVisible=!0,this.addOrEditorTitle="编辑"}}},c=i,u=(a("7648"),a("2877")),m=Object(u["a"])(c,s,r,!1,null,null,null);t["default"]=m.exports},db57:function(e,t,a){"use strict";var s=a("f336"),r=a.n(s);r.a},f336:function(e,t,a){}}]);